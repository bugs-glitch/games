/**
 * Cooked with Flambe
 * https://github.com/aduros/flambe
 */
'use strict';(function(){var M,ca,c,t,h,f,J,r,l,i,$,o,R,C,T,P,S,U,da,X,x,B,ha,D,O,j,g,e,I,m,L,w,y,H,Y,z,F,aa;function v(a,b){function d(){}d.prototype=a;var n=new d,c;for(c in b)n[c]=b[c];return n}function ga(a){return a instanceof Array?function(){return A.iter(a)}:"function"==typeof a.iterator?s(a,a.iterator):a.iterator}function s(a,b){var d=function(){return d.method.apply(d.scope,arguments)};d.scope=a;d.method=b;return d}var k={},p=function(){return x.__string_rec(this,"")},W=function(a,b){b=
b.split("u").join("");this.r=RegExp(a,b)};k.EReg=W;W.__name__=["EReg"];W.prototype={matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:W};var G=function(){this.h={}};k.Hash=G;G.__name__=["Hash"];G.prototype=
{iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return A.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:G};var A=
function(){};k.HxOverrides=A;A.__name__=["HxOverrides"];A.dateStr=function(a){var b=a.getMonth()+1,d=a.getDate(),n=a.getHours(),c=a.getMinutes(),e=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>d?"0"+d:""+d)+" "+(10>n?"0"+n:""+n)+":"+(10>c?"0"+c:""+c)+":"+(10>e?"0"+e:""+e)};A.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],
a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw"Invalid date format : "+a;}};A.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};A.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};A.remove=function(a,b){for(var d=0,n=a.length;d<n;){if(a[d]==b)return a.splice(d,1),!0;d++}return!1};A.iter=
function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var V=function(){this.h={}};k.IntHash=V;V.__name__=["IntHash"];V.prototype={keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return A.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=
b},__class__:V};var ba=function(){};k.Lambda=ba;ba.__name__=["Lambda"];ba.array=function(a){for(var b=[],a=ga(a)();a.hasNext();){var d=a.next();b.push(d)}return b};ba.has=function(a,b,d){if(null==d)for(d=ga(a)();d.hasNext();){if(a=d.next(),a==b)return!0}else for(var n=ga(a)();n.hasNext();)if(a=n.next(),d(a,b))return!0;return!1};ba.count=function(a,b){var d=0;if(null==b)for(var n=ga(a)();n.hasNext();)n.next(),d++;else for(n=ga(a)();n.hasNext();){var c=n.next();b(c)&&d++}return d};var ea=function(){this.length=
0};k.List=ea;ea.__name__=["List"];ea.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:ea};var K=function(){};k.Reflect=K;K.__name__=["Reflect"];K.field=function(a,b){var d=null;try{d=a[b]}catch(n){}return d};K.setProperty=function(a,b,d){var n;if(a.__properties__&&(n=a.__properties__["set_"+
b]))a[n](d);else a[b]=d};K.fields=function(a){var b=[];if(null!=a){var d=Object.prototype.hasOwnProperty,n;for(n in a)d.call(a,n)&&b.push(n)}return b};K.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};K.compareMethods=function(a,b){return a==b?!0:!K.isFunction(a)||!K.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};var q=function(){};k.Std=q;q.__name__=["Std"];q.string=function(a){return x.__string_rec(a,"")};q.parseInt=function(a){var b=parseInt(a,
10);if(0==b&&(120==A.cca(a,1)||88==A.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};q.parseFloat=function(a){return parseFloat(a)};var Z=function(){this.b=""};k.StringBuf=Z;Z.__name__=["StringBuf"];Z.prototype={__class__:Z};var Q=function(){};k.StringTools=Q;Q.__name__=["StringTools"];Q.urlEncode=function(a){return encodeURIComponent(a)};Q.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};Q.startsWith=function(a,b){return a.length>=b.length&&A.substr(a,0,b.length)==b};Q.isSpace=
function(a,b){var d=A.cca(a,b);return 9<=d&&13>=d||32==d};Q.ltrim=function(a){for(var b=a.length,d=0;d<b&&Q.isSpace(a,d);)d++;return 0<d?A.substr(a,d,b-d):a};Q.rtrim=function(a){for(var b=a.length,d=0;d<b&&Q.isSpace(a,b-d-1);)d++;return 0<d?A.substr(a,0,b-d):a};Q.trim=function(a){return Q.ltrim(Q.rtrim(a))};var E=k.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};E.TNull=["TNull",0];E.TNull.toString=p;E.TNull.__enum__=
E;E.TInt=["TInt",1];E.TInt.toString=p;E.TInt.__enum__=E;E.TFloat=["TFloat",2];E.TFloat.toString=p;E.TFloat.__enum__=E;E.TBool=["TBool",3];E.TBool.toString=p;E.TBool.__enum__=E;E.TObject=["TObject",4];E.TObject.toString=p;E.TObject.__enum__=E;E.TFunction=["TFunction",5];E.TFunction.toString=p;E.TFunction.__enum__=E;E.TClass=function(a){a=["TClass",6,a];a.__enum__=E;a.toString=p;return a};E.TEnum=function(a){a=["TEnum",7,a];a.__enum__=E;a.toString=p;return a};E.TUnknown=["TUnknown",8];E.TUnknown.toString=
p;E.TUnknown.__enum__=E;var N=function(){};k.Type=N;N.__name__=["Type"];N.getClassName=function(a){return a.__name__.join(".")};N.getEnumName=function(a){return a.__ename__.join(".")};N.resolveClass=function(a){a=k[a];return null==a||!a.__name__?null:a};N.resolveEnum=function(a){a=k[a];return null==a||!a.__ename__?null:a};N.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],
b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};N.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};N.createEnum=function(a,b,d){var n=K.field(a,b);if(null==n)throw"No such constructor "+b;if(K.isFunction(n)){if(null==d)throw"Constructor "+b+" need parameters";
return n.apply(a,d)}if(null!=d&&0!=d.length)throw"Constructor "+b+" does not need parameters";return n};N.getEnumConstructs=function(a){return a.__constructs__.slice()};N["typeof"]=function(a){switch(typeof a){case "boolean":return E.TBool;case "string":return E.TClass(String);case "number":return Math.ceil(a)==a%2147483648?E.TInt:E.TFloat;case "object":if(null==a)return E.TNull;var b=a.__enum__;if(null!=b)return E.TEnum(b);a=a.__class__;return null!=a?E.TClass(a):E.TObject;case "function":return a.__name__||
a.__ename__?E.TObject:E.TFunction;case "undefined":return E.TNull;default:return E.TUnknown}};var u=function(){};k.Xml=u;u.__name__=["Xml"];u.parse=function(a){return C.Parser.parse(a)};u.createElement=function(a){var b=new u;b.nodeType=u.Element;b._children=[];b._attributes=new G;b.setNodeName(a);return b};u.createPCData=function(a){var b=new u;b.nodeType=u.PCData;b.setNodeValue(a);return b};u.createCData=function(a){var b=new u;b.nodeType=u.CData;b.setNodeValue(a);return b};u.createComment=function(a){var b=
new u;b.nodeType=u.Comment;b.setNodeValue(a);return b};u.createDocType=function(a){var b=new u;b.nodeType=u.DocType;b.setNodeValue(a);return b};u.createProlog=function(a){var b=new u;b.nodeType=u.Prolog;b.setNodeValue(a);return b};u.createDocument=function(){var a=new u;a.nodeType=u.Document;a._children=[];return a};u.prototype={toString:function(){if(this.nodeType==u.PCData)return this._nodeValue;if(this.nodeType==u.CData)return"<![CDATA["+this._nodeValue+"]]\>";if(this.nodeType==u.Comment)return"<\!--"+
this._nodeValue+"--\>";if(this.nodeType==u.DocType)return"<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==u.Prolog)return"<?"+this._nodeValue+"?>";var a=new Z;if(this.nodeType==u.Element){a.b+=q.string("<");a.b+=q.string(this._nodeName);for(var b=this._attributes.keys();b.hasNext();){var d=b.next();a.b+=q.string(" ");a.b+=q.string(d);a.b+=q.string('="');a.b+=q.string(this._attributes.get(d));a.b+=q.string('"')}if(0==this._children.length)return a.b+=q.string("/>"),a.b;a.b+=q.string(">")}for(b=this.iterator();b.hasNext();)d=
b.next(),a.b+=q.string(d.toString());this.nodeType==u.Element&&(a.b+=q.string("</"),a.b+=q.string(this._nodeName),a.b+=q.string(">"));return a.b},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&A.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var d=this._children[a];if(d.nodeType==u.Element)return d;a++}return null},elementsNamed:function(a){if(null==
this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,d=this.x.length;b<d;){var n=this.x[b];if(n.nodeType==u.Element&&n._nodeName==a)break;b++}this.cur=b;return b<d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var n=this.x[b];b++;if(n.nodeType==u.Element&&n._nodeName==a)return this.cur=b,n}return null}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=
this.x.length;a<b&&!(this.x[a].nodeType==u.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var d=this.x[a],a=a+1;if(d.nodeType==u.Element)return this.cur=a,d}return null}}},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=u.Element)throw"bad nodeType";return this._attributes.exists(a)},
set:function(a,b){if(this.nodeType!=u.Element)throw"bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=u.Element)throw"bad nodeType";return this._attributes.get(a)},getParent:function(){return this._parent},setNodeValue:function(a){if(this.nodeType==u.Element||this.nodeType==u.Document)throw"bad nodeType";return this._nodeValue=a},getNodeValue:function(){if(this.nodeType==u.Element||this.nodeType==u.Document)throw"bad nodeType";return this._nodeValue},setNodeName:function(a){if(this.nodeType!=
u.Element)throw"bad nodeType";return this._nodeName=a},getNodeName:function(){if(this.nodeType!=u.Element)throw"bad nodeType";return this._nodeName},__class__:u,__properties__:{set_nodeName:"setNodeName",get_nodeName:"getNodeName",set_nodeValue:"setNodeValue",get_nodeValue:"getNodeValue"}};M=function(){};ca=void 0;c=void 0;t=void 0;h=void 0;k["com.nick.fop.dragon_drop.DocumentApp"]=M;M.__name__=["com","nick","fop","dragon_drop","DocumentApp"];M.main=function(){D.init();M._fillEntity=new O;M._fillSprite=
new j.FillSprite(0,960,560);M._fillEntity.add(M._fillSprite);D.root.addChild(M._fillEntity);f.JSEmbedProxy.getIsCrossdomain()?f.WorkinCloud.instance.getAssets().setCrossdomainBaseUrl(M.appendAssetsToUrl(f.JSEmbedProxy.getBase())):f.WorkinCloud.instance.getAssets()._setBaseUrl(M.trimUrl(f.JSEmbedProxy.getBase()));f.WorkinCloud.instance.getDispatcher().addEventListener(J.ConstantsCloud.EVENT_FILES_LOADED,M._onBootstrapLoad);f.WorkinCloud.instance.getAssets().addPackDef("bootstrap");f.WorkinCloud.instance.getAssets().loadPack("bootstrap")};
M._onBootstrapLoad=function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(J.ConstantsCloud.EVENT_FILES_LOADED,M._onBootstrapLoad);M._initServices();T.delay(M._initMain,800)};M._initMain=function(){M._main=new ca};M._initServices=function(){for(var a=f.WorkinCloud.instance.getAssets().getXML(c.ConstantsApp.CONFIG_XML_PATH).node.resolve("services").nodes.resolve("service").iterator();a.hasNext();){var b=a.next();switch(b.att.resolve("type").toString()){case "analytics":"true"==b.att.resolve("enabled").toString()&&
(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initAnalytics"),r.ServiceAnalytics.init(b.att.resolve("id").toString()))}}};M.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=A.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=A.substr(a,b,a.length-b);return a=M.appendAssetsToUrl(a)};M.appendAssetsToUrl=function(a){if(0==a.length)return a;"/"!=a.charAt(a.length-1)&&(a+="/");a.indexOf("/assets")<
a.length-9&&(a+="assets/");return a};ca=function(){this._RATE_REFRESH_SCALE=0.4;this._flagGameplayPaused=this._flagInitialLoadComplete=this._flagJSEmbedPauseState=this._flagJSEmbedExists=!1;this._timerRefreshScale=0.0010;this._timeline=D.root;D.uncaughtError.connect(s(this,this.errorHandler));f.WorkinCloud.instance.getInput().prime();this._scaleSprite=new j.Sprite;this._timeline.add(this._scaleSprite);this._layerWorld=new O;this._layerUI=new O;this._flagWebAudioUnlocked=!1;this._timeline.addChild(this._layerWorld);
this._timeline.addChild(this._layerUI);this._dt=0;this._isUIActive=this._isWorldActive=!1;this._flagFirstPlay=!0;x.__instanceof(D._platform.getStage(),g.html.HtmlStage)&&(c.ConstantsApp.scaleFactor=x.__cast(D._platform.getStage(),g.html.HtmlStage).scaleFactor);this._flagJSEmbedExists=f.JSEmbedProxy.getExists();this._document={canvasScale:1};this._document=eval("document");this._changeActions=[];this._flowstack=[];this._beginEngine();this._parseConfigXML();this._addEventListeners()};k["com.nick.fop.dragon_drop.Main"]=
ca;ca.__name__=["com","nick","fop","dragon_drop","Main"];ca.prototype={_worldDestroy:function(){this._isWorldActive&&(this._isWorldActive=!1,this._world.dispose(),this._world=null)},_onEventInterfaceChange:function(a){this._executeInterfaceChange(a.flowId,a.screenId)},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,f.WorkinCloud.instance._getSound().playSound("audio/silent"))},_onEventInput:function(a){this._handleWebAudioUnlock();f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||
this._ui.handleInput(a)&&this._isWorldActive&&this._world.handleInput(a)},_onFlowEvent:function(a){this._addFlowEvent(a.flowId)},_onMuteToggle:function(){f.WorkinCloud.instance.setValue(c.ConstantsApp.BOOL_MUTED,!f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_MUTED))},_enableInput:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(l.WMEventInput.EVENT_INPUT,s(this,this._onEventInput))},_addEventListeners:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(l.WMEventUpdate.EVENT_UPDATE,
s(this,this._onEventUpdate));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_MUTE_TOGGLE,s(this,this._onMuteToggle));f.WorkinCloud.instance.getDispatcher().addEventListener(l.WMEventFlow.EVENT_FLOW,s(this,this._onFlowEvent));this._ui.addEventListener(l.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT,s(this,this._onEventInterfaceChange))},_executeInterfaceChange:function(a,b){for(var d=this._changeActions.length;0<d;)d--,this._changeActions[d]._getScreenId()==b&&this._changeActions[d]._getChangeEvent()==
a&&(this._changeActions[d]._getAction()(),this._changeActions.splice(d,1))},_executeFlowStack:function(a){if(!this._ui._getHasTransition())switch(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1),a){case c.ConstantsScreen.FLOW_SPLASH_PLAY:f.WorkinCloud.instance._getSound().playMusic("dragon_drop_final_theme",0.5);this._gotoAndPlayGame();this._flagFirstPlay&&r.ServiceAnalytics.start();break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU:f.WorkinCloud.instance.log("[Main] Main Menu Flow Click");
f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_PAUSE));this._ui.openScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_UNPAUSE));this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_OPEN:this._ui.openScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD,!1);this._ui.openScreen(c.ConstantsScreen.SCREEN_ATTACK_MENU,
!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_ATTACK_MENU,!1);break;case c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN:this._ui.openScreen(c.ConstantsScreen.SCREEN_LEVEL_WIN,!1);break;case c.ConstantsScreen.FLOW_END_LEVEL_NEXT:this._ui.closeScreen(c.ConstantsScreen.SCREEN_LEVEL_WIN);this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD);f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.CURRENT_LEVEL,1);this._gotoAndPlayGame();this._resetCoolDowns();
break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,!1);this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:this._ui.closeScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,!1);this._ui.openScreen(c.ConstantsScreen.SCREEN_END_GAME,!1);r.ServiceAnalytics.sendMilestone("custom7");break;case c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,
!1);this._ui.openScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);this._ui.openScreen(c.ConstantsScreen.SCREEN_HELP,!1);r.ServiceAnalytics.sendMilestone("custom3");break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP_CLOSE:f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_UNPAUSE));this._ui.closeScreen(c.ConstantsScreen.SCREEN_HELP,!1);break;case c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:this._ui.openScreen(c.ConstantsScreen.SCREEN_END_GAME,
!1);r.ServiceAnalytics.sendMilestone("custom7");break;case c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD),this._ui.closeScreen(c.ConstantsScreen.SCREEN_END_GAME),this._setDefaults(),this._gotoAndPlayGame()}},_runFlowStack:function(){if(0!=this._flowstack.length)for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_addFlowEvent:function(a){this._flowstack.push(a)},_hideOrientationAlert:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&
(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Back to landscape."),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!1),f.JSEmbedProxy.unpause(),f.JSEmbedProxy.alertOff())},_showOrientationAlert:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Portrait mode!"),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!0),f.JSEmbedProxy.pause(),f.JSEmbedProxy.alertOn(f.WorkinCloud.instance._getLocalize().getData("orientation_landscape")._getString()))},
_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_UNPAUSE))},_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_PAUSE))},_onEventUpdate:function(a){this._dt=a.getDt();0.12<this._dt&&(this._dt=0.12);if(this._flagJSEmbedExists&&(f.JSEmbedProxy.getIsPaused()!=this._flagJSEmbedPauseState&&
((this._flagJSEmbedPauseState=f.JSEmbedProxy.getIsPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay()),this._timerRefreshScale-=this._dt,0>=this._timerRefreshScale)){this._timerRefreshScale=this._RATE_REFRESH_SCALE;if(this._flagInitialLoadComplete&&f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)){if(f.JSEmbedProxy.getCanvasHeight()>f.JSEmbedProxy.getCanvasWidth()){this._showOrientationAlert();return}if(f.WorkinCloud.instance.getValue(c.ConstantsApp.BOOL_ORIENTATION_ALERT)){this._hideOrientationAlert();
return}}if(this._flagJSEmbedExists){var b=f.JSEmbedProxy.getCanvasScale()*c.ConstantsApp.scaleFactor;b!=this._scaleSprite.scaleX._value&&(this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(b)),f.WorkinCloud.instance.getInput()._setScale(b))}}i.tween.WorkinTweener._getInstance().update(a.getDt());f.WorkinCloud.instance.getInput().update(a.getDt());this._isUIActive&&this._ui.update(a.getDt());this._isWorldActive&&(this._world.update(a.getDt()),this._world.render());f.WorkinCloud.instance._getSound().update(a.getDt());
f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_GAME_LOSE)?this._onFlowEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_GAME_WIN)?this._onFlowEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_GAME_WIN)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_LEVEL_LOSE)?this._onFlowEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_LEVEL_WIN)&&this._onFlowEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN));
this._runFlowStack()},_generateWorld:function(){this._isWorldActive&&this._worldDestroy();this._isWorldActive=!0;this._world=new t.World(this._layerWorld,this._flagFirstPlay);this._flagFirstPlay&&(this._flagFirstPlay=!1)},_resetCoolDowns:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_FIRE_COOLDOWN,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEAL_COOLDOWN,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_MEZ_COOLDOWN,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_WINGS_COOLDOWN,
0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS,0)},_gotoAndPlayGame:function(){this._loadChunks(["gameplay"],s(this,this._eventLoadCompleteGameplay),800)&&(this._generateWorld(),this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD),r.ServiceAnalytics.sendMilestone("custom6"))},_generateUI:function(){this._isUIActive=!0;this._ui.addScreen(c.ConstantsScreen.SCREEN_LOADING,h.screens.ScreenLoading,"ui/loading_screen");this._ui.addScreen(c.ConstantsScreen.SCREEN_LOADING_OVERLAY,
h.screens.ScreenGeneric,"ui/loading_2/loading_overlay");this._ui.addScreen(c.ConstantsScreen.SCREEN_CUTSCENE_BORDERS,h.screens.ScreenGeneric,"ui/cutscene/cutscene_border");this._ui.addScreen(c.ConstantsScreen.SCREEN_SPLASH,h.screens.ScreenSplash,"ui/splash/splash_screen_logos");this._ui.addScreen(c.ConstantsScreen.SCREEN_ATTACK_MENU,h.screens.ScreenAttackMenu);this._ui.addScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,h.screens.ScreenGameplayMenu);this._ui.addScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD,
h.screens.ScreenGameplayHUD);this._ui.addScreen(c.ConstantsScreen.SCREEN_LEVEL_WIN,h.screens.ScreenLevelWin);this._ui.addScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,h.screens.ScreenQuitConfirm);this._ui.addScreen(c.ConstantsScreen.SCREEN_HELP,h.screens.ScreenGameplayHelp);this._ui.addScreen(c.ConstantsScreen.SCREEN_END_GAME,h.screens.ScreenGameOver)},_registerInput:function(){f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_SPACE,[e.Key.Space]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_LEFT,
[e.Key.Left,e.Key.A]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_RIGHT,[e.Key.Right,e.Key.D]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_UP,[e.Key.Up,e.Key.W]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_DOWN,[e.Key.Down,e.Key.S]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_Z,[e.Key.Z]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_X,[e.Key.X]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_C,
[e.Key.C]);f.WorkinCloud.instance.getInput().registerInput(c.ConstantsApp.INPUT_P,[e.Key.P])},_setDefaults:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_PAUSED,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MUTED,!0);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAMEOVER,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAME_WIN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAME_LOSE,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_LEVEL_WIN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_LEVEL_LOSE,
!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEALTH,3);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LIVES,3);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_SCORE,0);f.WorkinCloud.instance.setFloat(c.ConstantsApp.CURRENT_LEVEL,1);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_FIRE_COOLDOWN,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEAL_COOLDOWN,
0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_MEZ_COOLDOWN,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_WINGS_COOLDOWN,0);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_FIRE_ENABLED,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HEAL_ENABLED,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MEZ_ENABLED,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_WINGS_ENABLED,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_FIRE_ON_COOLDOWN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HEAL_ON_COOLDOWN,
!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MEZ_ON_COOLDOWN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_WINGS_ON_COOLDOWN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_TOUCH_DEVICE,D._platform.getTouch().get_supported())},_beginEngine:function(){f.WorkinCloud.instance.log("[Main](_beginEngine)");this._ui=new h.ScreenManager(this._layerUI);this._timeline.add(new $.ComponentUpdater);this._registerInput();
this._generateUI();this._setDefaults()},_eventLoadCompleteGameplay:function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(J.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);T.delay(s(this,this._gotoAndPlayGame),800)},_loadChunksDelayCallback:function(){this._loadChunks(this._loadChunksCurrent,this._loadCallbackMethod,0)},_loadChunks:function(a,b,d){null==d&&(d=0);for(var n=0,e=!0;n<a.length;)f.WorkinCloud.instance.getAssets().isChunkLoaded(a[n])||(e=!1),n++;if(e)return!0;
this._loadChunksCurrent=a;this._loadCallbackMethod=b;if(0<d)return T.delay(s(this,this._loadChunksDelayCallback),d),this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_LOADING,!1,c.ConstantsScreen.TRANSITION_SCROLL_UP),!1;f.WorkinCloud.instance.getDispatcher().addEventListener(J.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);for(n=0;n<a.length;)f.WorkinCloud.instance.getAssets().isChunkLoaded(a[n])||f.WorkinCloud.instance.getAssets().loadChunk(a[n]),n++;this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_LOADING,
!1,c.ConstantsScreen.TRANSITION_SCROLL_UP);return!1},_gotoSplash:function(){this._enableInput();this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_SPLASH,!1,c.ConstantsScreen.TRANSITION_SCROLL_DOWN);r.ServiceAnalytics.sendMilestone("custom2")},_eventLoadCompleteInitial:function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(J.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);this._flagInitialLoadComplete=!0;T.delay(s(this,this._gotoSplash),500)},_beginInitialLoad:function(){this._loadChunks(["initial"],
s(this,this._eventLoadCompleteInitial),800);f.WorkinCloud.instance.getAssets().loadFolder("fonts_"+f.WorkinCloud.instance.getString(J.ConstantsCloud.STRING_REGION_ID))},_parseConfigXML:function(){f.WorkinCloud.instance.log("[Main](_parseConfigXML) Parse Config XML: "+c.ConstantsApp.CONFIG_XML_PATH);for(var a=f.WorkinCloud.instance.getAssets().getXML(c.ConstantsApp.CONFIG_XML_PATH),b=a.node.resolve("packs").nodes.resolve("pack").iterator();b.hasNext();){for(var d=b.next(),n=[],e=d.nodes.resolve("flump").iterator();e.hasNext();){var g=
e.next();n.push(g.att.resolve("id").toString())}e=[];for(g=d.nodes.resolve("tiles").iterator();g.hasNext();){var h=g.next();e.push(h.att.resolve("id").toString())}f.WorkinCloud.instance.getAssets().addPackDef(d.att.resolve("id").toString(),n,e)}for(b=a.node.resolve("chunks").nodes.resolve("chunk").iterator();b.hasNext();)d=b.next(),f.WorkinCloud.instance.getAssets().addChunk(d.att.resolve("id").toString(),d);f.WorkinCloud.instance.setString(J.ConstantsCloud.STRING_REGION_ID,q.string(a.node.resolve("localization").node.resolve("region").getInnerData()));
f.WorkinCloud.instance.log("[Main] Localization : Set Region: "+f.WorkinCloud.instance.getString(J.ConstantsCloud.STRING_REGION_ID));T.delay(s(this,this._beginInitialLoad),800)},errorHandler:function(a){f.WorkinCloud.instance.log("Error:"+a)},__class__:ca};c={ConstantsApp:function(){}};k["com.nick.fop.dragon_drop.data.ConstantsApp"]=c.ConstantsApp;c.ConstantsApp.__name__="com,nick,fop,dragon_drop,data,ConstantsApp".split(",");c.ConstantsScreen=function(){};k["com.nick.fop.dragon_drop.data.ConstantsScreen"]=
c.ConstantsScreen;c.ConstantsScreen.__name__="com,nick,fop,dragon_drop,data,ConstantsScreen".split(",");l={};f=void 0;J=void 0;r=void 0;i=void 0;$=void 0;o=void 0;R=void 0;l.WMEventDispatcher=function(){this._signals=new G};k["com.workinman.events.WMEventDispatcher"]=l.WMEventDispatcher;l.WMEventDispatcher.__name__=["com","workinman","events","WMEventDispatcher"];l.WMEventDispatcher.prototype={dispose:function(){for(var a=this._signals.iterator();a.hasNext();)a.next().dispose();this._signals=null},
dispatchEvent:function(a){this._signals.exists(a.getEventId())&&this._signals.get(a.getEventId()).dispatchEvent(a)},removeEventListener:function(a,b){this._signals.exists(a)&&(this._signals.get(a).removeEventListener(b),this._signals.get(a).isEmtpy()&&(this._signals.get(a).dispose(),this._signals.remove(a)))},addEventListener:function(a,b){this._signals.exists(a)||this._signals.set(a,new l._WMEventDispatcher.WMEventTracker);this._signals.get(a).addEventListener(b)},__class__:l.WMEventDispatcher};
h={ScreenManager:function(a){l.WMEventDispatcher.call(this);this._container=a;this._layerScreen=new O;this._layerTransition=new O;this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=!1;this._screens=[];this._screensOpen=[];this._screensQueue=[];this._transitionType=-1;this._flagCloseAllScreensWhenBottomCloses=this._flagHasScreenshot=this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=this._flagHasTransition=!1;this._camera=
new i.WorkinCamera(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y)}};k["com.nick.fop.dragon_drop.ui.ScreenManager"]=h.ScreenManager;h.ScreenManager.__name__="com,nick,fop,dragon_drop,ui,ScreenManager".split(",");h.ScreenManager.__super__=l.WMEventDispatcher;h.ScreenManager.prototype=v(l.WMEventDispatcher.prototype,{_transitionPlay:function(){this._transition.show();this._transition.start()},_removeTransition:function(){this._flagHasTransition&&(this._layerTransition.removeChild(this._transition._getEntity()),
this._transition._getDispatcher().removeEventListener(l.WMEventScreenOut.EVENT_SCREEN_OUTPUT,s(this,this._onEventTransitionOutput)),this._transition.dispose(),this._transition=null,this._flagHasTransition=!1)},_addTransition:function(a,b){null==b&&(b=!0);if(this._flagHasTransition){if(!b)return;this._removeTransition()}this._transition=new h.transitions.TransitionBase(a);this._transition.hide();this._transition._getDispatcher().addEventListener(l.WMEventScreenOut.EVENT_SCREEN_OUTPUT,s(this,this._onEventTransitionOutput));
this._layerTransition.addChild(this._transition._getEntity());this._flagHasTransition=!0},_updateTransition:function(a){switch(this._transitionType){case c.ConstantsScreen.TRANSITION_SCROLL:this._transitionScreenHeadedOut._getPos().x-=3E3*a;this._transitionScreenHeadedIn._getPos().x-=3E3*a;0>=this._transitionScreenHeadedIn._getPos().x&&(this._transitionScreenHeadedIn._getPos().x=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));
break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:this._transitionScreenHeadedOut._getPos().y-=2E3*a;this._transitionScreenHeadedIn._getPos().y-=2E3*a;0>=this._transitionScreenHeadedIn._getPos().y&&(this._transitionScreenHeadedIn._getPos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._transitionScreenHeadedOut._getPos().y+=2E3*a;this._transitionScreenHeadedIn._getPos().y+=
2E3*a;0<=this._transitionScreenHeadedIn._getPos().y&&(this._transitionScreenHeadedIn._getPos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case c.ConstantsScreen.TRANSITION_FADE:this._transition.update(a),this._transition.flagDispose&&this._removeTransition()}},_removeScreenDisplay:function(a){this._layerScreen.removeChild(a)},_addScreenDisplay:function(a){this._layerScreen.addChild(a)},_dispatchEventChange:function(a,
b){this.dispatchEvent(new l.WMEventInterfaceChange(a,b))},_onQueueConditionMet:function(a,b){null==b&&(b="");for(var d=0;d<this._screensQueue.length;)this._screensQueue[d].validateCondition(a,b)&&(this._generateScreen(this._screensQueue[d].screenData),this._screensQueue.splice(d,1)),d++},dispose:function(){for(var a=0;a<this._screensOpen.length;)this._disposeScreen(this._screensOpen[a].id),a++;this._screens=this._screensQueue=null;this._removeTransition();this._container.removeChild(this._layerScreen);
this._container.removeChild(this._layerTransition);this._layerTransition=this._layerScreen=null;l.WMEventDispatcher.prototype.dispose.call(this)},_getScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return this._screens[b];b--}f.WorkinCloud.instance.log("[ScreenManager](_getScreenData) ERROR: Screen >"+a+"< idoes not exist. getScreenData() returning NULL.");return null},_hasScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==
a)return!0;b--}return!1},_removeScreenshot:function(){this._flagHasScreenshot&&(this._layerScreen.removeChild(this._screenshot._getEntity()),this._screenshot.dispose(),this._screenshot=null,this._flagHasScreenshot=!1)},_addScreenshot:function(){f.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.")},_onTransitionCloseScreen:function(){this._flagCloseScreenAfterTransition&&(this.closeScreen(this._screenIdToCloseAfterTransition,!1),this._flagCloseScreenAfterTransition=
!1);this._flagOpenScreenAfterTransition&&(this.openScreen(this._screenIdToOpenDuringTransition,!1),this._flagOpenScreenAfterTransition=!1)},_onEventTransitionOutput:function(a){a.flowId==c.ConstantsScreen.OUTPUT_OPENED?(f.WorkinCloud.instance.log("[ScreenManager] Transition Midway..."),this._onTransitionCloseScreen(),this._removeScreenshot(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)):a.flowId==c.ConstantsScreen.OUTPUT_CLOSED&&(f.WorkinCloud.instance.log("[ScreenManager] Transition Complete."),
this._removeScreenshot(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE))},_onEventScreenOutput:function(a){a.flowId==c.ConstantsScreen.OUTPUT_OPENED?this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_COMPLETE,a.screenId):a.flowId==c.ConstantsScreen.OUTPUT_CLOSED&&(this._dispatchEventChange(c.ConstantsScreen.CHANGE_CLOSE_COMPLETE,a.screenId),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,a.screenId),this._flagHasTransition&&this._transitionType==
c.ConstantsScreen.TRANSITION_STAGED&&this._transitionPlay())},_disposeScreen:function(a){for(var b=0;b<this._screensOpen.length;){if(this._screensOpen[b].id==a){this._screensOpen[b]._getDispatcher().removeEventListener(l.WMEventScreenOut.EVENT_SCREEN_OUTPUT,s(this,this._onEventScreenOutput));this._removeScreenDisplay(this._screensOpen[b]._getEntity());this._screensOpen[b].dispose();this._screensOpen.splice(b,1);break}b++}},_generateScreen:function(a){if(this.isScreenOpen(a.id))this.getScreen(a.id).reset(),
this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id);else{var b=N.createInstance(a.screenClass,[a.id,a.assetClassName,a.data]);b.renderPosition(this._camera);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+a.id+"< not found.");else{if(this._flagHasTransition)switch(this._transitionScreenHeadedIn=b,this._transitionType){case c.ConstantsScreen.TRANSITION_SCROLL:b._getPos().x=c.ConstantsApp.STAGE_WIDTH;break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:b._getPos().y=
c.ConstantsApp.STAGE_HEIGHT;break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:b._getPos().y=-c.ConstantsApp.STAGE_HEIGHT}this._screensOpen.push(b);b.renderPosition(this._camera);this._addScreenDisplay(b._getEntity());b._getDispatcher().addEventListener(l.WMEventScreenOut.EVENT_SCREEN_OUTPUT,s(this,this._onEventScreenOutput));b.open(!0);this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id)}}},_addScreenToQueue:function(a,b,d){null==d&&(d="");this.hasQueuedScreen(a.id)||this._screensQueue.push(new h.screens.data.ScreenQueueData(a,
b,d))},removeAllQueuedScreens:function(){for(var a=this._screensQueue.length-1;0<=a;)this._screensQueue.splice(a,1),a--},removeQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a){this._screensQueue.splice(b,1);break}b--}},hasQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a)return!0;b--}return!1},isScreenOpen:function(a){for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==
a)return!0;b--}return!1},getScreen:function(a){null==a&&(a="");if(0==this._screensOpen.length)return f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()"),null;if(""==a)return this._screensOpen[this._screensOpen.length-1];for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return this._screensOpen[b];b--}f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: Screen >"+a+"< is not open or does not exist. getScreen() returning NULL.");
return null},update:function(a){if(!this._isPaused){0.15<a&&(a=0.15);this._flagHasTransition&&this._updateTransition(a);for(this._loop=this._screensOpen.length-1;0<=this._loop;)this._screensOpen[this._loop].update(a),this._screensOpen[this._loop].renderPosition(this._camera),this._screensOpen[this._loop].flagDispose&&(this._disposeScreen(this._screensOpen[this._loop].id),0==this._screensOpen.length&&this._onQueueConditionMet(c.ConstantsScreen.CONDITION_CLOSED_ALL)),this._loop--}},_getHasTransition:function(){return this._flagHasTransition},
changeScreenTo:function(a,b,d,n){null==n&&(n="");null==d&&(d=-1);null==b&&(b=!1);f.WorkinCloud.instance.log("[ScreenManager](changeTo) "+a);this.removeAllQueuedScreens();if(this.isScreenOpen(a)){f.WorkinCloud.instance.log("[ScreenManager](changeTo) Screen is already open.");for(b=this._screensOpen.length-1;0<=b;)this._screensOpen[b].id!=a&&this.closeScreen(this._screensOpen[b].id,!1,b),b--;this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a);this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_COMPLETE,
a)}else if(this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=!1,0<this._screensOpen.length){f.WorkinCloud.instance.log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);var e=c.ConstantsScreen.CONDITION_CLOSED_ALL;if(-1<d)switch(this._transitionType=d,this._transitionType){case c.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=!0;b=!1;this._addScreenshot();this._transitionPlay();break;case c.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=
!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];e=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];e=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._flagHasTransition=
!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];e=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];e=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_FADE:this._addTransition(n,this._flagHasTransition?
this._transition._getIsOutro()?!0:!1:!1),this._flagCloseScreenAfterTransition=!0,b=!1,this._transitionPlay(),e=c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY}if(0<this._screensOpen.length&&(this._flagCloseScreenAfterTransition?this._screenIdToCloseAfterTransition=this._screensOpen[0].id:this.closeScreen(this._screensOpen[0].id,b,0),1<this._screensOpen.length))for(b=1;b<this._screensOpen.length;)this.closeScreen(this._screensOpen[b].id,!1,this._screensOpen.length),b++;this._flagOpenScreenAfterTransition?
(f.WorkinCloud.instance.log("[ScreenManager] Store Screen to open at transition midway: "+a),this._screenIdToOpenDuringTransition=a):this.openScreen(a,!0,e)}else this.openScreen(a,!1)},_moveScreenToTop:function(a){var b=this.getScreen(a);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_moveScreenToTop) ERROR: Screen >"+a+"< is not open or does not exist. Cancelling move.");else{b.isClosing()&&b.open(!1);for(var d=this._screensOpen.length-1;0<=d&&!(this._screensOpen[d].id==a);)d--;this._screensOpen.splice(d,
1);b.reset();this._removeScreenDisplay(b._getEntity());this._addScreenDisplay(b._getEntity());this._screensOpen.push(b)}},openScreen:function(a,b,d,n){null==n&&(n="");null==d&&(d=0);null==b&&(b=!0);f.WorkinCloud.instance.log("[ScreenManager](openScreen) "+a);if(this._hasScreenData(a))if(this.isScreenOpen(a))this._moveScreenToTop(a);else{if(d!=c.ConstantsScreen.CONDITION_IMMEDIATE&&b){if(0<this._screensOpen.length){this._addScreenToQueue(this._getScreenData(a),d,n);return}if((d==c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||
d==c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)&&this._flagHasTransition){this._addScreenToQueue(this._getScreenData(a),d,n);return}}this._generateScreen(this._getScreenData(a))}else f.WorkinCloud.instance.log("[ScreenManager](closeScreen) ERROR: Screen >"+a+"< does not exist. Cancelling open().")},closeScreen:function(a,b,d){null==d&&(d=-1);null==b&&(b=!0);null==a&&(a="");if(0==this._screensOpen.length)this.removeQueuedScreen(a);else{if(""==a)d=this._screensOpen[this._screensOpen.length-1];else if(0<=
d&&d<this._screensOpen.length)d=this._screensOpen[d];else if(d=this.getScreen(a),null==d){this.removeQueuedScreen(a);return}d.close(b);this._dispatchEventChange(c.ConstantsScreen.CHANGE_CLOSE_BEGIN,a)}},handleInput:function(a){for(var b=!0,d=this._screensOpen.length-1;0<=d;)this._screensOpen[d].handleInput(a)||(b=!1),d--;return b},addScreen:function(a,b,d,n,c){null==n&&(n=0);null==d&&(d="");this._screens.push(new h.screens.data.ScreenData(a,b,d,n,c))},__class__:h.ScreenManager,__properties__:{get_isTransition:"_getHasTransition"}});
o={};o.Element=function(a){this._entity=new O;this._display=new j.Sprite;this._entity.add(this._display);this._textureEntity=new O;this._entity.addChild(this._textureEntity);this._texture=new j.Sprite;this._textureEntity.add(this._texture);this._dispatcher=new l.WMEventDispatcher;this._pos=new i.WorkinPoint;this._velocity=new i.WorkinPoint;this._renderOffset=new i.WorkinPoint;this._renderOrigin=new i.WorkinPoint;this._render=new o.Renderable;this._layer=this._assetId="";this._doDelete=!1;a.asset&&
(this._assetId=a.asset,this.setTexture(this._assetId));a.layer&&(this._layer=a.layer);a.x&&(this._pos.x=a.x);a.y&&(this._pos.y=a.y);a.rot&&(this._render.rotation=a.rot);a.origin&&this.setOrigin(a.origin);this._addEventListeners()};k["com.workinman.display.Element"]=o.Element;o.Element.__name__=["com","workinman","display","Element"];o.Element.prototype={_removeEventListeners:function(){},_addEventListeners:function(){},setOrigin:function(a){this._renderOrigin.toPoint(a);this._texture.x.set__(-(this._renderOrigin.x*
this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},applyRenderable:function(){this._display.x.set__(this._render.x);this._display.y.set__(this._render.y);this._display.scaleX.set__(this._render.scaleX);this._display.scaleY.set__(this._render.scaleY);this._display.rotation.set__(this._render.rotation);this._display.alpha.set__(this._render.alpha);this._display.set_visible(this._render.visible)},renderPosition:function(a){this._render.x=this._pos.x-a._getPos().x+
a._getScreenCenterX()+this._renderOffset.x;this._render.y=this._pos.y-a._getPos().y+a._getScreenCenterY()+this._renderOffset.y;this.applyRenderable()},updatePositionFromVelocity:function(a){this._pos.x+=this._velocity.x*a;this._pos.y+=this._velocity.y*a},update:function(){},setTexture:function(a){!1==f.WorkinCloud.instance.getAssets().hasAsset(a)?f.WorkinCloud.instance.log("[Element](setTexture) No asset named "+a+" exists!"):(this._textureEntity.remove(this._texture),this._texture.dispose(),this._texture=
new j.ImageSprite(f.WorkinCloud.instance.getAssets().getTexture(a)),this._render.width=this._texture.getNaturalWidth(),this._render.height=this._texture.getNaturalHeight(),this._texture.x.set__(-(this._renderOrigin.x*this._render.width)),this._texture.y.set__(-(this._renderOrigin.y*this._render.height)),this._textureEntity.add(this._texture))},_setLayer:function(a){return this._layer=a},_getLayer:function(){return this._layer},_getDispatcher:function(){return this._dispatcher},_getEntity:function(){return this._entity},
_getRenderable:function(){return this._render},_setDoDelete:function(a){return this._doDelete=a},_getDoDelete:function(){return this._doDelete},_setPos:function(a){this._pos.toPoint(a);return this._pos},_getPos:function(){return this._pos},dispose:function(){this._removeEventListeners();this._dispatcher.dispose();this._dispatcher=null;this._entity.dispose();this._velocity=this._pos=this._entity=null;this._texture.dispose();this._display=this._texture=null;this._textureEntity.dispose();this._renderOrigin=
this._renderOffset=this._render=this._textureEntity=null},__class__:o.Element,__properties__:{set_pos:"_setPos",get_pos:"_getPos",set_doDelete:"_setDoDelete",get_doDelete:"_getDoDelete",get_renderable:"_getRenderable",get_entity:"_getEntity",get_dispatcher:"_getDispatcher",set_layer:"_setLayer",get_layer:"_getLayer"}};h.buttons={};h.buttons.ButtonBase=function(a,b,d,n,c,e,f,g){null==g&&(g=!0);null==f&&(f="");null==e&&(e="");null==c&&(c="");null==n&&(n="");this._DEBUG_SHOW_HITBOX=!1;null==d&&(d=new i.WorkinPoint);
o.Element.call(this,{x:a,y:b,asset:this._assetUp,origin:d});this._assetUp=""==n?this._getDefaultAssetUp():n;this._assetOver=""==c?this._getDefaultAssetOver():c;this._assetDown=""==e?this._getDefaultAssetDown():e;this._assetDisabled=""==f?this._getDefaultAssetDisabled():f;this._flagDragged=this._flagClickTransition=this._flagDown=!1;g?this.enable():this.disable();this._buildHitBox()};k["com.nick.fop.dragon_drop.ui.buttons.ButtonBase"]=h.buttons.ButtonBase;h.buttons.ButtonBase.__name__="com,nick,fop,dragon_drop,ui,buttons,ButtonBase".split(",");
h.buttons.ButtonBase.__super__=o.Element;h.buttons.ButtonBase.prototype=v(o.Element.prototype,{_renderDisabled:function(){""!=this._assetDisabled&&this.setTexture(this._assetDisabled)},_renderReturnUp:function(){!this._flagClickTransition&&this._flagEnabled&&(i.tween.WorkinTweener._getInstance().tween(this._render,0.15,{scaleX:1,scaleY:1}).ease(i.tween.PennerManager.EASE_QUAD_OUT),this._renderUp())},_renderDown:function(){!this._flagClickTransition&&this._flagEnabled&&(i.tween.WorkinTweener._getInstance().tween(this._render,
0.15,{scaleX:1.04,scaleY:1.04}).ease(i.tween.PennerManager.EASE_QUAD_OUT),""!=this._assetDown&&this.setTexture(this._assetDown))},_renderUp:function(){""!=this._assetUp&&this.setTexture(this._assetUp)},update:function(a){o.Element.prototype.update.call(this,a);this._flagDown&&!1==f.WorkinCloud.instance.getInput().getInput(c.ConstantsApp.INPUT_CLICK)&&(this._upConnection.dispose(),this._renderReturnUp())},_onCancelDrag:function(){this._flagDragged=!1;this._dispatch(h.buttons.ButtonBase.CANCEL_DRAG)},
_onUp:function(){this._flagDown&&(this._upConnection.dispose(),this._upConnection=null,this._flagDown=!1,this._renderReturnUp(),this._click(),this._flagDragged&&this._onCancelDrag(),this._dispatch(h.buttons.ButtonBase.UP))},_onDown:function(){this._flagDown=!0;this._renderDown();this._upConnection=this._hitBox.get_pointerUp().connect(s(this,this._onUpEvent));this._dispatch(h.buttons.ButtonBase.DOWN)},_click:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||(this._dispatch(h.buttons.ButtonBase.CLICK),
""!=this._getClickFlow()&&f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventFlow(this._getClickFlow())),""!=this._getClickEvent()&&f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(this._getClickEvent())))},_dispatch:function(a){this._GET_DO_DISPATCH()&&this._dispatcher.dispatchEvent(new l.WMEvent(a))},_onUpEvent:function(a){this._onUp(a.viewX,a.viewY)},_onDownEvent:function(a){this._onDown(a.viewX,a.viewY)},_getClickFlow:function(){return""},_getClickEvent:function(){return""},
_GET_DISABLE_FRAME:function(){return 1},_GET_CUSTOM_HIT_BOX:function(){return new I.Point(0,0)},_GET_DO_DISPATCH:function(){return!0},_getDefaultAssetDisabled:function(){return""},_getDefaultAssetDown:function(){return""},_getDefaultAssetOver:function(){return""},_getDefaultAssetUp:function(){return""},dispose:function(){this.disable();this._downConnection.dispose();this._downConnection=null;this._flagDown&&(this._upConnection.dispose(),this._upConnection=null);this._hitBox.dispose();o.Element.prototype.dispose.call(this)},
_buildHitBox:function(){this._hitBox=this._DEBUG_SHOW_HITBOX?new j.FillSprite(16711680,this._render.width|0,this._render.height|0):new j.ImageSprite(D.createTexture(this._render.width|0,this._render.height|0));var a=new O;a.add(this._hitBox);this._textureEntity.addChild(a);this._downConnection=this._hitBox.get_pointerDown().connect(s(this,this._onDownEvent))},disable:function(){this._flagEnabled=!1;this._renderDisabled()},enable:function(){this._flagEnabled=!0;this._renderUp()},__class__:h.buttons.ButtonBase,
__properties__:v(o.Element.prototype.__properties__,{get__DO_DISPATCH:"_GET_DO_DISPATCH",get__clickEvent:"_getClickEvent",get__clickFlow:"_getClickFlow"})});o.Display=function(a,b,d,n){null==d&&(d="");o.Element.call(this,{x:a,y:b,asset:d,origin:n});this._addEventListeners()};k["com.workinman.display.Display"]=o.Display;o.Display.__name__=["com","workinman","display","Display"];o.Display.__super__=o.Element;o.Display.prototype=v(o.Element.prototype,{dispose:function(){o.Element.prototype.dispose.call(this);
this._removeEventListeners()},_updateValue:function(){return""},_refresh:function(){},_onUpdateDisplay:function(a){a._getData().valueID==this._updateValue()&&this._refresh()},_removeEventListeners:function(){o.Element.prototype._removeEventListeners.call(this);f.WorkinCloud.instance.getDispatcher().removeEventListener(o.Display.EVENT_UPDATE_DISPLAY,s(this,this._onUpdateDisplay))},_addEventListeners:function(){o.Element.prototype._addEventListeners.call(this);f.WorkinCloud.instance.getDispatcher().addEventListener(o.Display.EVENT_UPDATE_DISPLAY,
s(this,this._onUpdateDisplay))},__class__:o.Display});h.displays={};h.displays.DisplayHealth=function(a,b,d,n,e){null==n&&(n="");o.Display.call(this,a,b,n,e);this._healthType=d;this._percMaxTime=1.5;this._percCurrTime=0;this._container=new O;this._maskingBar=new j.ShapeSprite;switch(this._healthType){case 0:this._healthBar=new j.ImageSprite(f.WorkinCloud.instance.getAssets().getTexture("ui/gameplay_hud/hud_timmy_health_masking.png"));this._maxHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH);
this._health=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH);this._ratio=72*this._health/this._maxHealth;this._displayI=this._i=0;break;case 1:this._healthBar=new j.ImageSprite(f.WorkinCloud.instance.getAssets().getTexture("ui/gameplay_hud/hud_dragon_health_masking.png"));this._maxHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH);this._health=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH);this._ratio=76*this._health/this._maxHealth;this._displayI=
this._i=0;break;case 2:this._healthBar=new j.ImageSprite(f.WorkinCloud.instance.getAssets().getTexture("ui/gameplay_hud/hud_baby_dragon_health_masking.png")),this._maxHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._health=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._ratio=70*this._health/this._maxHealth,this._displayI=this._i=0}this._insideEntity=(new O).add(this._healthBar);this._entity.addChild(this._insideEntity)};k["com.nick.fop.dragon_drop.ui.displays.DisplayHealth"]=
h.displays.DisplayHealth;h.displays.DisplayHealth.__name__="com,nick,fop,dragon_drop,ui,displays,DisplayHealth".split(",");h.displays.DisplayHealth.__super__=o.Display;h.displays.DisplayHealth.prototype=v(o.Display.prototype,{dispose:function(){o.Display.prototype.dispose.call(this);this._percentageText=this._container=this._insideEntity=this._redBar=this._maskingBar=this._healthBar=this._background=null},update:function(a){o.Display.prototype.update.call(this,a)},_refresh:function(){},__class__:h.displays.DisplayHealth});
h.displays.DisplayLevel=function(a,b,d,n){null==d&&(d="");o.Display.call(this,a,b,d,n);this._text=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("final_font"),"Level: "+f.WorkinCloud.instance.getFloat(this._updateValue()));this._render.scaleX=0.65;this._render.scaleY=0.65;this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display)};k["com.nick.fop.dragon_drop.ui.displays.DisplayLevel"]=h.displays.DisplayLevel;h.displays.DisplayLevel.__name__="com,nick,fop,dragon_drop,ui,displays,DisplayLevel".split(",");
h.displays.DisplayLevel.__super__=o.Display;h.displays.DisplayLevel.prototype=v(o.Display.prototype,{dispose:function(){o.Display.prototype.dispose.call(this);this._text=null},_updateValue:function(){return c.ConstantsApp.CURRENT_LEVEL},_refresh:function(){},update:function(){this._text.set_text("Level: "+f.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayLevel});h.displays.DisplayScore=function(a,b,d,n){null==d&&(d="");o.Display.call(this,a,b,d,n);this._text=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("final_font"),
"Score: "+f.WorkinCloud.instance.getFloat(this._updateValue()));this._render.scaleX=0.65;this._render.scaleY=0.65;this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display)};k["com.nick.fop.dragon_drop.ui.displays.DisplayScore"]=h.displays.DisplayScore;h.displays.DisplayScore.__name__="com,nick,fop,dragon_drop,ui,displays,DisplayScore".split(",");h.displays.DisplayScore.__super__=o.Display;h.displays.DisplayScore.prototype=v(o.Display.prototype,{dispose:function(){this._text=
null;o.Display.prototype.dispose.call(this)},_updateValue:function(){return c.ConstantsApp.FLOAT_SCORE},_refresh:function(){},update:function(){this._text.set_text("Score: "+f.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayScore});h.displays.DisplayText=function(a,b,d,n,c,e){null==c&&(c="");null==n&&(n=0.65);o.Display.call(this,a,b,c,e);this._text=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("final_font"),d);this._render.scaleX=n;this._render.scaleY=
n;this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display)};k["com.nick.fop.dragon_drop.ui.displays.DisplayText"]=h.displays.DisplayText;h.displays.DisplayText.__name__="com,nick,fop,dragon_drop,ui,displays,DisplayText".split(",");h.displays.DisplayText.__super__=o.Display;h.displays.DisplayText.prototype=v(o.Display.prototype,{dispose:function(){this._text=null;o.Display.prototype.dispose.call(this)},setText:function(a){this._text.set_text(""+a)},__class__:h.displays.DisplayText});
h.screens={};h.screens.ScreenBase=function(a,b){this._STATE_OPENED="opened";this._STATE_OUT="out";this._STATE_IN="in";this.id=a;o.Element.call(this,{asset:b});this._clickWall=new O;var d=new j.FillSprite(16711680,c.ConstantsApp.STAGE_WIDTH,c.ConstantsApp.STAGE_HEIGHT);d.alpha.set__(0);this._clickWall.add(d);this._entity.addChild(this._clickWall);this._entity.addChild(this._textureEntity);this._addEventListeners();this._elements=[];this._buildButtons();this._flagStateAnimationComplete=this._flagStateCompleteTemp=
this.flagDispose=!1;this._states=[];this._generateStates();this._stateIndex=this._states.length+2;this._setFirstState()};k["com.nick.fop.dragon_drop.ui.screens.ScreenBase"]=h.screens.ScreenBase;h.screens.ScreenBase.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenBase".split(",");h.screens.ScreenBase.__super__=o.Element;h.screens.ScreenBase.prototype=v(o.Element.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=!1;""!=this._states[this._stateIndex].outFunc&&f.WorkinCloud.instance.log("[ScreenBase](_onStateComplete) Out Func not supported in HTML5 yet");
switch(this._states[this._stateIndex].actionOnComplete){case h.screens.data.ScreenStateData.ACTION_OPENED:this._setOpenedState();this._dispatcher.dispatchEvent(new l.WMEventScreenOut(c.ConstantsScreen.OUTPUT_OPENED,this.id));break;case h.screens.data.ScreenStateData.ACTION_CLOSED:this.setFlagDispose();this._dispatcher.dispatchEvent(new l.WMEventScreenOut(c.ConstantsScreen.OUTPUT_CLOSED,this.id));break;case h.screens.data.ScreenStateData.ACTION_NEW_STATE:this._setState(this._states[this._stateIndex].actionData);
break;case h.screens.data.ScreenStateData.ACTION_EVENT:this._dispatcher.dispatchEvent(new l.WMEvent(this._states[this._stateIndex].actionData));break;case h.screens.data.ScreenStateData.ACTION_FLOW:this._doFlowEvent(this._states[this._stateIndex].actionData)}},_findStateIndex:function(a){for(var b=this._states.length-1;0<=b;){if(this._states[b].id==a)return b;b--}return-1},getState:function(){return this._states[this._stateIndex].id},_setState:function(a,b){null==b&&(b=!1);var d=this._findStateIndex(a);
if(0>d)f.WorkinCloud.instance.log("[ScreenBase](_setState) ERROR : State >"+a+"< not found."),f.WorkinCloud.instance.log("[ScreenBase](_setState) cancelling setState().");else if(b||d!=this._stateIndex)this._flagStateAnimationComplete=this._flagStateCompleteTemp=!1,this._stateIndex=d},_addState:function(a,b,d,n,c,e){null==e&&(e="");null==c&&(c="");null==n&&(n="");null==d&&(d=0);this._states.push(new h.screens.data.ScreenStateData(a,b,d,n,c,e))},isClosing:function(){return this.getState()==this._STATE_OUT},
close:function(){this.setFlagDispose();this._dispatcher.dispatchEvent(new l.WMEventScreenOut(c.ConstantsScreen.OUTPUT_CLOSED,this.id))},open:function(){this._setOpenedState();this._dispatcher.dispatchEvent(new l.WMEventScreenOut(c.ConstantsScreen.OUTPUT_OPENED,this.id))},dispose:function(){for(var a=0,b=this._elements;a<b.length;){var d=b[a];++a;d.dispose()}this._elements=null;this._removeEventListeners();this._states=null;o.Element.prototype.dispose.call(this)},reset:function(){this._setFirstState()},
handleInput:function(a){var b=!0;switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case 1:this._onInputDown(a.x,a.y)||(b=!1);break;case 2:this._onInputMove(a.x,a.y)||(b=!1);break;case 0:this._onInputUp(a.x,a.y)||(b=!1)}break;default:this._onInput(a)||(b=!1)}return b},renderPosition:function(a){o.Element.prototype.renderPosition.call(this,a);for(var b=0,d=this._elements;b<d.length;){var n=d[b];++b;n.renderPosition(a)}},update:function(a){o.Element.prototype.update.call(this,a);for(var b=
0,d=this._elements;b<d.length;){var n=d[b];++b;n.update(a)}this._flagStateCompleteTemp&&this._onStateComplete()},_doFlowEvent:function(a){f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventFlow(a))},_addElement:function(a){this._elements.push(a);this._entity.addChild(a._getEntity());return a},_buildButtons:function(){},_onInput:function(){return!0},_onInputMove:function(){return!0},_onInputUp:function(){return!0},_onInputDown:function(){return!0},_generateStates:function(){this._addState(this._STATE_IN,
"in",h.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",h.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open")},_setOpenedState:function(){this._setState(this._STATE_OPENED)},_setFirstState:function(){this._setState(this._STATE_IN)},setFlagDispose:function(){this.flagDispose=!0},__class__:h.screens.ScreenBase});h.screens.ScreenAttackMenu=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._pos.y=-100;this._flagFireEnabled=
f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_FIRE_ENABLED);this._flagHealEnabled=f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_HEAL_ENABLED);this._flagMezEnabled=f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_MEZ_ENABLED);this._flagWingsEnabled=f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_WINGS_ENABLED);this._addElement(new o.Element({asset:"ui/attack_menu/timmy_attack_menu_icon",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2+100,origin:new i.WorkinPoint(0.5,0.5)}));
this._flagFireEnabled?this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+115,345,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/active/button_attack_fire_active","ui/attack_menu/active/button_attack_fire_active_over","ui/attack_menu/active/button_attack_fire_active_over"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventFireClick)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_FIRE_ON_COOLDOWN)?(this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/
2+115,345,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/cooldown/button_attack_fire_cooldown","ui/attack_menu/cooldown/button_attack_fire_cooldown","ui/attack_menu/cooldown/button_attack_fire_cooldown","ui/attack_menu/cooldown/button_attack_fire_cooldown",!1)),this._cooldownFire=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_FIRE_COOLDOWN),x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2+90,320,""+this._cooldownFire,0.9)),h.displays.DisplayText)):this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/
2+115,345,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/inactive/button_attack_fire_inactive","ui/attack_menu/inactive/button_attack_fire_inactive","ui/attack_menu/inactive/button_attack_fire_inactive","ui/attack_menu/inactive/button_attack_fire_inactive",!1));this._flagHealEnabled?this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+110,455,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/active/button_attack_heal_active","ui/attack_menu/active/button_attack_heal_active_over","ui/attack_menu/active/button_attack_heal_active_over"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,
s(this,this._onEventHealClick)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_HEAL_ON_COOLDOWN)?(this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+110,455,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/cooldown/button_attack_heal_cooldown","ui/attack_menu/cooldown/button_attack_heal_cooldown","ui/attack_menu/cooldown/button_attack_heal_cooldown","ui/attack_menu/cooldown/button_attack_heal_cooldown",!1)),this._cooldownHeal=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEAL_COOLDOWN),
x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2+88,425,""+this._cooldownHeal,0.9)),h.displays.DisplayText)):this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+110,455,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/inactive/button_attack_heal_inactive","ui/attack_menu/inactive/button_attack_heal_inactive","ui/attack_menu/inactive/button_attack_heal_inactive","ui/attack_menu/inactive/button_attack_heal_inactive",!1));this._flagMezEnabled?this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/
2-100,450,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/active/button_attack_mez_active","ui/attack_menu/active/button_attack_mez_active_over","ui/attack_menu/active/button_attack_mez_active_over"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventMezClick)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_MEZ_ON_COOLDOWN)?(this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2-100,450,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/cooldown/button_attack_mez_cooldown",
"ui/attack_menu/cooldown/button_attack_mez_cooldown","ui/attack_menu/cooldown/button_attack_mez_cooldown","ui/attack_menu/cooldown/button_attack_mez_cooldown",!1)),this._cooldownMez=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_MEZ_COOLDOWN),x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2-130,421,""+this._cooldownMez,0.9)),h.displays.DisplayText)):this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2-100,450,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/inactive/button_attack_mez_inactive",
"ui/attack_menu/inactive/button_attack_mez_inactive","ui/attack_menu/inactive/button_attack_mez_inactive","ui/attack_menu/inactive/button_attack_mez_inactive",!1));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2,515,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/active/button_attack_shield_active","ui/attack_menu/active/button_attack_shield_active_over","ui/attack_menu/active/button_attack_shield_active_over"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,
this._onEventShieldClick));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2-100,350,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/active/button_attack_weapon_active","ui/attack_menu/active/button_attack_weapon_active_over","ui/attack_menu/active/button_attack_weapon_active_over"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventWeaponClick));this._flagWingsEnabled?this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2,275,new i.WorkinPoint(0.5,
0.5),"ui/attack_menu/active/button_attack_wings_active","ui/attack_menu/active/button_attack_wings_active_over","ui/attack_menu/active/button_attack_wings_active_over"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventWingsClick)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_WINGS_ON_COOLDOWN)?(this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2,275,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/cooldown/button_attack_wings_cooldown","ui/attack_menu/cooldown/button_attack_wings_cooldown",
"ui/attack_menu/cooldown/button_attack_wings_cooldown","ui/attack_menu/cooldown/button_attack_wings_cooldown",!1)),this._cooldownWings=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_WINGS_COOLDOWN),x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2-20,238,""+this._cooldownWings,0.9)),h.displays.DisplayText)):this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2,275,new i.WorkinPoint(0.5,0.5),"ui/attack_menu/inactive/button_attack_wings_inactive","ui/attack_menu/inactive/button_attack_wings_inactive",
"ui/attack_menu/inactive/button_attack_wings_inactive","ui/attack_menu/inactive/button_attack_wings_inactive",!1))};k["com.nick.fop.dragon_drop.ui.screens.ScreenAttackMenu"]=h.screens.ScreenAttackMenu;h.screens.ScreenAttackMenu.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenAttackMenu".split(",");h.screens.ScreenAttackMenu.__super__=h.screens.ScreenBase;h.screens.ScreenAttackMenu.prototype=v(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this)},
_onEventWeaponClick:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,6);this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE)},_onEventShieldClick:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,5);this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE)},_onEventWingsClick:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,4);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_WINGS_COOLDOWN,2);this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE)},
_onEventMezClick:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,3);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_MEZ_COOLDOWN,5);this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE)},_onEventHealClick:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,2);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEAL_COOLDOWN,4);this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE)},_onEventFireClick:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,
1);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_FIRE_COOLDOWN,4);this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE)},__class__:h.screens.ScreenAttackMenu});h.screens.ScreenGameOver=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._addElement(new o.Element({asset:"ui/game_over/game_over_screen_container",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,origin:new i.WorkinPoint(0.5,0.5)}));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-
160,180,"Game Over",1)),h.displays.DisplayText);this._previousLevel=f.WorkinCloud.instance.getInt(c.ConstantsApp.CURRENT_LEVEL);this._text="You made it to level: "+this._previousLevel;this._score=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_SCORE);this._scoreText="Score: "+this._score;x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-175,280,this._text,0.5)),h.displays.DisplayText);x.__cast(this._addElement(new h.displays.DisplayText(400,330,this._scoreText,
0.5)),h.displays.DisplayText);x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-120,390,"(Tap Anywhere to Play Again!)",0.3)),h.displays.DisplayText)};k["com.nick.fop.dragon_drop.ui.screens.ScreenGameOver"]=h.screens.ScreenGameOver;h.screens.ScreenGameOver.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenGameOver".split(",");h.screens.ScreenGameOver.__super__=h.screens.ScreenBase;h.screens.ScreenGameOver.prototype=v(h.screens.ScreenBase.prototype,{update:function(a){h.screens.ScreenBase.prototype.update.call(this,
a)},_onInputDown:function(){f.WorkinCloud.instance.log("[Splash] State: "+this.getState());if(this.getState()!=this._STATE_OPENED)return!1;this._doFlowEvent(c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN);return!1},__class__:h.screens.ScreenGameOver});h.screens.ScreenGameplayHelp=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._addElement(new o.Element({asset:"help_screen_container",x:c.ConstantsApp.STAGE_WIDTH/2+5,y:c.ConstantsApp.STAGE_HEIGHT/2,origin:new i.WorkinPoint(0.5,
0.5)}));this._addElement(new h.buttons.ButtonBase(60,507,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/play_button","ui/gameplay_hud/play_button","ui/gameplay_hud/play_button"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventQuitYesClick));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-215,185,"How to Play",1)),h.displays.DisplayText);x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-245,285,"Use your finger to select an action",
0.5)),h.displays.DisplayText);x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-245,320,"Level up to unlock new abilities!",0.5)),h.displays.DisplayText)};k["com.nick.fop.dragon_drop.ui.screens.ScreenGameplayHelp"]=h.screens.ScreenGameplayHelp;h.screens.ScreenGameplayHelp.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenGameplayHelp".split(",");h.screens.ScreenGameplayHelp.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayHelp.prototype=v(h.screens.ScreenBase.prototype,
{_removeEventListeners:function(){h.screens.ScreenBase.prototype._removeEventListeners.call(this)},_addEventListeners:function(){h.screens.ScreenBase.prototype._addEventListeners.call(this)},_onEventQuitYesClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP_CLOSE)},__class__:h.screens.ScreenGameplayHelp});h.screens.ScreenGameplayHUD=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._addElement(new o.Element({asset:"ui/gameplay_hud/hud_container",
x:c.ConstantsApp.STAGE_WIDTH/2,y:70,origin:new i.WorkinPoint(0.5,0.5)}));this._addElement(new h.buttons.ButtonBase(50,515,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/pause_button","ui/gameplay_hud/pause_button","ui/gameplay_hud/pause_button"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventPauseClick));this._percMaxTime=1.5;this._percCurrTime=0;this._playerHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH);this._maxPlayerHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_MAX_HEALTH);
this._playerRatio=Math.floor(100*(this._playerHealth/this._maxPlayerHealth));f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH,this._playerRatio);this._displayPlayerHealth=x.__cast(this._addElement(new h.displays.DisplayHealth(c.ConstantsApp.STAGE_WIDTH/2-130,40,0)),h.displays.DisplayHealth);this._percentageTextPlayer=x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2-113,65,""+this._playerRatio,0.285)),h.displays.DisplayText);this._displayI=
100;this._dragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH);this._maxDragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH);this._dragonRatio=Math.floor(100*(this._dragonHealth/this._maxDragonHealth));f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH,this._dragonRatio);this._displayDragonHealth=x.__cast(this._addElement(new h.displays.DisplayHealth(c.ConstantsApp.STAGE_WIDTH/2+75,40,1)),h.displays.DisplayHealth);
this._percentageTextDragon=x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2+99,70,"100",0.3)),h.displays.DisplayText);this._displayDragonI=100;this._score=x.__cast(this._addElement(new h.displays.DisplayScore(10,50)),h.displays.DisplayScore);this._level=x.__cast(this._addElement(new h.displays.DisplayLevel(c.ConstantsApp.STAGE_WIDTH-170,50)),h.displays.DisplayLevel);x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2-30,46,"VS",0.8)),
h.displays.DisplayText);0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)?(this._babyDragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._maxBabyDragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._babyDragonRatio=Math.floor(100*(this._babyDragonHealth/this._maxBabyDragonHealth)),f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_BABY_DRAGON_RATIO_HEALTH,this._babyDragonRatio),this._displayBabyDragonI=
100,this._displayBabyDragonHealth=x.__cast(this._addElement(new h.displays.DisplayHealth(c.ConstantsApp.STAGE_WIDTH/2+175,40,2)),h.displays.DisplayHealth),this._percentageTextBabyDragon=x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2+185,70,"100",0.285)),h.displays.DisplayText),this._flagBabyDragonSpawned=!0):this._flagBabyDragonSpawned=!1};k["com.nick.fop.dragon_drop.ui.screens.ScreenGameplayHUD"]=h.screens.ScreenGameplayHUD;h.screens.ScreenGameplayHUD.__name__=
"com,nick,fop,dragon_drop,ui,screens,ScreenGameplayHUD".split(",");h.screens.ScreenGameplayHUD.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayHUD.prototype=v(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this);this._level=this._score=this._percentageTextBabyDragon=this._percentageTextDragon=this._displayBabyDragonHealth=this._percentageTextPlayer=this._displayDragonHealth=this._displayPlayerHealth=null},_onEventPauseClick:function(){this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU)},
update:function(a){h.screens.ScreenBase.prototype.update.call(this,a);this._playerHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH);this._playerHealth!=this._maxPlayerHealth&&this._playerHealth<=this._maxPlayerHealth&&(this._percCurrTime+=a,this._percCurrTime>=this._percMaxTime&&(this._percCurrTime=this._percMaxTime),this._playerRatio=Math.floor(100*(this._playerHealth/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_MAX_HEALTH))),f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH,
this._playerRatio),this._displayI>this._playerRatio&&(this._displayI--,0>this._displayI&&(this._displayI=this._playerRatio=0)),this._percentageTextPlayer.setText(""+this._displayI),this._displayI<=this._playerRatio&&(this._displayI=this._playerRatio,this._maxPlayerHealth=this._playerHealth,this._percCurrTime=0));this._playerHealth!=this._maxPlayerHealth&&this._playerHealth>this._maxPlayerHealth&&(this._percCurrTime+=a,this._percCurrTime>=this._percMaxTime&&(this._percCurrTime=this._percMaxTime),this._playerRatio=
Math.floor(100*(this._playerHealth/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_MAX_HEALTH))),f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH,this._playerRatio),this._displayI<this._playerRatio&&(this._displayI++,this._displayI>=this._playerRatio&&(this._displayI=this._playerRatio)),100<this._displayI&&(this._displayI=this._playerRatio=100),this._percentageTextPlayer.setText(""+this._displayI),this._displayI>=this._playerRatio&&(this._maxPlayerHealth=this._playerHealth,
this._percCurrTime=0));this._dragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH);this._dragonHealth!=this._maxDragonHealth&&(this._percCurrTime+=a,this._percCurrTime>=this._percMaxTime&&(this._percCurrTime=this._percMaxTime),this._dragonRatio=Math.floor(100*(this._dragonHealth/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_MAX_HEALTH))),f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH,this._dragonRatio),this._displayDragonI>
this._dragonRatio&&(this._displayDragonI--,0>this._displayDragonI&&(this._displayDragonI=this._dragonRatio=0)),this._percentageTextDragon.setText(""+this._displayDragonI),this._displayDragonI<=this._dragonRatio&&(this._maxDragonHealth=this._dragonHealth,this._percCurrTime=0));0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)&&!1==this._flagBabyDragonSpawned&&(this._babyDragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._maxBabyDragonHealth=
f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._babyDragonRatio=Math.floor(100*(this._babyDragonHealth/this._maxBabyDragonHealth)),f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_BABY_DRAGON_RATIO_HEALTH,this._babyDragonRatio),this._displayBabyDragonI=100,this._displayBabyDragonHealth=x.__cast(this._addElement(new h.displays.DisplayHealth(c.ConstantsApp.STAGE_WIDTH/2+175,40,2)),h.displays.DisplayHealth),this._percentageTextBabyDragon=x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/
2+185,70,"100",0.285)),h.displays.DisplayText),this._flagBabyDragonSpawned=!0);0>=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)&&!0==this._flagBabyDragonSpawned&&(this._entity.removeChild(this._percentageTextBabyDragon._getEntity()),this._entity.removeChild(this._displayBabyDragonHealth._getEntity()),this._flagBabyDragonSpawned=!1);this._flagBabyDragonSpawned&&(this._babyDragonHealth=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH),this._babyDragonHealth!=
this._maxBabyDragonHealth&&(this._percCurrTime+=a,this._percCurrTime>=this._percMaxTime&&(this._percCurrTime=this._percMaxTime),this._babyDragonRatio=Math.floor(100*(this._babyDragonHealth/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_MAX_HEALTH))),f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_PREVIOUS_BABY_DRAGON_RATIO_HEALTH,this._babyDragonRatio),this._displayBabyDragonI>this._babyDragonRatio&&(this._displayBabyDragonI--,0>this._displayBabyDragonI&&(this._displayBabyDragonI=
this._babyDragonRatio=0)),this._percentageTextBabyDragon.setText(""+this._displayBabyDragonI),this._displayBabyDragonI<=this._babyDragonRatio&&(this._maxBabyDragonHealth=this._babyDragonHealth,this._percCurrTime=0)))},__class__:h.screens.ScreenGameplayHUD});h.screens.ScreenGameplayMenu=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._soundIsMuted=f.WorkinCloud.instance._getSound().getMute();this._addElement(new o.Element({asset:"ui/gameplay_hud/pause_menu",x:c.ConstantsApp.STAGE_WIDTH/
2,y:c.ConstantsApp.STAGE_HEIGHT/2,origin:new i.WorkinPoint(0.5,0.5)}));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2-180,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/play_button","ui/gameplay_hud/play_button","ui/gameplay_hud/play_button"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventResumeClick));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2-50,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/help_button","ui/gameplay_hud/help_button",
"ui/gameplay_hud/help_button"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventHelpClick));this._soundIsMuted?(this._buttonSoundOff=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+70,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sound_off_button","ui/gameplay_hud/sound_off_button","ui/gameplay_hud/sound_off_button"),this._addElement(this._buttonSoundOff)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick))):(this._buttonSoundOn=
new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+70,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sound_on_button","ui/gameplay_hud/sound_on_button","ui/gameplay_hud/sound_on_button"),this._addElement(this._buttonSoundOn)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+200,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/quit_button","ui/gameplay_hud/quit_button","ui/gameplay_hud/quit_button"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,
s(this,this._onEventQuitClick));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-90,180,"Paused",1)),h.displays.DisplayText)};k["com.nick.fop.dragon_drop.ui.screens.ScreenGameplayMenu"]=h.screens.ScreenGameplayMenu;h.screens.ScreenGameplayMenu.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenGameplayMenu".split(",");h.screens.ScreenGameplayMenu.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayMenu.prototype=v(h.screens.ScreenBase.prototype,{dispose:function(){this._buttonQuit=
this._buttonResume=this._buttonSoundOff=this._buttonSoundOn=this._buttonHelp=null;h.screens.ScreenBase.prototype.dispose.call(this)},_removeEventListeners:function(){h.screens.ScreenBase.prototype._removeEventListeners.call(this)},_addEventListeners:function(){h.screens.ScreenBase.prototype._addEventListeners.call(this)},_onEventQuitClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT)},_onEventResumeClick:function(){this.getState()==this._STATE_OPENED&&
this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE)},_onEventSoundToggleClick:function(){!1==this._soundIsMuted?(this._soundIsMuted=!0,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOff=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+70,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sound_off_button","ui/gameplay_hud/sound_off_button","ui/gameplay_hud/sound_off_button"),this._addElement(this._buttonSoundOff)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,
s(this,this._onEventSoundToggleClick)),this._buttonSoundOn._getDispatcher().removeEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)),this._entity.removeChild(this._buttonSoundOn._getEntity())):(this._soundIsMuted=!1,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOn=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+70,320,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sound_on_button","ui/gameplay_hud/sound_on_button","ui/gameplay_hud/sound_on_button"),
this._addElement(this._buttonSoundOn)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)),this._buttonSoundOff._getDispatcher().removeEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)),this._entity.removeChild(this._buttonSoundOff._getEntity()))},_onEventHelpClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP)},__class__:h.screens.ScreenGameplayMenu});h.screens.ScreenGeneric=
function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._flagHasSpaceAction=!1};k["com.nick.fop.dragon_drop.ui.screens.ScreenGeneric"]=h.screens.ScreenGeneric;h.screens.ScreenGeneric.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenGeneric".split(",");h.screens.ScreenGeneric.__super__=h.screens.ScreenBase;h.screens.ScreenGeneric.prototype=v(h.screens.ScreenBase.prototype,{_onInputMove:function(){return!1},_onInputUp:function(){return!1},_onInputDown:function(){return!1},__class__:h.screens.ScreenGeneric});
h.screens.ScreenLevelWin=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._addElement(new o.Element({asset:"ui/win_level/level_win_screen",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,origin:new i.WorkinPoint(0.5,0.5)}));this._addElement(new h.buttons.ButtonBase(60,507,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/play_button","ui/gameplay_hud/play_button","ui/gameplay_hud/play_button"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,
this._onEventPauseClick));this._previousLevel=f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)|0;x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-120,330,"You have gained the",0.4)),h.displays.DisplayText);x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-60,355,"ability:",0.4)),h.displays.DisplayText);switch(this._previousLevel){case 1:this._text="heal";this._addElement(new o.Element({asset:"ui/win_level/win_heal",x:c.ConstantsApp.STAGE_WIDTH/
2,y:c.ConstantsApp.STAGE_HEIGHT/2-30,origin:new i.WorkinPoint(0.5,0.5)}));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-40,380,this._text,0.5)),h.displays.DisplayText);break;case 2:this._text="fire breath";this._addElement(new o.Element({asset:"ui/win_level/win_fire",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2-45,origin:new i.WorkinPoint(0.5,0.5)}));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-85,380,this._text,
0.5)),h.displays.DisplayText);break;case 3:this._text="wing attack";this._addElement(new o.Element({asset:"ui/win_level/win_wings",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2-20,origin:new i.WorkinPoint(0.5,0.5)}));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-90,380,this._text,0.5)),h.displays.DisplayText);break;case 4:this._text="hypnotize";this._addElement(new o.Element({asset:"ui/win_level/win_daze",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/
2-35,origin:new i.WorkinPoint(0.5,0.5)}));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-85,380,this._text,0.5)),h.displays.DisplayText);break;default:this._text="all abilities!",this._addElement(new o.Element({asset:"ui/win_level/win_daze",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2-45,origin:new i.WorkinPoint(0.5,0.5)})),x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-85,380,this._text,0.5)),h.displays.DisplayText)}};
k["com.nick.fop.dragon_drop.ui.screens.ScreenLevelWin"]=h.screens.ScreenLevelWin;h.screens.ScreenLevelWin.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenLevelWin".split(",");h.screens.ScreenLevelWin.__super__=h.screens.ScreenBase;h.screens.ScreenLevelWin.prototype=v(h.screens.ScreenBase.prototype,{_onEventPauseClick:function(){this._doFlowEvent(c.ConstantsScreen.FLOW_END_LEVEL_NEXT)},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a)},__class__:h.screens.ScreenLevelWin});h.screens.ScreenLoading=
function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._timerSpin=0.25;this._loadSpinner=this._addElement(new o.Element({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y+175,origin:new i.WorkinPoint(0.5,0.5),asset:"loading_spinner"}))};k["com.nick.fop.dragon_drop.ui.screens.ScreenLoading"]=h.screens.ScreenLoading;h.screens.ScreenLoading.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenLoading".split(",");h.screens.ScreenLoading.__super__=h.screens.ScreenBase;
h.screens.ScreenLoading.prototype=v(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this);this._loadSpinner=null},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a);this._timerSpin-=a;0>=this._timerSpin&&(this._timerSpin=0.1,this._loadSpinner._getRenderable().rotation+=45)},__class__:h.screens.ScreenLoading});h.screens.ScreenQuitConfirm=function(a,b,d){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d);this._addElement(new o.Element({asset:"ui/gameplay_hud/quit_confirm_container",
x:c.ConstantsApp.STAGE_WIDTH/2-50,y:c.ConstantsApp.STAGE_HEIGHT/2+75,origin:new i.WorkinPoint(0.5,0.5)}));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2-10,350,new i.WorkinPoint(0.5,0.5),"ui/gameplay_hud/quit_confirm_yes","ui/gameplay_hud/quit_confirm_yes","ui/gameplay_hud/quit_confirm_yes"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventQuitYesClick));this._addElement(new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH/2+135,350,new i.WorkinPoint(0.5,
0.5),"ui/gameplay_hud/quit_confirm_no","ui/gameplay_hud/quit_confirm_no","ui/gameplay_hud/quit_confirm_no"))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventQuitNoClick));x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-218,137,"Are You Sure You",1)),h.displays.DisplayText);x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_CENTER_X-165,210,"Want To Quit?",1)),h.displays.DisplayText)};k["com.nick.fop.dragon_drop.ui.screens.ScreenQuitConfirm"]=
h.screens.ScreenQuitConfirm;h.screens.ScreenQuitConfirm.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenQuitConfirm".split(",");h.screens.ScreenQuitConfirm.__super__=h.screens.ScreenBase;h.screens.ScreenQuitConfirm.prototype=v(h.screens.ScreenBase.prototype,{_removeEventListeners:function(){h.screens.ScreenBase.prototype._removeEventListeners.call(this)},_addEventListeners:function(){h.screens.ScreenBase.prototype._addEventListeners.call(this)},_onEventQuitNoClick:function(){this.getState()==
this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO)},_onEventQuitYesClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES)},__class__:h.screens.ScreenQuitConfirm});h.screens.ScreenScreenshot=function(){};k["com.nick.fop.dragon_drop.ui.screens.ScreenScreenshot"]=h.screens.ScreenScreenshot;h.screens.ScreenScreenshot.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenScreenshot".split(",");h.screens.ScreenScreenshot.__super__=
h.screens.ScreenBase;h.screens.ScreenScreenshot.prototype=v(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenScreenshot});h.screens.ScreenSplash=function(a,b,d){null==b&&(b="");this._BLINK_TIME=0.9;h.screens.ScreenBase.call(this,a,b,d);this._soundIsMuted=f.WorkinCloud.instance._getSound().getMute();this._text=x.__cast(this._addElement(new h.displays.DisplayText(c.ConstantsApp.STAGE_WIDTH/2-310,400,"TAP ANYWHERE TO PLAY",
1)),h.displays.DisplayText);this._blinkTimer=this._BLINK_TIME;this._soundIsMuted?(this._buttonSoundOff=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH-75,500,new i.WorkinPoint(0.5,0.5),"ui/splash/splash_sound_off_toggle","ui/splash/splash_sound_off_toggle","ui/splash/splash_sound_off_toggle"),this._addElement(this._buttonSoundOff)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick))):(this._buttonSoundOn=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH-
75,500,new i.WorkinPoint(0.5,0.5),"ui/splash/splash_sound_on_toggle","ui/splash/splash_sound_on_toggle","ui/splash/splash_sound_on_toggle"),this._addElement(this._buttonSoundOn)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)))};k["com.nick.fop.dragon_drop.ui.screens.ScreenSplash"]=h.screens.ScreenSplash;h.screens.ScreenSplash.__name__="com,nick,fop,dragon_drop,ui,screens,ScreenSplash".split(",");h.screens.ScreenSplash.__super__=h.screens.ScreenBase;
h.screens.ScreenSplash.prototype=v(h.screens.ScreenBase.prototype,{dispose:function(){null!=this._buttonSoundOn&&(this._buttonSoundOn=null);null!=this._buttonSoundOff&&(this._buttonSoundOff=null);this._clickToPlayText=this._clickToPlayImage=this._text=null;h.screens.ScreenBase.prototype.dispose.call(this)},_onInputDown:function(a,b){if(!(832<a&&945>a&&440<b&&550>b)){f.WorkinCloud.instance.log("[Splash] State: "+this.getState());if(this.getState()!=this._STATE_OPENED)return!1;this._doFlowEvent(c.ConstantsScreen.FLOW_SPLASH_PLAY)}return!1},
_onEventSoundToggleClick:function(){!1==this._soundIsMuted?(this._soundIsMuted=!0,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOff=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH-75,500,new i.WorkinPoint(0.5,0.5),"ui/splash/splash_sound_off_toggle","ui/splash/splash_sound_off_toggle","ui/splash/splash_sound_off_toggle"),this._addElement(this._buttonSoundOff)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)),this._buttonSoundOn._getDispatcher().removeEventListener(h.buttons.ButtonBase.CLICK,
s(this,this._onEventSoundToggleClick)),this._entity.removeChild(this._buttonSoundOn._getEntity())):(this._soundIsMuted=!1,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOn=new h.buttons.ButtonBase(c.ConstantsApp.STAGE_WIDTH-75,500,new i.WorkinPoint(0.5,0.5),"ui/splash/splash_sound_on_toggle","ui/splash/splash_sound_on_toggle","ui/splash/splash_sound_on_toggle"),this._addElement(this._buttonSoundOn)._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,s(this,
this._onEventSoundToggleClick)),this._buttonSoundOff._getDispatcher().removeEventListener(h.buttons.ButtonBase.CLICK,s(this,this._onEventSoundToggleClick)),this._entity.removeChild(this._buttonSoundOff._getEntity()))},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a)},__class__:h.screens.ScreenSplash});h.screens.data={};h.screens.data.ChangeActionData=function(){};k["com.nick.fop.dragon_drop.ui.screens.data.ChangeActionData"]=h.screens.data.ChangeActionData;h.screens.data.ChangeActionData.__name__=
"com,nick,fop,dragon_drop,ui,screens,data,ChangeActionData".split(",");h.screens.data.ChangeActionData.prototype={_getAction:function(){return this._action},_getChangeEvent:function(){return this._changeEvent},_getScreenId:function(){return this._screenId},__class__:h.screens.data.ChangeActionData,__properties__:{get_screenId:"_getScreenId",get_changeEvent:"_getChangeEvent",get_action:"_getAction"}};h.screens.data.ScreenData=function(a,b,d,n,c){null==n&&(n=0);null==d&&(d="");this.id=a;this.screenClass=
b;this.assetClassName=d;this.layer=n;this.data=null==c?new G:c};k["com.nick.fop.dragon_drop.ui.screens.data.ScreenData"]=h.screens.data.ScreenData;h.screens.data.ScreenData.__name__="com,nick,fop,dragon_drop,ui,screens,data,ScreenData".split(",");h.screens.data.ScreenData.prototype={__class__:h.screens.data.ScreenData};h.screens.data.ScreenQueueData=function(a,b,d){null==d&&(d="");this.screenData=a;this.openCondition=b;this.openTestString=d};k["com.nick.fop.dragon_drop.ui.screens.data.ScreenQueueData"]=
h.screens.data.ScreenQueueData;h.screens.data.ScreenQueueData.__name__="com,nick,fop,dragon_drop,ui,screens,data,ScreenQueueData".split(",");h.screens.data.ScreenQueueData.prototype={validateCondition:function(a,b){null==b&&(b="");return this.openCondition==a?""==this.openTestString||this.openTestString==b:!1},__class__:h.screens.data.ScreenQueueData};h.screens.data.ScreenStateData=function(a,b,d,n,c,e){this.id=a;this.animation=b;this.actionOnComplete=d;this.actionData=n;this.inFunc=c;this.outFunc=
e};k["com.nick.fop.dragon_drop.ui.screens.data.ScreenStateData"]=h.screens.data.ScreenStateData;h.screens.data.ScreenStateData.__name__="com,nick,fop,dragon_drop,ui,screens,data,ScreenStateData".split(",");h.screens.data.ScreenStateData.prototype={__class__:h.screens.data.ScreenStateData};h.transitions={};h.transitions.TransitionBase=function(a,b,d,n){null==n&&(n="");null==d&&(d=!1);null==b&&(b=!0);this._STATE_OUT=3;this._STATE_IDLE=2;this._STATE_IN=1;this._STATE_HIDDEN=0;this._transitionId=n;this._flagOutOnly=
d;this.flagDispose=!1;o.Element.call(this,{asset:a});b?this._setState(this._STATE_HIDDEN):this._flagOutOnly?this._setState(this._STATE_OUT):this._setState(this._STATE_IN)};k["com.nick.fop.dragon_drop.ui.transitions.TransitionBase"]=h.transitions.TransitionBase;h.transitions.TransitionBase.__name__="com,nick,fop,dragon_drop,ui,transitions,TransitionBase".split(",");h.transitions.TransitionBase.__super__=o.Element;h.transitions.TransitionBase.prototype=v(o.Element.prototype,{dispose:function(){o.Element.prototype.dispose.call(this);
this._mc=null},_setState:function(a){this._state=a;switch(this._state){case this._STATE_HIDDEN:this.hide()}},show:function(){this._mc.set_visible(!0)},hide:function(){this._mc.set_visible(!1)},start:function(){this.show();this._setState(this._STATE_IN)},update:function(a){o.Element.prototype.update.call(this,a)},_getIsOutro:function(){return this._state==this._STATE_OUT},__class__:h.transitions.TransitionBase,__properties__:v(o.Element.prototype.__properties__,{get_isOutro:"_getIsOutro"})});t={};
t.World=function(a,b){this._flagTargeting=0;l.WMEventDispatcher.call(this);this._timeline=a;this._elementManager=new o.ElementManager(this._timeline,c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y);this._elementManager.addLayer(c.ConstantsApp.LAYER_BG);this._elementManager.addLayer(c.ConstantsApp.LAYER_PLAYER);this._elementManager.addLayer(c.ConstantsApp.LAYER_FG);this._elementManager.addLayer(c.ConstantsApp.LAYER_UI);this._elementManager.addElement(new o.Element({layer:c.ConstantsApp.LAYER_BG,
x:0,y:-210,asset:"backgroundImages/background"}));this._babyDragons=[];this._player=new t.elements.Player(155,450);this._dragon=new t.elements.Dragon(575,150);this._babyDragonTarget=new t.elements.BabyDragon(0,0,!1);this._elementManager.addElement(this._dragon);this._elementManager.addElement(this._player);this._prevPlayerAttack=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_ATTACK_TYPE);this._flagNewGame=b;this._player.setTarget(this._dragon);this._dragon.setTarget(this._player);this._addEventListeners();
this._previousState=-1;this._setState(0)};k["com.nick.fop.dragon_drop.world.World"]=t.World;t.World.__name__="com,nick,fop,dragon_drop,world,World".split(",");t.World.__super__=l.WMEventDispatcher;t.World.prototype=v(l.WMEventDispatcher.prototype,{render:function(){this._elementManager.renderElements()},handleInput:function(a){if(!f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_PAUSED))switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case l.WMEventInput.PHASE_DOWN:if(2==this._flagTargeting)for(var b=
0,d=this._babyDragons;b<d.length;){var n=d[b];++b;var e=j.Sprite.getBounds(n._getEntity()),g=j.Sprite.getBounds(this._dragon._getEntity());e.contains(a.x,a.y)?(this._player.setTarget(n),this._babyDragonTarget=n,this._flagTargeting=1,this._prevPlayerAttack=-1,this._removeIndicators()):g.contains(a.x,a.y)&&(this._player.setTarget(this._dragon),this._flagTargeting=1,this._prevPlayerAttack=-1,this._removeIndicators())}}}},_removeIndicators:function(){this._elementManager.removeElement(this._userIndicator);
this._elementManager.removeElement(this._dragonArrow);0<this._babyDragons.length&&!1==this._babyDragonTarget.getIsMezzed()&&this._elementManager.removeElement(this._babyDragonArrow)},_onSpawnCombatText:function(a){switch(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE)){case 0:this._combatText=new t.elements.CombatText(this._dragon._getPos().x+50,this._dragon._getPos().y+50,0,a._getData().pDamage);break;case 1:this._combatText=new t.elements.CombatText(this._player._getPos().x+50,
this._player._getPos().y-50,0,a._getData().pDamage);break;case 2:this._combatText=this._babyDragonTarget.getIsMezzed()?new t.elements.CombatText(this._dragon._getPos().x+50,this._dragon._getPos().y+50,0,a._getData().pDamage):new t.elements.CombatText(this._player._getPos().x+50,this._player._getPos().y-50,0,a._getData().pDamage);break;case 3:this._combatText=new t.elements.CombatText(this._player._getPos().x+50,this._player._getPos().y-50,1,a._getData().pDamage);break;case 4:this._combatText=new t.elements.CombatText(this._babyDragonTarget._getPos().x-
10,this._babyDragonTarget._getPos().y-10,0,a._getData().pDamage)}this._elementManager.addElement(this._combatText)},_onSpawnUserIndicator:function(){this._userIndicator=new t.elements.UserIndicators(160,165);this._elementManager.addElement(this._userIndicator);this._dragonArrow=new t.elements.UserIndicators(650,165,1);this._elementManager.addElement(this._dragonArrow);0<this._babyDragons.length&&!1==this._babyDragonTarget.getIsMezzed()&&(this._babyDragonArrow=new t.elements.UserIndicators(570,360,
1),this._elementManager.addElement(this._babyDragonArrow))},_onEndBabyDragonTurn:function(){1==this._babyDragons.length?(this._previousState=this._state,this._setState(1)):0<this._prevBabyDragon?(this._previousState=-1,this._babyDragons[this._prevBabyDragon-1].setIsNext(!0),this._prevBabyDragon--):(this._previousState=this._state,this._setState(1))},_onMezBabyDragon:function(){this._babyDragonTarget=this._babyDragons[0];this._babyDragonTarget.setTarget(this._dragon);this._babyDragonTarget.setFriendlyTarget(this._player);
this._babyDragonTarget.setIsMezzed(!0);this._babyDragonTarget.setState(9);this._dragon.setTarget(this._babyDragonTarget);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_BABY_DRAGON_MEZ_COUNTER,1)},_onSpawnBabyDragon:function(){if(3>this._babyDragons.length){this._babyDragons.push(this._elementManager.addElement(new t.elements.BabyDragon(850,400)));var a=this._babyDragons.length;f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS,a);for(1==a&&this._babyDragons[0].setIsNext(!0);0<
a;)a--,this._babyDragons[a].getIsNewBorn()&&this._babyDragons[a].setTarget(this._player)}},_onEndTurn:function(){this._previousState=this._state;0==this._babyDragons.length?this._setState(1):(this._setState(3),this._babyDragons[this._babyDragons.length-1].setIsNext(!0))},_onEndPlayerTurn:function(){this._previousState=this._state;this._setState(2)},_onSpawnFire:function(){this._elementManager.addElement(new t.elements.Flames(575,150))},_unpause:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_PAUSED,
!1)},_pause:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_PAUSED,!0)},_onUnpause:function(){this._unpause()},_onPause:function(){this._pause()},_removeEventListeners:function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_PAUSE,s(this,this._onPause));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_UNPAUSE,s(this,this._onUnpause));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_END_PLAYER_TURN,
s(this,this._onEndPlayerTurn));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_END_TURN,s(this,this._onEndTurn));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_END_BABY_DRAGON_TURN,s(this,this._onEndBabyDragonTurn));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_BABY_DRAGON,s(this,this._onSpawnBabyDragon));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_MEZ_BABY_DRAGON,
s(this,this._onMezBabyDragon));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_USER_INDICATOR,s(this,this._onSpawnUserIndicator));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT,s(this,this._onSpawnCombatText));f.WorkinCloud.instance.getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_FIRE,s(this,this._onSpawnFire))},_addEventListeners:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_PAUSE,
s(this,this._onPause));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_UNPAUSE,s(this,this._onUnpause));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_END_PLAYER_TURN,s(this,this._onEndPlayerTurn));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_END_TURN,s(this,this._onEndTurn));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_END_BABY_DRAGON_TURN,s(this,this._onEndBabyDragonTurn));
f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_BABY_DRAGON,s(this,this._onSpawnBabyDragon));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_MEZ_BABY_DRAGON,s(this,this._onMezBabyDragon));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_USER_INDICATOR,s(this,this._onSpawnUserIndicator));f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT,s(this,this._onSpawnCombatText));
f.WorkinCloud.instance.getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_FIRE,s(this,this._onSpawnFire))},_updateCooldowns:function(){0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_FIRE_COOLDOWN)&&f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_FIRE_COOLDOWN,-1);0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEAL_COOLDOWN)&&f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_HEAL_COOLDOWN,-1);0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_MEZ_COOLDOWN)&&f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_MEZ_COOLDOWN,
-1);0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_WINGS_COOLDOWN)&&f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_WINGS_COOLDOWN,-1);0<this._babyDragons.length&&this._babyDragonTarget.getIsMezzed()&&(f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_BABY_DRAGON_MEZ_COUNTER,-1),0>f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_BABY_DRAGON_MEZ_COUNTER)&&(f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_BABY_DRAGON_MEZ_COUNTER,0),this._babyDragonTarget.setIsMezzed(!1),this._babyDragonTarget.setFriendlyTarget(this._dragon),
this._babyDragonTarget.setTarget(this._player),this._babyDragonTarget.setState(9),this._dragon.setTarget(this._player)))},_babyDragonTurn:function(){if(0==this._babyDragons.length)f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_BABY_DRAGON_TURN));else if(this._previousState!=this._state){this._previousState=this._state;var a=this._babyDragons.length;if(1==a)a--,this._babyDragons[a].getIsNext()&&(this._player.getIsBlocking()?this._babyDragons[a].setPlayerBlocking(!0):
this._babyDragons[a].setPlayerBlocking(!1),this._babyDragons[a].chooseAttack());else for(;0<a;)a--,this._babyDragons[a].getIsNext()&&(this._player.getIsBlocking()?this._babyDragons[a].setPlayerBlocking(!0):this._babyDragons[a].setPlayerBlocking(!1),this._babyDragons[a].chooseAttack(),this._prevBabyDragon=a)}},_dragonTurn:function(){this._previousState!=this._state&&this._flagDragonTurn&&(this._previousState=this._state,this._flagDragonTurn=!1,this._player.getIsBlocking()?this._dragon.setPlayerBlocking(!0):
this._dragon.setPlayerBlocking(!1),this._dragon.getIsDragonDead()?(this._dragon.setState(7),f.WorkinCloud.instance._getSound().playSound("audio/dragon_whimper",1)):this._dragon.chooseAttack())},_openAttackMenu:function(){this._level=f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL);this._updateCooldowns();4<this._level&&0<this._babyDragons.length&&!1==this._dragon.getIsDragonDead()&&(0>=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_MEZ_COOLDOWN)?(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MEZ_ENABLED,
!0),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MEZ_ON_COOLDOWN,!1)):(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MEZ_ENABLED,!1),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MEZ_ON_COOLDOWN,!0)));3<this._level&&(0>=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_WINGS_COOLDOWN)?(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_WINGS_ENABLED,!0),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_WINGS_ON_COOLDOWN,!1)):(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_WINGS_ENABLED,
!1),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_WINGS_ON_COOLDOWN,!0)));2<this._level&&(0>=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_FIRE_COOLDOWN)?(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_FIRE_ENABLED,!0),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_FIRE_ON_COOLDOWN,!1)):(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_FIRE_ENABLED,!1),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_FIRE_ON_COOLDOWN,!0)));1<this._level&&(0>=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEAL_COOLDOWN)?
(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HEAL_ENABLED,!0),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HEAL_ON_COOLDOWN,!1)):(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HEAL_ENABLED,!1),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HEAL_ON_COOLDOWN,!0)));f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_OPEN))},_playerTurn:function(){this._dragon.getIsBlocking()?this._player.setIsDragonBlocking(!0):this._player.setIsDragonBlocking(!1);
var a=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_ATTACK_TYPE);if(this._prevPlayerAttack!=a)switch(this._prevPlayerAttack=a,this._prevPlayerAttack){case 1:this._player.fireSelect();break;case 2:this._player.healSelect();break;case 3:this._player.mezSelect();break;case 4:if(0<this._babyDragons.length&&!1==this._babyDragonTarget.getIsMezzed())switch(this._flagTargeting){case 0:this._selectTarget();break;case 1:this._player.wingsSelect(),this._flagTargeting=0}else this._player.wingsSelect();break;
case 5:this._player.shieldSelect();break;case 6:if(0<this._babyDragons.length&&!1==this._babyDragonTarget.getIsMezzed())switch(this._flagTargeting){case 0:this._selectTarget();break;case 1:this._player.weaponSelect(),this._flagTargeting=0}else this._player.weaponSelect()}},update:function(a){if(!0!=f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_PAUSED)){a=Math.round(1E3*a)/1E3;switch(this._state){case 0:this._elementManager.updateElements(a);this._timerDelay-=a;0>this._timerDelay&&(this._setState(1),
this._timerDelay=0);return;case 1:this._elementManager.updateElements(a);this._playerTurn(a);break;case 2:this._elementManager.updateElements(a);this._dragonTurn(a);break;case 3:this._elementManager.updateElements(a);this._babyDragonTurn(a);break;case 4:this._elementManager.updateElements(a)}for(this._numBabyDragons=this._babyDragons.length;0<this._numBabyDragons;)this._numBabyDragons--,this._babyDragons[this._numBabyDragons].getIsDragonDead()&&(this._elementManager.removeElement(this._babyDragons[this._numBabyDragons]),
this._babyDragons.splice(this._numBabyDragons,1),f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS,-1))}},_setState:function(a){this._state=a;switch(a){case 0:this._timerDelay=0.6;break;case 1:this._player.getIsDead()?this._setState(4):(this._openAttackMenu(),this._player.setState(0),f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_ATTACK_TYPE,-1),this._flagNewGame&&(f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP)),
this._flagNewGame=!1));break;case 2:this._dragon.setState(5),this._flagDragonTurn=!0}},dispose:function(){this._elementManager.dispose();this._timeline=this._elementManager=null;this._removeEventListeners();this._userIndicator=this._babyDragonTarget=this._babyDragonArrow=this._combatText=this._dragonArrow=this._transition=this._target=this._dragon=this._player=this._babyDragons=null;l.WMEventDispatcher.prototype.dispose.call(this)},_selectTarget:function(){f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_SPAWN_USER_INDICATOR));
this._flagTargeting=2},__class__:t.World});o.AnimatedElement=function(a){o.Element.call(this,a);this._animations=new G;this._queuedAnimations=[];this._lastFrame=-1;this._currentFrame=0;this._currentAnimation="";this._fps=24;this._animationStopped=!0;this._type=this._symbol=this._library="";a.library&&a.movie&&this.setLibraryAndSymbol(a.library,a.movie);a.fps&&(this._fps=a.fps)};k["com.workinman.display.AnimatedElement"]=o.AnimatedElement;o.AnimatedElement.__name__=["com","workinman","display","AnimatedElement"];
o.AnimatedElement.__super__=o.Element;o.AnimatedElement.prototype=v(o.Element.prototype,{_onAnimationComplete:function(){},_setFrame:function(){this._movie.set_position(Math.floor(this._currentFrame)/this._frames*this._duration)},update:function(a){o.Element.prototype.update.call(this,a);if(""!=this._currentAnimation&&(0<this._currentLoop||this._flagLoop)&&!1==this._animationStopped)this._currentFrame+=this._fps*a,this._currentFrame>this._currentFrameList[1]&&(this._currentLoop--,1>this._currentLoop&&
!1==this._flagLoop?0<this._queuedAnimations.length?(this._doAnimate(this._queuedAnimations[0]._getName(),this._queuedAnimations[0]._getLoops(),this._queuedAnimations[0]._getForce()),this._queuedAnimations.splice(0,1)):this._onAnimationComplete():this._currentFrame=this._currentFrameList[0]),null!=this._movie&&(this._currentFrame|0)!=this._lastFrame&&this._setFrame(this._currentFrame),this._lastFrame=this._currentFrame|0},clearQueue:function(){for(;0<this._queuedAnimations.length;)this._queuedAnimations.splice(0,
1)},stopAnimation:function(){this._animationStopped=!0},_doAnimate:function(a,b,d){null==d&&(d=!1);null==b&&(b=0);this._currentAnimation==a&&!1==d||(null!=this._animations&&this._animations.exists(a)?(this._currentFrameList=null,this._currentFrameList=this._animations.get(a).slice(),this._currentFrame=this._currentFrameList[0],this._currentAnimation=a,this._currentLoop=b,this._flagLoop=0==b,this._animationStopped=!1):f.WorkinCloud.instance.log("Animation not found: "+a))},animate:function(a,b,d){null==
d&&(d=!1);null==b&&(b=0);this.clearQueue();this._doAnimate(a,b,d);return this},addAnimation:function(a,b,d){null==d&&(d=-1);null==b&&(b=-1);-1==b&&(b=0);-1==d&&(d=this._frames|0);this._animations.set(a,[b,d]);return this},setLibraryAndSymbol:function(a,b){this._library=a;this._symbol=b;this._texture.dispose();var d=f.WorkinCloud.instance.getAssets().getLibrary(this._library)._symbols.get(this._symbol);this._duration=d.duration;this._frames=d.frames;this._movie=d.createSprite();this._movie.set_paused(!0);
this._texture=this._movie;this._textureEntity.add(this._texture);return this},_getAnimationFrameRelative:function(){return this._currentFrame-this._currentFrameList[0]|0},_setAnimationFrame:function(a){this._currentFrame=a;this._setFrame(this._currentFrame);this.stopAnimation();return this._currentFrame|0},_getAnimationFrame:function(){return this._currentFrame|0},_getAnimationRatio:function(){return(this._currentFrame-this._currentFrameList[0])/(this._currentFrameList[1]-this._currentFrameList[0])},
_setFps:function(a){return this._fps=a},_getFps:function(){return this._fps},_getCurrentAnimation:function(){return this._currentAnimation},getType:function(){return this._type},dispose:function(){this._queuedAnimations=this._currentFrameList=this._animations=this._movie=null;o.Element.prototype.dispose.call(this)},__class__:o.AnimatedElement});t.elements={};t.elements.BabyDragon=function(a,b,d){null==d&&(d=!0);o.AnimatedElement.call(this,{layer:c.ConstantsApp.LAYER_PLAYER,library:"anim_baby_dragon",
movie:"_gameplay_dragon_babycopy",fps:30,origin:new i.WorkinPoint(0.5,0)});this._type="Baby Dragon";this._pos.x=a;this._pos.y=b;this._flagIsNewBorn=!0;this._flagIsMezzed=this._flagDragonDead=this._flagIsNext=!1;this._flagPlayBornSound=d;this._velocity.y=450;this.addAnimation("idle",1,1);this.addAnimation("open",1,29);this.addAnimation("fly",41,60);this.addAnimation("fly attack",61,80);this.addAnimation("attack 1",81,90);this.addAnimation("attack 2",91,98);this.addAnimation("hurt",99,104);this._maxHealth=
2*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_MAX_HEALTH,this._maxHealth);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH,this._maxHealth);this.setState(0)};k["com.nick.fop.dragon_drop.world.elements.BabyDragon"]=t.elements.BabyDragon;t.elements.BabyDragon.__name__="com,nick,fop,dragon_drop,world,elements,BabyDragon".split(",");t.elements.BabyDragon.__super__=o.AnimatedElement;t.elements.BabyDragon.prototype=
v(o.AnimatedElement.prototype,{dispose:function(){o.AnimatedElement.prototype.dispose.call(this);this._friendlyTarget=this._target=null},_snapBack:function(){i.tween.WorkinTweener._getInstance().tween(this._render,1,{scaleX:1,scaleY:1,rotation:0}).ease(i.tween.PennerManager.EASE_ELASTIC_OUT);this.setState(1)},_moveBack:function(a){this._flagIsMezzed?this._pos.x>this._friendlyTarget._getPos().x+130?(this._render.scaleX=1,this._pos.x-=400*a):(this._pos.x=this._friendlyTarget._getPos().x+130,this._flagIsNext=
this._flagMoving=!1,this.setState(2),this._flagAtTarget=!1,this._render.scaleX=-1,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_BABY_DRAGON_TURN))):650>this._pos.x?(this._render.scaleX=-1,this._pos.x+=400*a):(this._pos.x=650,this._flagIsNext=this._flagMoving=!1,this.setState(2),this._flagAtTarget=!1,this._render.scaleX=1,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_BABY_DRAGON_TURN)))},_moveToFriendly:function(a){this._flagAtTarget?
(this._render.scaleX=this._flagIsMezzed?-1:1,this._previousState=this._currentState,this.setState(2),this._flagMoving=!1):this._flagIsMezzed?this._pos.x>this._friendlyTarget._getPos().x+130?this._pos.x-=400*a:(this._pos.x=this._friendlyTarget._getPos().x+130,this._flagAtTarget=!0,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_PLAYER_TURN))):650>this._pos.x?(this._render.scaleX=-1,this._pos.x+=400*a):(this._pos.x=650,this._flagAtTarget=!0)},_moveToTarget:function(a){this._flagAtTarget?
(this._previousState=this._currentState,this.setState(4),this._flagMoving=!1):this._flagIsMezzed?this._pos.x<this._target._getPos().x?this._pos.x+=400*a:(this._pos.x=this._target._getPos().x,this._flagAtTarget=!0):this._pos.x>this._target._getPos().x+130?this._pos.x-=400*a:(this._pos.x=this._target._getPos().x+130,this._flagAtTarget=!0)},_moveDown:function(a){this._pos.y+=this._velocity.y*a;475<this._pos.y&&(i.tween.WorkinTweener._getInstance().tween(this._render,0.1,{scaleX:1,scaleY:0.8}).ease(i.tween.PennerManager.EASE_OUT).onComplete(s(this,
this._snapBack)),this._pos.y=475,this._flagMoving=!1)},_dealDamage:function(){var a;a=0;a=1+1.3*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1);a=Math.round(a);"Dragon"==this._target.getType()?(f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH,-a),a=Math.floor(100*(f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_MAX_HEALTH))),a=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH)-
a):(this._flagPlayerBlocking&&(a/=2),f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_HEALTH,-a),a=Math.floor(100*(f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_MAX_HEALTH))),a=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH)-a);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE,2);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_DAMAGE_AMOUNT,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventData(c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT,
{pDamage:a}))},chooseAttack:function(){this.setState(3)},_onAnimationComplete:function(){this._previousState=this._currentState;switch(this._previousState){case 4:f.WorkinCloud.instance._getSound().playSound("audio/baby_dragon_chomp",1);this._dealDamage();this.setState(7);break;case 7:this._flagMoving=!0;this.setState(6);break;case 1:f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_TURN));this._flagIsNewBorn=!1;break;case 8:break;default:this.setState(2)}},
setState:function(a){this._currentState=a;switch(this._currentState){case 0:this._flagPlayBornSound&&f.WorkinCloud.instance._getSound().playSound("audio/dragon_born",1);this._flagMoving=!0;this.animate("idle");break;case 1:this.animate("open",1);break;case 2:this._flagAtTarget=!1;this.animate("fly");break;case 3:this._flagMoving=!0;this.animate("fly attack");break;case 4:this.animate("attack 1",1);break;case 7:this.animate("attack 2",1);break;case 5:f.WorkinCloud.instance._getSound().playSound("audio/baby_dragon_hurt",
1);this.animate("hurt",1);break;case 6:this._flagMoving=!0;this.animate("fly attack");break;case 8:this.animate("hurt",1);break;case 9:this._flagMoving=!0,this.animate("fly attack")}},update:function(a){o.AnimatedElement.prototype.update.call(this,a);if(this._flagMoving)switch(this._currentState){case 0:this._moveDown(a);break;case 3:this._moveToTarget(a);break;case 6:this._moveBack(a);break;case 9:this._moveToFriendly(a)}this._health=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH);
this._maxHealth!=this._health&&(this._maxHealth=this._health,this.setState(5));0>f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH)&&!1==this._flagDragonDead&&(this.setState(8),this._flagDragonDead=!0)},setPlayerBlocking:function(a){this._flagPlayerBlocking=a},getIsMezzed:function(){return this._flagIsMezzed},setIsMezzed:function(a){this._flagIsMezzed=a},getIsDragonDead:function(){return this._flagDragonDead},getIsNewBorn:function(){return this._flagIsNewBorn},setIsNext:function(a){this._flagIsNext=
a},getIsNext:function(){return this._flagIsNext},setFriendlyTarget:function(a){this._friendlyTarget=a},setTarget:function(a){this._target=a},__class__:t.elements.BabyDragon});t.elements.CombatText=function(a,b,d,n){null==n&&(n=0);null==d&&(d=0);o.Element.call(this,{asset:"",layer:c.ConstantsApp.LAYER_FG,origin:new i.WorkinPoint(0.5,0.5)});this._sinDisplay=Math.random()*Math.PI;this._pos.x=a;this._pos.y=b;switch(d){case 0:this._text=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("damage_font"),
""+n);break;case 1:this._text=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("heal_font"),""+n)}this._text.x.set__(this._getPos().x);this._text.y.set__(this._getPos().y);this._display=this._text;this._entity.add(this._display);this._render.alpha=0};k["com.nick.fop.dragon_drop.world.elements.CombatText"]=t.elements.CombatText;t.elements.CombatText.__name__="com,nick,fop,dragon_drop,world,elements,CombatText".split(",");t.elements.CombatText.__super__=o.Element;t.elements.CombatText.prototype=
v(o.Element.prototype,{dispose:function(){o.Element.prototype.dispose.call(this);this._text=null},update:function(a){o.Element.prototype.update.call(this,a);this._render.alpha+=2*a;1.5<this._render.alpha&&this.removeIndicator();this._getPos().y-=60*a;this._getPos().x+=20*a},removeIndicator:function(){this._setDoDelete(!0)},__class__:t.elements.CombatText});t.elements.Crystal=function(){};k["com.nick.fop.dragon_drop.world.elements.Crystal"]=t.elements.Crystal;t.elements.Crystal.__name__="com,nick,fop,dragon_drop,world,elements,Crystal".split(",");
t.elements.Crystal.__super__=o.Element;t.elements.Crystal.prototype=v(o.Element.prototype,{dispose:function(){o.Element.prototype.dispose.call(this)},update:function(a){o.Element.prototype.update.call(this,a);this._pos.x-=this._speed*a;-100>this._pos.x&&this._setDoDelete(!0);this._render.rotation+=this._rot*a},__class__:t.elements.Crystal});t.elements.Dragon=function(a,b){o.AnimatedElement.call(this,{layer:c.ConstantsApp.LAYER_PLAYER,library:"anim_ranger",movie:"com.nick.fop.holiday_dragon.entities.Dragon",
fps:30,origin:new i.WorkinPoint(0.5,0.5)});this._type="Dragon";this._pos.x=a;this._pos.y=b;this._flagDragonDead=!1;this.addAnimation("idle",1,40);this.addAnimation("presents",41,79);this.addAnimation("fire 1",80,92);this.addAnimation("fire 2",93,116);this.addAnimation("claw 1",117,163);this.addAnimation("claw 2",164,226);this.addAnimation("swipe 1",227,239);this.addAnimation("swipe 2",240,250);this.addAnimation("block",251,259);this.addAnimation("hurt",261,267);this.addAnimation("defeated",268,308);
this.addAnimation("defeated idle",281,297);this.addAnimation("pre presents",41,53);this.addAnimation("pre fire",80,92);this.addAnimation("pre claw",126,138);this.addAnimation("pre swipe",230,242);this.addAnimation("pre block",259,270);this.setState(5);this._previousState=this._attack=-1;this._currentState=0;this._rdyToAttack=this._hasChangedState=!1;this._babiesSpawned=this._fireCooldown=0;this._maxHealth=9<f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)?10+Math.round(13*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+
1)):3<f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)?10+Math.round(10*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1)):10+Math.round(5*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1));f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_DRAGON_MAX_HEALTH,this._maxHealth);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH,this._maxHealth)};k["com.nick.fop.dragon_drop.world.elements.Dragon"]=t.elements.Dragon;t.elements.Dragon.__name__=
"com,nick,fop,dragon_drop,world,elements,Dragon".split(",");t.elements.Dragon.__super__=o.AnimatedElement;t.elements.Dragon.prototype=v(o.AnimatedElement.prototype,{dispose:function(){o.AnimatedElement.prototype.dispose.call(this);this._target=null},_doDamage:function(){var a=0;switch(this._attack){case 0:a=4;break;case 1:a=5;break;case 3:a=8}a+=1.3*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1);this._flagPlayerBlocking&&(a=3==this._attack?a/4:a/2);a=Math.round(a);3==this._attack?
(0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)&&f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH,-a),f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_HEALTH,-a)):"Baby Dragon"==this._target.getType()?f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH,-a):f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_HEALTH,-a);a=Math.floor(100*(f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_MAX_HEALTH)));
a=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH)-a;f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE,1);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_DAMAGE_AMOUNT,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventData(c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT,{pDamage:a}))},chooseAttack:function(){switch(this._attack){case -1:this.setState(0);break;case 0:this.setState(0);break;case 1:this.setState(1);break;case 3:0<this._fireCooldown?
this.setState(1):this.setState(3);break;case 4:0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)?this.setState(0):this.setState(4);break;case 2:this.setState(2)}},_nextAttack:function(){this._flagDragonDead?this.setState(7):(0<this._fireCooldown&&this._fireCooldown--,this._attack=2<f.WorkinCloud.instance.getInt(c.ConstantsApp.CURRENT_LEVEL)?f.WorkinUtils.getRandom(0,3,!0)|0:3<f.WorkinCloud.instance.getInt(c.ConstantsApp.CURRENT_LEVEL)?f.WorkinUtils.getRandom(0,4,!0)|0:f.WorkinUtils.getRandom(0,
2,!0)|0,null)},_onAnimationComplete:function(){this._previousState=this._currentState;switch(this._previousState){case 0:this._doDamage();this.setState(11);break;case 11:this.setState(5);this._nextAttack();f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_TURN));break;case 1:this._doDamage();this.setState(10);break;case 10:this.setState(5);this._nextAttack();f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_TURN));
break;case 3:f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_SPAWN_FIRE));this._doDamage();this.setState(12);break;case 12:this.setState(5);this._nextAttack();this._fireCooldown=4;f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_TURN));break;case 4:this.setState(5);this._nextAttack();f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_SPAWN_BABY_DRAGON));break;case 2:this._nextAttack();
f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_TURN));break;case 8:this.setState(5);break;case 7:this.animate("defeated idle");break;case 6:this.setState(5)}},setState:function(a){this._currentState=a;switch(this._currentState){case 0:this.animate("swipe 1",1);f.WorkinCloud.instance._getSound().playSound("timmy_swordattack",1);break;case 11:this.animate("swipe 2",1);break;case 1:this.animate("claw 1",1);break;case 10:f.WorkinCloud.instance._getSound().playSound("audio/dragon_swoopattack",
1);this.animate("claw 2",1);break;case 3:f.WorkinCloud.instance._getSound().playSound("audio/dragon_fire",1);this.animate("fire 1",1);break;case 12:this.animate("fire 2",1);break;case 4:this.animate("presents",1);break;case 2:this._flagIsBlocking=!0;this.animate("block",1);break;case 5:this._flagIsBlocking=!1;this.animate("idle");break;case 6:f.WorkinCloud.instance._getSound().playSound("audio/dragon_hurt",1);this.animate("hurt",1);break;case 7:this.animate("defeated idle");break;case 8:switch(this._attack){case 0:this.animate("pre swipe",
1);break;case 1:this.animate("pre claw",1);break;case 3:this.animate("pre fire",1);break;case 4:this.animate("pre presents",1);break;case 2:this.animate("pre block",1)}}},update:function(a){o.AnimatedElement.prototype.update.call(this,a);this._health=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH);this._maxHealth!=this._health&&(this._maxHealth=this._health,this.setState(6));0>=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH)&&!1==this._flagDragonDead&&(this._flagDragonDead=
!0,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN)))},setPlayerBlocking:function(a){this._flagPlayerBlocking=a},getIsBlocking:function(){return this._flagIsBlocking},setTarget:function(a){this._target=a},getIsDragonDead:function(){return this._flagDragonDead},__class__:t.elements.Dragon});t.elements.Flames=function(a,b){o.AnimatedElement.call(this,{layer:c.ConstantsApp.LAYER_PLAYER,library:"anim_flames",movie:"FirebreathShrunk",fps:30,
origin:new i.WorkinPoint(0.5,0.5)});this._pos.x=a;this._pos.y=b;this.addAnimation("idle",0,20);this.animate("idle",1)};k["com.nick.fop.dragon_drop.world.elements.Flames"]=t.elements.Flames;t.elements.Flames.__name__="com,nick,fop,dragon_drop,world,elements,Flames".split(",");t.elements.Flames.__super__=o.AnimatedElement;t.elements.Flames.prototype=v(o.AnimatedElement.prototype,{dispose:function(){o.AnimatedElement.prototype.dispose.call(this)},_onAnimationComplete:function(){this._setDoDelete(!0)},
__class__:t.elements.Flames});t.elements.Player=function(a,b){this._currentLevel=f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)|0;o.AnimatedElement.call(this,{layer:c.ConstantsApp.LAYER_PLAYER,library:"anim_timmy",movie:this._assetID(),fps:30,origin:new i.WorkinPoint(0.5,0.5)});this._pos.x=a;this._pos.y=b;this.addAnimation("idle",0,49);this.addAnimation("wings crouch",50,57);this.addAnimation("wings up",58,87);this.addAnimation("wings fly",88,91);this.addAnimation("wings attack 1",
92,112);this.addAnimation("wings attack 2",113,118);this.addAnimation("wings land",119,130);this.addAnimation("shield",141,150);this.addAnimation("heal",151,174);this.addAnimation("fire 1",175,189);this.addAnimation("fire 2",190,224);this.addAnimation("mez",225,285);this.addAnimation("weapon 1",286,295);this.addAnimation("weapon 2",296,305);this.addAnimation("hit",306,317);this._currentState=0;this._previousState=-1;this.setState(0);this._startingHealth=this._maxHealth=20+4.5*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+
1);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_MAX_HEALTH,this._maxHealth);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_HEALTH,this._maxHealth);this._atTarget=this._isJumping=this._flagIsDead=!1};k["com.nick.fop.dragon_drop.world.elements.Player"]=t.elements.Player;t.elements.Player.__name__="com,nick,fop,dragon_drop,world,elements,Player".split(",");t.elements.Player.__super__=o.AnimatedElement;t.elements.Player.prototype=v(o.AnimatedElement.prototype,{dispose:function(){o.AnimatedElement.prototype.dispose.call(this);
this._target=null},_doMez:function(){f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_MEZ_BABY_DRAGON))},_heal:function(){f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_HEALTH,this._healAmount);var a=0,a=this._healAmount,a=a*10*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1);f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_SCORE,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_PLAYER_TURN))},
_calculateHeal:function(){this._healAmount=Math.floor(6+3*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1));var a=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH);this._healAmount+a>this._startingHealth&&(this._healAmount=Math.floor(this._startingHealth-a),null);a=Math.floor(100*((f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH)+this._healAmount)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_MAX_HEALTH)))-f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH);
f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE,3);f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_DAMAGE_AMOUNT,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventData(c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT,{pDamage:a}))},_dealDamage:function(){var a=0,b=0;switch(this._currentState){case 6:a=4;break;case 1:a=8;break;case 4:a=5}a+=2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1;1==this._currentState?(0<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)?
f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH,-a):this._flagIsDragonBlocking&&(a/=2),f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH,-a),b=Math.floor(100*(f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_MAX_HEALTH))),b=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH)-b,f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE,
0)):"Dragon"==this._target.getType()?(this._flagIsDragonBlocking&&(a/=2),f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH,-a),b=Math.floor(100*(f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_HEALTH)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_DRAGON_MAX_HEALTH))),b=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH)-b,f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE,0)):"Baby Dragon"==this._target.getType()&&
(f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH,-a),b=Math.floor(100*(f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH)/f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_BABY_DRAGON_MAX_HEALTH))),b=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_PREVIOUS_BABY_DRAGON_RATIO_HEALTH)-b,f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_COMBAT_TEXT_TYPE,4));f.WorkinCloud.instance.setFloat(c.ConstantsApp.FLOAT_DAMAGE_AMOUNT,b);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventData(c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT,
{pDamage:b}));a*=10*(2*f.WorkinCloud.instance.getFloat(c.ConstantsApp.CURRENT_LEVEL)+1);f.WorkinCloud.instance.modifyFloat(c.ConstantsApp.FLOAT_SCORE,a)},_wingsFlyBack:function(a){165<this._pos.x?(this._render.scaleX=-1,this._pos.x-=450*a):(this._pos.x=165,this._pos.y=450,this.setState(16),this._render.scaleX=1,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_PLAYER_TURN)))},_wingsFly:function(a){this._pos.x<this._target._getPos().x?this._pos.x+=450*a:(this._pos.x=
this._target._getPos().x,this.setState(4),f.WorkinCloud.instance._getSound().playSound("timmy_swordattack",1))},_wingsUp:function(){200<this._pos.y?this._pos.y-=15:(this._flagJumping=!1,this._pos.y=200,this.setState(14))},_jumpBack:function(){165<this._pos.x?this._pos.x-=40:(this._pos.x=165,this._previousState=this._currentState,this._currentState=0,this.setState(0),this._flagJumping=this._isJumping=this._atTarget=!1,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_PLAYER_TURN)))},
_jumpingToTarget:function(){this._atTarget?(this._previousState=this._currentState,this._currentState=6,this.setState(6),this._flagJumping=!1,f.WorkinCloud.instance._getSound().playSound("timmy_swordattack",1)):"Baby Dragon"==this._target.getType()?this._pos.x<this._target._getPos().x-60?this._pos.x+=40:(this._pos.x=this._target._getPos().x-60,this._atTarget=!0):this._pos.x<this._target._getPos().x?this._pos.x+=40:(this._pos.x=this._target._getPos().x,this._atTarget=!0)},testDragonBlock:function(){null},
_testSkipTargettingIfSingleTarget:function(){f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_NUMBER_BABY_DRAGONS)},shieldSelect:function(){this._previousState=5;this.setState(5);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_PLAYER_TURN))},wingsSelect:function(){this._testSkipTargettingIfSingleTarget();this.setState(12)},mezSelect:function(){this.setState(3);f.WorkinCloud.instance._getSound().playSound("hypnotize",1)},healSelect:function(){f.WorkinCloud.instance._getSound().playSound("timmy_heal",
1);this.setState(2);this._calculateHeal()},fireSelect:function(){this.testDragonBlock();this.setState(1);f.WorkinCloud.instance._getSound().playSound("timmy_fire",1)},weaponSelect:function(){null==this._target?this._currentState=8:this.setState(9)},_onAnimationComplete:function(){switch(this._currentState){case 1:this._dealDamage();this.setState(19);break;case 19:f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(c.ConstantsApp.EVENT_END_PLAYER_TURN));this.setState(0);break;case 8:this.setState(9);
break;case 2:this._heal();this._previousState=2;this.setState(0);break;case 6:this._dealDamage();this.setState(18);break;case 18:this.setState(10);break;case 5:break;case 12:f.WorkinCloud.instance._getSound().playSound("drop_swoop",1);this.setState(13);break;case 4:this._dealDamage();this.setState(20);break;case 20:this.setState(17);break;case 3:this._doMez();this.setState(0);break;case 7:this._isBlocking?this.setState(5):this.setState(0);break;default:this.setState(0)}},setState:function(a){this._currentState=
a;switch(this._currentState){case 0:this._isBlocking=!1;this.animate("idle");break;case 1:this.animate("fire 1",1);break;case 19:this.animate("fire 2",1);break;case 2:this.animate("heal",1);break;case 3:this.animate("mez",1);break;case 4:this.animate("wings attack 1",1);break;case 20:this.animate("wings attack 2",1);break;case 5:this.animate("shield",1);this._isBlocking=!0;break;case 6:this.animate("weapon 1",1);break;case 18:this.animate("weapon 2",1);break;case 7:f.WorkinCloud.instance._getSound().playSound("timmy_hit",
1);this.animate("hit",1);break;case 21:f.WorkinCloud.instance._getSound().playSound("timmy_block",0.5);break;case 8:this.animate("idle");break;case 9:this._flagJumping=!0;break;case 10:this._flagJumping=!0;break;case 12:this.animate("wings crouch",1);break;case 13:this.animate("wings up");this._flagJumping=!0;break;case 14:this.animate("wings fly");this._flagJumping=!0;break;case 17:f.WorkinCloud.instance._getSound().playSound("drop_swoop",1);this.animate("wings fly");this._flagJumping=!0;break;case 16:this.animate("wings land",
1)}},update:function(a){o.AnimatedElement.prototype.update.call(this,a);if(this._flagJumping)switch(this._currentState){case 9:this._jumpingToTarget(a);return;case 10:this._jumpBack(a);return;case 13:this._wingsUp(a);return;case 14:this._wingsFly(a);return;case 17:this._wingsFlyBack(a);return}this._health=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH);this._maxHealth!=this._health&&this._health<this._maxHealth?(this._maxHealth=this._health,5==this._currentState||21==this._currentState?
this.setState(21):this.setState(7)):this._maxHealth!=this._health&&this._health>this._maxHealth&&(this._maxHealth=this._health);0>=f.WorkinCloud.instance.getFloat(c.ConstantsApp.FLOAT_HEALTH)&&!1==this._flagIsDead&&(f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)),this._flagIsDead=!0)},_assetID:function(){switch(this._currentLevel){case 1:return"Level1Timmy";case 2:return"Level2Timmy";case 3:return"Level3Timmy";case 4:return"Level4Timmy";
default:return"Level5Timmy"}},getIsDead:function(){return this._flagIsDead},getIsBlocking:function(){return this._isBlocking},setIsDragonBlocking:function(a){this._flagIsDragonBlocking=a},setTarget:function(a){this._target=a},__class__:t.elements.Player});t.elements.TestElement=function(){};k["com.nick.fop.dragon_drop.world.elements.TestElement"]=t.elements.TestElement;t.elements.TestElement.__name__="com,nick,fop,dragon_drop,world,elements,TestElement".split(",");t.elements.TestElement.__super__=
o.Element;t.elements.TestElement.prototype=v(o.Element.prototype,{update:function(a){o.Element.prototype.update.call(this,a);this.updatePositionFromVelocity(a);if(0<this._velocity.x&&this._pos.x>c.ConstantsApp.STAGE_WIDTH-this._render.width/2||0>this._velocity.x&&this._pos.x<this._render.width/2)this._velocity.x*=-1;if(0<this._velocity.y&&this._pos.y>c.ConstantsApp.STAGE_HEIGHT-this._render.height/2||0>this._velocity.y&&this._pos.y<this._render.height/2)this._velocity.y*=-1;this.rect.x=this._pos.x-
this._render.width/2;this.rect.y=this._pos.y-this._render.height/2;this._render.rotation+=this._rotation*a},dispose:function(){this.rect=null;o.Element.prototype.dispose.call(this)},__class__:t.elements.TestElement});t.elements.Transition=function(a,b){o.AnimatedElement.call(this,{layer:c.ConstantsApp.LAYER_UI,library:"flump_exploder",movie:"com.nick.fop.holiday_dragon.ui.screens.Gameplay",fps:30,origin:new i.WorkinPoint(0.5,0)});this._pos.x=a;this._pos.y=b;this.addAnimation("transition in",1,10);
this.addAnimation("transition out",11,20);this.setState(1)};k["com.nick.fop.dragon_drop.world.elements.Transition"]=t.elements.Transition;t.elements.Transition.__name__="com,nick,fop,dragon_drop,world,elements,Transition".split(",");t.elements.Transition.__super__=o.AnimatedElement;t.elements.Transition.prototype=v(o.AnimatedElement.prototype,{dispose:function(){o.AnimatedElement.prototype.dispose.call(this)},_onAnimationComplete:function(){switch(this._state){case 1:this.setState(2);break;case 2:this._setDoDelete(!0)}},
setState:function(a){this._state=a;switch(this._state){case 1:this.animate("transition in",1);break;case 2:this.animate("transition out",1)}},__class__:t.elements.Transition});t.elements.UserIndicators=function(a,b,d){null==d&&(d=0);switch(d){case 0:this._asset="";break;case 1:this._asset="elements/arrow_indicator"}o.Element.call(this,{asset:this._asset,layer:c.ConstantsApp.LAYER_FG,origin:new i.WorkinPoint(0.5,0.5)});this._sinDisplay=Math.random()*Math.PI;this._pos.x=a;this._pos.y=b;switch(d){case 0:this._text=
new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("final_font"),"Select a target");this._text.x.set__(this._getPos().x);this._text.y.set__(this._getPos().y);this._display=this._text;this._entity.add(this._display);this._display.alpha.set__(0);break;case 1:this._render.rotation=150}};k["com.nick.fop.dragon_drop.world.elements.UserIndicators"]=t.elements.UserIndicators;t.elements.UserIndicators.__name__="com,nick,fop,dragon_drop,world,elements,UserIndicators".split(",");t.elements.UserIndicators.__super__=
o.Element;t.elements.UserIndicators.prototype=v(o.Element.prototype,{dispose:function(){o.Element.prototype.dispose.call(this);this._text=null},update:function(a){o.Element.prototype.update.call(this,a);var b=this._display.alpha;b.set__(b._value+2*a);this._sinDisplay+=20*a;this._pos.y+=30*Math.sin(this._sinDisplay)*a},__class__:t.elements.UserIndicators});D=void 0;O=void 0;j=void 0;g=void 0;e=void 0;I=void 0;m=void 0;L=void 0;w=void 0;y=void 0;H=void 0;Y=void 0;z=void 0;F=void 0;z=void 0;aa=void 0;
z=void 0;z=void 0;m={Disposable:function(){}};k["flambe.util.Disposable"]=m.Disposable;m.Disposable.__name__=["flambe","util","Disposable"];m.Disposable.prototype={__class__:m.Disposable};L=function(){};k["flambe.Component"]=L;L.__name__=["flambe","Component"];L.__interfaces__=[m.Disposable];L.prototype={_internal_init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},
onAdded:function(){},__class__:L,__properties__:{get_name:"get_name"}};$={ComponentUpdater:function(){this._paused=!1}};k["com.workinman.components.ComponentUpdater"]=$.ComponentUpdater;$.ComponentUpdater.__name__=["com","workinman","components","ComponentUpdater"];$.ComponentUpdater.__super__=L;$.ComponentUpdater.prototype=v(L.prototype,{setPaused:function(a){return this._paused=a},getPaused:function(){return this._paused},onUpdate:function(a){this._paused||f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventUpdate(a))},
get_name:function(){return"ComponentUpdater_3"},__class__:$.ComponentUpdater});J={ConstantsCloud:function(){}};k["com.workinman.data.ConstantsCloud"]=J.ConstantsCloud;J.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];J.ConstantsCloud.getIsAndroid=function(){return 0<=B.window.navigator.userAgent.indexOf("Linux; U; Android 4")};o.QueuedAnimation=function(){};k["com.workinman.display.QueuedAnimation"]=o.QueuedAnimation;o.QueuedAnimation.__name__=["com","workinman","display","QueuedAnimation"];
o.QueuedAnimation.prototype={_getForce:function(){return this._force},_getLoops:function(){return this._loops},_getName:function(){return this._name},__class__:o.QueuedAnimation,__properties__:{get_name:"_getName",get_loops:"_getLoops",get_force:"_getForce"}};o.ElementManager=function(a,b,d){this._timeline=a;this._layers=new G;this._elements=[];this._camera=new i.WorkinCamera(b,d)};k["com.workinman.display.ElementManager"]=o.ElementManager;o.ElementManager.__name__=["com","workinman","display","ElementManager"];
o.ElementManager.prototype={renderElements:function(){for(var a=0,b=this._elements;a<b.length;){var d=b[a];++a;d.renderPosition(this._camera)}},updateElements:function(a){for(var b=this._elements.length;0<b;)b--,this._elements[b].update(a),this._elements[b]._getDoDelete()&&this.removeElementAtIndex(b)},removeElement:function(a){for(var b=this._elements.length;0<b;)if(b--,this._elements[b]==a){this.removeElementAtIndex(b);break}},removeElementAtIndex:function(a){this._elements[a]._getEntity().parent.removeChild(this._elements[a]._getEntity());
this._elements[a]._setDoDelete(!0);this._elements[a].dispose();this._elements.splice(a,1)},addElement:function(a){if(!1==this._layers.exists(a._getLayer()))return f.WorkinCloud.instance.log("[ElementManager](addElement) Trying to add element to non-existant layer '"+a._getLayer()+"'!"),a;this._elements.push(a);this._layers.get(a._getLayer()).addChild(a._getEntity());return a},addLayer:function(a){if(this._layers.exists(a))this._timeline.removeChild(this._layers.get(a)),this._timeline.addChild(this._layers.get(a));
else{var b=new O;this._timeline.addChild(b);this._layers.set(a,b)}},_getElements:function(){return this._elements},_getCamera:function(){return this._camera},dispose:function(){for(;0<this._elements.length;)this.removeElementAtIndex(this._elements.length-1);this._elements=null;this._camera.dispose();this._camera=null;for(var a=this._layers.iterator();a.hasNext();)a.next().dispose();this._timeline=this._layers=null},__class__:o.ElementManager};o.MaskedElement=function(){this._TWEEN_SPEED=5};k["com.workinman.display.MaskedElement"]=
o.MaskedElement;o.MaskedElement.__name__=["com","workinman","display","MaskedElement"];o.MaskedElement.__super__=o.Element;o.MaskedElement.prototype=v(o.Element.prototype,{update:function(a){this._currentScale.x+=(this._newScale.x-this._currentScale.x)*a*this._TWEEN_SPEED;this._currentScale.y+=(this._newScale.y-this._currentScale.y)*a*this._TWEEN_SPEED;this.updateMask(this._currentScale.x,this._currentScale.y);o.Element.prototype.update.call(this,a)},updateMask:function(a,b){this._mask.clear();this._mask.beginPath();
this._mask.moveTo(0,this._height*b);this._mask.lineTo(this._width*a,this._height*b);this._mask.lineTo(this._width*a,0);this._mask.lineTo(0,0);this._mask.closePath()},__class__:o.MaskedElement});o.Renderable=function(a,b){null==b&&(b=1);null==a&&(a=1);this.rotation=this.y=this.x=0;this.scaleY=this.scaleX=1;this.width=a;this.height=b;this.alpha=1;this.visible=!0};k["com.workinman.display.Renderable"]=o.Renderable;o.Renderable.__name__=["com","workinman","display","Renderable"];o.Renderable.prototype=
{__class__:o.Renderable};l.WMEvent=function(a){this._eventId=a};k["com.workinman.events.WMEvent"]=l.WMEvent;l.WMEvent.__name__=["com","workinman","events","WMEvent"];l.WMEvent.prototype={getEventId:function(){return this._eventId},__class__:l.WMEvent,__properties__:{get_eventId:"getEventId"}};l.WMEventData=function(a,b){l.WMEvent.call(this,a);this._data=b};k["com.workinman.events.WMEventData"]=l.WMEventData;l.WMEventData.__name__=["com","workinman","events","WMEventData"];l.WMEventData.__super__=
l.WMEvent;l.WMEventData.prototype=v(l.WMEvent.prototype,{_getData:function(){return this._data},__class__:l.WMEventData,__properties__:v(l.WMEvent.prototype.__properties__,{get_data:"_getData"})});l._WMEventDispatcher={};l._WMEventDispatcher.WMEventTracker=function(){this._signalConnection=[];this._signal=new m.Signal1};k["com.workinman.events._WMEventDispatcher.WMEventTracker"]=l._WMEventDispatcher.WMEventTracker;l._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","events","_WMEventDispatcher",
"WMEventTracker"];l._WMEventDispatcher.WMEventTracker.prototype={dispose:function(){this._signal=null;for(var a=0,b=this._signalConnection;a<b.length;){var d=b[a];++a;d.dispose()}this._signalConnection=null},isEmtpy:function(){return null==this._signal._head},dispatchEvent:function(a){this._signal.emit1(a)},removeEventListener:function(a){for(var b=this._signalConnection.length;0<b;)b--,K.compareMethods(this._signalConnection[b]._getListener(),a)&&(this._signalConnection[b].dispose(),this._signalConnection.splice(b,
1))},addEventListener:function(a){this._signalConnection.push(new l._WMEventDispatcher.SignalTracker(a,this._signal.connect(a)))},__class__:l._WMEventDispatcher.WMEventTracker};l._WMEventDispatcher.SignalTracker=function(a,b){this._function=a;this._connection=b};k["com.workinman.events._WMEventDispatcher.SignalTracker"]=l._WMEventDispatcher.SignalTracker;l._WMEventDispatcher.SignalTracker.__name__=["com","workinman","events","_WMEventDispatcher","SignalTracker"];l._WMEventDispatcher.SignalTracker.prototype=
{_getListener:function(){return this._function},dispose:function(){this._function=null;this._connection.dispose();this._connection=null},__class__:l._WMEventDispatcher.SignalTracker,__properties__:{get_listener:"_getListener"}};l.WMEventFlow=function(a,b){null==b&&(b=!1);this.flowId=a;this.targetScreen=b;l.WMEvent.call(this,l.WMEventFlow.EVENT_FLOW)};k["com.workinman.events.WMEventFlow"]=l.WMEventFlow;l.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];l.WMEventFlow.__super__=l.WMEvent;
l.WMEventFlow.prototype=v(l.WMEvent.prototype,{__class__:l.WMEventFlow});l.WMEventInput=function(a,b,d,n){l.WMEvent.call(this,l.WMEventInput.EVENT_INPUT);this.phase=a;this.input=b;this.x=d;this.y=n};k["com.workinman.events.WMEventInput"]=l.WMEventInput;l.WMEventInput.__name__=["com","workinman","events","WMEventInput"];l.WMEventInput.__super__=l.WMEvent;l.WMEventInput.prototype=v(l.WMEvent.prototype,{__class__:l.WMEventInput});l.WMEventInterfaceChange=function(a,b,d){null==b&&(b="");this.flowId=a;
this.screenId=b;null==d&&(d=new G);this.customData=d;l.WMEvent.call(this,l.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT)};k["com.workinman.events.WMEventInterfaceChange"]=l.WMEventInterfaceChange;l.WMEventInterfaceChange.__name__=["com","workinman","events","WMEventInterfaceChange"];l.WMEventInterfaceChange.__super__=l.WMEvent;l.WMEventInterfaceChange.prototype=v(l.WMEvent.prototype,{__class__:l.WMEventInterfaceChange});l.WMEventScreenOut=function(a,b){this.flowId=a;this.screenId=b;l.WMEvent.call(this,
l.WMEventScreenOut.EVENT_SCREEN_OUTPUT)};k["com.workinman.events.WMEventScreenOut"]=l.WMEventScreenOut;l.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];l.WMEventScreenOut.__super__=l.WMEvent;l.WMEventScreenOut.prototype=v(l.WMEvent.prototype,{__class__:l.WMEventScreenOut});l.WMEventUpdate=function(a){l.WMEvent.call(this,l.WMEventUpdate.EVENT_UPDATE);this._dt=a};k["com.workinman.events.WMEventUpdate"]=l.WMEventUpdate;l.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];
l.WMEventUpdate.__super__=l.WMEvent;l.WMEventUpdate.prototype=v(l.WMEvent.prototype,{getDt:function(){return this._dt},__class__:l.WMEventUpdate,__properties__:v(l.WMEvent.prototype.__properties__,{get_dt:"getDt"})});i={};i.WorkinCamera=function(a,b){this._screenCenterX=a;this._screenCenterY=b;this._pos=new i.WorkinPoint(a,b)};k["com.workinman.math.WorkinCamera"]=i.WorkinCamera;i.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];i.WorkinCamera.prototype={_getScreenCenterY:function(){return this._screenCenterY},
_getScreenCenterX:function(){return this._screenCenterX},_getPos:function(){return this._pos},dispose:function(){this._pos=null},__class__:i.WorkinCamera,__properties__:{get_pos:"_getPos",get_screenCenterX:"_getScreenCenterX",get_screenCenterY:"_getScreenCenterY"}};i.WorkinLine=function(a,b){this._p0=a.copy();this._p1=b.copy();this._calcProperties()};k["com.workinman.math.WorkinLine"]=i.WorkinLine;i.WorkinLine.__name__=["com","workinman","math","WorkinLine"];i.WorkinLine.prototype={_calcProperties:function(){this._length=
Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector=new i.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._slope=this._vector.y/this._vector.x;0==this._getVector().x&&(this._slope=1E5);this._yIntercept=this._getP0().y-this._slope*this._getP0().x;this._parametricDenom=new i.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._normal=this._vector.pseudoCross();
this._normal.normalize()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties()},copy:function(){return new i.WorkinLine(this._p0,this._p1)},_setLength:function(a){if(0==this._getLength())return this._length;this._p1=new i.WorkinPoint(this._p0.x+this._vector.x*(a/this._getLength()),this._p0.y+this._vector.y*(a/this._getLength()));this._calcProperties();
return this._length},_getLength:function(){return this._length},_getParametricDenom:function(){return this._parametricDenom},_getCenterY:function(){return this._p0.y+this._vector.y/2},_getCenterX:function(){return this._p0.x+this._vector.x/2},_getCenter:function(){return new i.WorkinPoint(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2)},_getVector:function(){return this._vector},_getNormal:function(){return this._normal},_getYIntercept:function(){return this._yIntercept},_getSlope:function(){return this._slope},
_getP1:function(){return this._p1},_getP0:function(){return this._p0},dispose:function(){this._parametricDenom=this._vector=this._normal=this._p1=this._p0=null},__class__:i.WorkinLine,__properties__:{get_p0:"_getP0",get_p1:"_getP1",get_vector:"_getVector",set_length:"_setLength",get_length:"_getLength"}};i.WorkinPoint=function(a,b,d){null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.x=Math.round(1E3*a)/1E3;this.y=Math.round(1E3*b)/1E3;this.z=Math.round(1E3*d)/1E3;this.calculateLength()};k["com.workinman.math.WorkinPoint"]=
i.WorkinPoint;i.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];i.WorkinPoint.prototype={_getNormalizedMagnitude:function(){var a=this.normalizeCopy();return Math.sqrt(a.x*a.x+a.y*a.y)},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pseudoCross:function(){return new i.WorkinPoint(this.y,-this.x,this.z)},normalizeCopy:function(){return 0==this._length?new i.WorkinPoint(0,0,0):new i.WorkinPoint(this.x/this._length,this.y/this._length,this.z/
this._length)},normalize:function(){0!=this._length&&(this.x/=this._length,this.y/=this._length,this.z/=this._length,this.calculateLength())},_setLength:function(a){if(0==this._length||0>=a)return this.to(0,0),this._length;this.multiply(a/this._length);return this._length},_getLength:function(){return this._length},copy:function(){return new i.WorkinPoint(this.x,this.y,this.z)},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;this.clean();this.calculateLength()},subtractPoint:function(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.calculateLength()},toPoint:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.calculateLength()},to:function(a,b,d){null==d&&(d=0);this.x=a;this.y=b;this.z=d;this.calculateLength()},clean:function(){this.x=Math.round(1E3*this.x)/1E3;this.y=Math.round(1E3*this.y)/1E3;this.z=Math.round(1E3*this.z)/1E3},_getAngle:function(){return 180*Math.atan2(this.y,this.x)/Math.PI},__class__:i.WorkinPoint};i.tween={};i.tween.PennerEasing=function(){};k["com.workinman.math.tween.PennerEasing"]=
i.tween.PennerEasing;i.tween.PennerEasing.__name__=["com","workinman","math","tween","PennerEasing"];i.tween.PennerEasing.easeInQuad=function(a,b,d,n){return d*(a/=n)*a+b};i.tween.PennerEasing.easeOutQuad=function(a,b,d,n){return-d*(a/=n)*(a-2)+b};i.tween.PennerEasing.easeInOutQuad=function(a,b,d,n){return 1>(a/=n/2)?d/2*a*a+b:-d/2*(--a*(a-2)-1)+b};i.tween.PennerEasing.easeInExpo=function(a,b,d,n){return 0==a?b:d*Math.pow(2,10*(a/n-1))+b};i.tween.PennerEasing.easeOutExpo=function(a,b,d,n){return a==
n?b+d:d*(-Math.pow(2,-10*a/n)+1)+b};i.tween.PennerEasing.easeInOutExpo=function(a,b,d,n){return 0==a?b:a==n?b+d:1>(a/=n/2)?d/2*Math.pow(2,10*(a-1))+b:d/2*(-Math.pow(2,-10*--a)+2)+b};i.tween.PennerEasing.easeInElastic=function(a,b,d,n){return i.tween.PennerEasing.easeInElasticL(a,b,d,n)};i.tween.PennerEasing.easeInElasticL=function(a,b,d,n,c,e){null==e&&(e=-0.123456);null==c&&(c=-0.123456);if(0==a)return b;if(1==(a/=n))return b+d;-0.123456==e&&(e=0.3*n);-0.123456==c||c<Math.abs(d)?(c=d,d=e/4):d=e/
(2*Math.PI)*Math.asin(d/c);return-(c*Math.pow(2,10*(a-=1))*Math.sin((a*n-d)*2*Math.PI/e))+b};i.tween.PennerEasing.easeOutElastic=function(a,b,d,n){return i.tween.PennerEasing.easeOutElasticL(a,b,d,n)};i.tween.PennerEasing.easeOutElasticL=function(a,b,d,n,c,e){null==e&&(e=-0.123456);null==c&&(c=-0.123456);var f;if(0==a)return b;if(1==(a/=n))return b+d;-0.123456==e&&(e=0.3*n);-0.123456==c||c<Math.abs(d)?(c=d,f=e/4):f=e/(2*Math.PI)*Math.asin(d/c);return c*Math.pow(2,-10*a)*Math.sin((a*n-f)*2*Math.PI/
e)+d+b};i.tween.PennerEasing.easeInOutElastic=function(a,b,d,n){return i.tween.PennerEasing.easeInOutElasticL(a,b,d,n)};i.tween.PennerEasing.easeInOutElasticL=function(a,b,d,n,c,e){null==e&&(e=-0.123456);null==c&&(c=-0.123456);var f;if(0==a)return b;if(2==(a/=n/2))return b+d;-0.123456==e&&(e=n*0.3*1.5);-0.123456==c||c<Math.abs(d)?(c=d,f=e/4):f=e/(2*Math.PI)*Math.asin(d/c);return 1>a?-0.5*c*Math.pow(2,10*(a-=1))*Math.sin((a*n-f)*2*Math.PI/e)+b:0.5*c*Math.pow(2,-10*(a-=1))*Math.sin((a*n-f)*2*Math.PI/
e)+d+b};i.tween.PennerEasing.easeInBack=function(a,b,d,n){return i.tween.PennerEasing.easeInBackL(a,b,d,n)};i.tween.PennerEasing.easeInBackL=function(a,b,d,n,c){null==c&&(c=-0.123456);-0.123456==c&&(c=1.70158);return d*(a/=n)*a*((c+1)*a-c)+b};i.tween.PennerEasing.easeInOutBack=function(a,b,d,n){return i.tween.PennerEasing.easeInOutBackL(a,b,d,n)};i.tween.PennerEasing.easeInOutBackL=function(a,b,d,n,c){null==c&&(c=-0.123456);-0.123456==c&&(c=1.70158);return 1>(a/=n/2)?d/2*a*a*(((c*=1.525)+1)*a-c)+
b:d/2*((a-=2)*a*(((c*=1.525)+1)*a+c)+2)+b};i.tween.PennerEasing.easeOutBounce=function(a,b,d,c){return(a/=c)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b};i.tween.PennerEasing.easeInBounce=function(a,b,d,c){return d-i.tween.PennerEasing.easeOutBounce(c-a,0,d,c)+b};i.tween.PennerEasing.easeInOutBounce=function(a,b,d,c){return a<c/2?0.5*i.tween.PennerEasing.easeInBounce(2*a,0,d,c)+b:0.5*i.tween.PennerEasing.easeOutBounce(2*
a-c,0,d,c)+0.5*d+b};i.tween.PennerEasing.easeInCubic=function(a,b,d,c){return d*(a/=c)*a*a+b};i.tween.PennerEasing.easeOutCubic=function(a,b,d,c){return d*((a=a/c-1)*a*a+1)+b};i.tween.PennerEasing.easeInOutCubic=function(a,b,d,c){return 1>(a/=c/2)?d/2*a*a*a+b:d/2*((a-=2)*a*a+2)+b};i.tween.PennerEasing.easeInQuart=function(a,b,d,c){return d*(a/=c)*a*a*a+b};i.tween.PennerEasing.easeOutQuart=function(a,b,d,c){return-d*((a=a/c-1)*a*a*a-1)+b};i.tween.PennerEasing.easeInOutQuart=function(a,b,d,c){return 1>
(a/=c/2)?d/2*a*a*a*a+b:-d/2*((a-=2)*a*a*a-2)+b};i.tween.PennerEasing.easeInQuint=function(a,b,d,c){return d*(a/=c)*a*a*a*a+b};i.tween.PennerEasing.easeOutQuint=function(a,b,d,c){return d*((a=a/c-1)*a*a*a*a+1)+b};i.tween.PennerEasing.easeInOutQuint=function(a,b,d,c){return 1>(a/=c/2)?d/2*a*a*a*a*a+b:d/2*((a-=2)*a*a*a*a+2)+b};i.tween.PennerEasing.easeInSine=function(a,b,d,c){return-d*Math.cos(a/c*(Math.PI/2))+d+b};i.tween.PennerEasing.easeOutSine=function(a,b,d,c){return d*Math.sin(a/c*(Math.PI/2))+
b};i.tween.PennerEasing.easeInOutSine=function(a,b,d,c){return-d/2*(Math.cos(Math.PI*a/c)-1)+b};i.tween.PennerEasing.easeInCirc=function(a,b,d,c){return-d*(Math.sqrt(1-(a/=c)*a)-1)+b};i.tween.PennerEasing.easeOutCirc=function(a,b,d,c){return d*Math.sqrt(1-(a=a/c-1)*a)+b};i.tween.PennerEasing.easeInOutCirc=function(a,b,d,c){return 1>(a/=c/2)?-d/2*(Math.sqrt(1-a*a)-1)+b:d/2*(Math.sqrt(1-(a-=2)*a)+1)+b};i.tween.PennerManager=function(){};k["com.workinman.math.tween.PennerManager"]=i.tween.PennerManager;
i.tween.PennerManager.__name__=["com","workinman","math","tween","PennerManager"];i.tween.PennerManager.getEaseFunction=function(a){switch(a){case i.tween.PennerManager.EASE_IN:case i.tween.PennerManager.EASE_QUAD_IN:return i.tween.PennerManager._tweenEaseIn;case i.tween.PennerManager.EASE_OUT:case i.tween.PennerManager.EASE_QUAD_OUT:return i.tween.PennerManager._tweenEaseOut;case i.tween.PennerManager.EASE:case i.tween.PennerManager.EASE_QUAD:return i.tween.PennerManager._tweenEaseBoth;case i.tween.PennerManager.EASE_EXPO:return i.tween.PennerManager._tweenExpoBoth;
case i.tween.PennerManager.EASE_EXPO_IN:return i.tween.PennerManager._tweenExpoIn;case i.tween.PennerManager.EASE_EXPO_OUT:return i.tween.PennerManager._tweenExpoOut;case i.tween.PennerManager.EASE_ELASTIC:return i.tween.PennerManager._tweenElasticBoth;case i.tween.PennerManager.EASE_ELASTIC_IN:return i.tween.PennerManager._tweenElasticIn;case i.tween.PennerManager.EASE_ELASTIC_OUT:return i.tween.PennerManager._tweenElasticOut;case i.tween.PennerManager.EASE_BUMP:return i.tween.PennerManager._tweenBumpBoth;
case i.tween.PennerManager.EASE_BUMP_IN:return i.tween.PennerManager._tweenBumpIn;case i.tween.PennerManager.EASE_BUMP_OUT:return i.tween.PennerManager._tweenBumpBoth;case i.tween.PennerManager.EASE_BOUNCE:return i.tween.PennerManager._tweenBounceBoth;case i.tween.PennerManager.EASE_BOUNCE_IN:return i.tween.PennerManager._tweenBounceIn;case i.tween.PennerManager.EASE_BOUNCE_OUT:return i.tween.PennerManager._tweenBounceOut;case i.tween.PennerManager.EASE_CUBIC:return i.tween.PennerManager._tweenCubicBoth;
case i.tween.PennerManager.EASE_CUBIC_IN:return i.tween.PennerManager._tweenCubicIn;case i.tween.PennerManager.EASE_CUBIC_OUT:return i.tween.PennerManager._tweenCubicOut;case i.tween.PennerManager.EASE_SPACE:return i.tween.PennerManager._tweenSpaceBoth;case i.tween.PennerManager.EASE_SPACE_IN:return i.tween.PennerManager._tweenSpaceIn;case i.tween.PennerManager.EASE_SPACE_OUT:return i.tween.PennerManager._tweenSpaceOut;case i.tween.PennerManager.EASE_BLAST:return i.tween.PennerManager._tweenBlastBoth;
case i.tween.PennerManager.EASE_BLAST_IN:return i.tween.PennerManager._tweenBlastIn;case i.tween.PennerManager.EASE_BLAST_OUT:return i.tween.PennerManager._tweenBlastOut;case i.tween.PennerManager.EASE_WAVE:return i.tween.PennerManager._tweenWaveBoth;case i.tween.PennerManager.EASE_WAVE_IN:return i.tween.PennerManager._tweenWaveIn;case i.tween.PennerManager.EASE_WAVE_OUT:return i.tween.PennerManager._tweenWaveOut;case i.tween.PennerManager.EASE_CIRCLE:return i.tween.PennerManager._tweenCircleBoth;
case i.tween.PennerManager.EASE_CIRCLE_IN:return i.tween.PennerManager._tweenCircleIn;case i.tween.PennerManager.EASE_CIRCLE_OUT:return i.tween.PennerManager._tweenCircleOut;case i.tween.PennerManager.EASE_LINEAR:return i.tween.PennerManager._tweenLinear;default:return i.tween.PennerManager._tweenLinear}};i.tween.PennerManager._tweenLinear=function(a,b,d,c){return a+d/c*b};i.tween.PennerManager._tweenEaseBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutQuad(d,a,b,c)};i.tween.PennerManager._tweenEaseIn=
function(a,b,d,c){return i.tween.PennerEasing.easeInQuad(d,a,b,c)};i.tween.PennerManager._tweenEaseOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutQuad(d,a,b,c)};i.tween.PennerManager._tweenExpoBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutExpo(d,a,b,c)};i.tween.PennerManager._tweenExpoIn=function(a,b,d,c){return i.tween.PennerEasing.easeInExpo(d,a,b,c)};i.tween.PennerManager._tweenExpoOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutExpo(d,a,b,c)};i.tween.PennerManager._tweenElasticBoth=
function(a,b,d,c){return i.tween.PennerEasing.easeInOutElastic(d,a,b,c)};i.tween.PennerManager._tweenElasticIn=function(a,b,d,c){return i.tween.PennerEasing.easeInElastic(d,a,b,c)};i.tween.PennerManager._tweenElasticOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutElastic(d,a,b,c)};i.tween.PennerManager._tweenBumpBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutBack(d,a,b,c)};i.tween.PennerManager._tweenBumpIn=function(a,b,d,c){return i.tween.PennerEasing.easeInBack(d,a,b,c)};i.tween.PennerManager._tweenBounceBoth=
function(a,b,d,c){return i.tween.PennerEasing.easeInOutBounce(d,a,b,c)};i.tween.PennerManager._tweenBounceIn=function(a,b,d,c){return i.tween.PennerEasing.easeInBounce(d,a,b,c)};i.tween.PennerManager._tweenBounceOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutBounce(d,a,b,c)};i.tween.PennerManager._tweenCubicBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutCubic(d,a,b,c)};i.tween.PennerManager._tweenCubicIn=function(a,b,d,c){return i.tween.PennerEasing.easeInCubic(d,a,b,c)};i.tween.PennerManager._tweenCubicOut=
function(a,b,d,c){return i.tween.PennerEasing.easeOutCubic(d,a,b,c)};i.tween.PennerManager._tweenSpaceBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutQuart(d,a,b,c)};i.tween.PennerManager._tweenSpaceIn=function(a,b,d,c){return i.tween.PennerEasing.easeInQuart(d,a,b,c)};i.tween.PennerManager._tweenSpaceOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutQuart(d,a,b,c)};i.tween.PennerManager._tweenBlastBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutQuint(d,a,b,c)};i.tween.PennerManager._tweenBlastIn=
function(a,b,d,c){return i.tween.PennerEasing.easeInQuint(d,a,b,c)};i.tween.PennerManager._tweenBlastOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutQuint(d,a,b,c)};i.tween.PennerManager._tweenWaveBoth=function(a,b,d,c){return i.tween.PennerEasing.easeInOutSine(d,a,b,c)};i.tween.PennerManager._tweenWaveIn=function(a,b,d,c){return i.tween.PennerEasing.easeInSine(d,a,b,c)};i.tween.PennerManager._tweenWaveOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutSine(d,a,b,c)};i.tween.PennerManager._tweenCircleBoth=
function(a,b,d,c){return i.tween.PennerEasing.easeInOutCirc(d,a,b,c)};i.tween.PennerManager._tweenCircleIn=function(a,b,d,c){return i.tween.PennerEasing.easeInCirc(d,a,b,c)};i.tween.PennerManager._tweenCircleOut=function(a,b,d,c){return i.tween.PennerEasing.easeOutCirc(d,a,b,c)};i.tween.WorkinTweener=function(){this._targets=[]};k["com.workinman.math.tween.WorkinTweener"]=i.tween.WorkinTweener;i.tween.WorkinTweener.__name__=["com","workinman","math","tween","WorkinTweener"];i.tween.WorkinTweener.__properties__=
{get_instance:"_getInstance"};i.tween.WorkinTweener._getInstance=function(){null==i.tween.WorkinTweener._instance&&(i.tween.WorkinTweener._instance=new i.tween.WorkinTweener);return i.tween.WorkinTweener._instance};i.tween.WorkinTweener.prototype={tween:function(a,b,d,c){null==c&&(c=!1);for(var b=new i.tween._WorkinTweener.WorkinTweenDef(a,b,d),d=!1,e=0,f=this._targets;e<f.length;){var g=f[e];++e;g._getTarget()==a&&(d=!0,c&&g.clearTweens(),g.addTween(b))}!1==d&&(a=new i.tween._WorkinTweener.WorkinTweenTracker(a),
this._targets.push(a),a.addTween(b));return b},update:function(a){for(var b=this._targets.length;0<b;)b--,this._targets[b].update(a),this._targets[b]._getIsComplete()&&(this._targets[b].dispose(),this._targets.splice(b,1))},__class__:i.tween.WorkinTweener};i.tween._WorkinTweener={};i.tween._WorkinTweener.WorkinTweenTracker=function(a){this._target=a;this._tweens=[];this._isComplete=!1};k["com.workinman.math.tween._WorkinTweener.WorkinTweenTracker"]=i.tween._WorkinTweener.WorkinTweenTracker;i.tween._WorkinTweener.WorkinTweenTracker.__name__=
"com,workinman,math,tween,_WorkinTweener,WorkinTweenTracker".split(",");i.tween._WorkinTweener.WorkinTweenTracker.prototype={addTween:function(a){this._tweens.push(a)},clearTweens:function(){for(var a=0,b=this._tweens;a<b.length;){var d=b[a];++a;d._setIsComplete(!0)}},_setIsComplete:function(a){return this._isComplete=a},_getIsComplete:function(){return this._isComplete},_getTarget:function(){return this._target},update:function(a){for(var b=this._tweens.length;0<b;)b--,this._tweens[b].update(a),
this._tweens[b]._getIsComplete()&&(this._tweens[b].dispose(),this._tweens.splice(b,1));1>this._tweens.length&&(this._isComplete=!0)},dispose:function(){this._target=null;for(var a=0,b=this._tweens;a<b.length;){var d=b[a];++a;d.dispose()}this._tweens=null},__class__:i.tween._WorkinTweener.WorkinTweenTracker,__properties__:{get_target:"_getTarget",set_isComplete:"_setIsComplete",get_isComplete:"_getIsComplete"}};i.tween._WorkinTweener.WorkinTweenDef=function(a,b,d){this._target=a;this._duration=b;this._delay=
0;this._dest=d;this._easeFunction=i.tween.PennerManager.getEaseFunction(i.tween.PennerManager.EASE_LINEAR);this._isComplete=!1;this._completionArgs=this._completionHandler=null;this._progress=0;this._origin={};a=0;for(b=K.fields(this._dest);a<b.length;)d=b[a],++a,null!=K.field(this._target,d)&&(this._origin[d]=K.field(this._target,d))};k["com.workinman.math.tween._WorkinTweener.WorkinTweenDef"]=i.tween._WorkinTweener.WorkinTweenDef;i.tween._WorkinTweener.WorkinTweenDef.__name__="com,workinman,math,tween,_WorkinTweener,WorkinTweenDef".split(",");
i.tween._WorkinTweener.WorkinTweenDef.prototype={onComplete:function(a,b){null==b&&(b=[]);this._completionHandler=a;this._completionArgs=b;return this},ease:function(a){this._easeFunction=i.tween.PennerManager.getEaseFunction(a);return this},_setIsComplete:function(a){return this._isComplete=a},_getIsComplete:function(){return this._isComplete},update:function(a){if(0<this._delay&&(this._delay-=a,0<this._delay))return;this._progress+=a;this._progress>this._duration&&(this._progress=this._duration);
this.ratio=this._progress/this._duration;for(var b=0,d=K.fields(this._dest);b<d.length;){var c=d[b];++b;a=K.field(this._dest,c)-K.field(this._origin,c);this._target[c]=this._easeFunction(K.field(this._origin,c),a,this._progress,this._duration)}this._progress>=this._duration&&(null!=this._completionHandler&&this._completionHandler.apply(this._completionHandler,this._completionArgs),this._isComplete=!0)},dispose:function(){this._dest=this._target=this._origin=null},__class__:i.tween._WorkinTweener.WorkinTweenDef,
__properties__:{set_isComplete:"_setIsComplete",get_isComplete:"_getIsComplete"}};R={WMSharedObject:function(){l.WMEventDispatcher.call(this);this._data={};this.sharedKey=""}};k["com.workinman.net.WMSharedObject"]=R.WMSharedObject;R.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];R.WMSharedObject.getLocalStorage=function(){return B.window.localStorage};R.WMSharedObject.getLocal=function(a,b){var d=B.window.location.href;null==b&&(b=d);d=new R.WMSharedObject;d.sharedKey=b+":"+a;
var c=R.WMSharedObject.getLocalStorage().getItem(d.sharedKey);d._setData(""==c||null==c?{}:P.run(c));return d};R.WMSharedObject.__super__=l.WMEventDispatcher;R.WMSharedObject.prototype=v(l.WMEventDispatcher.prototype,{flush:function(){var a=S.run(this._getData());R.WMSharedObject.getLocalStorage().setItem(this.sharedKey,a);return R.SharedObjectFlushedStatus.FLUSHED},_setData:function(a){return this._data=a},_getData:function(){return this._data},dispose:function(){this._data=null;l.WMEventDispatcher.prototype.dispose.call(this)},
__class__:R.WMSharedObject,__properties__:{set_data:"_setData",get_data:"_getData"}});R.SharedObjectFlushedStatus=function(){};k["com.workinman.net.SharedObjectFlushedStatus"]=R.SharedObjectFlushedStatus;R.SharedObjectFlushedStatus.__name__=["com","workinman","net","SharedObjectFlushedStatus"];r={ServiceAnalytics:function(){}};k["com.workinman.services.ServiceAnalytics"]=r.ServiceAnalytics;r.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];r.ServiceAnalytics.onAnalyticsLoad=
function(){r.ServiceAnalytics._flagLoaded||(f.WorkinCloud.instance.log("[ServiceAnalytics](onAnalyticsLoad) Load complete"),r.ServiceAnalytics._flagLoaded=!0,T.delay(r.ServiceAnalytics._runQueuedCommands,1E3))};r.ServiceAnalytics.init=function(a,b){null==b&&(b="");r.ServiceAnalytics._flagInitted=!0;r.ServiceAnalytics._queuedCommands=[];"x"==a.toLowerCase()&&(r.ServiceAnalytics.OPTION_ENABLE_TRACKING=!1);r.ServiceAnalytics.OPTION_ENABLE_TRACKING&&(""==b&&(b=r.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID),
r.ServiceAnalytics._flagStarted=!1,f.WorkinCloud.instance.log("[ServiceAnalytics](initAnalytics)"),r.ServiceAnalytics._appId=a,r.ServiceAnalytics._sharedObjectId=b,r.ServiceAnalytics._sharedObjectData=f.WorkinCloud.instance.sharedObjectGetData(r.ServiceAnalytics._sharedObjectId),r.ServiceAnalytics._generateSessionID(),null==r.ServiceAnalytics._sharedObjectData.userID||14>q.string(r.ServiceAnalytics._sharedObjectData.userID).length?(r.ServiceAnalytics._generateOfflineIDs(),r.ServiceAnalytics._sharedObjectData.userID=
r.ServiceAnalytics._offlineUserId,r.ServiceAnalytics._sharedObjectData.trackingID=r.ServiceAnalytics._offlineTrackingId,f.WorkinCloud.instance.sharedObjectSetData(r.ServiceAnalytics._sharedObjectId,r.ServiceAnalytics._sharedObjectData)):(r.ServiceAnalytics._offlineUserId=r.ServiceAnalytics._sharedObjectData.userID,r.ServiceAnalytics._offlineTrackingId=r.ServiceAnalytics._sharedObjectData.trackingID),eval("\t\t\t\t\n\t\t\t\twindow._pnConfig = new Array();\n\t\t\t\twindow._pnConfig['userId'] = '"+r.ServiceAnalytics._offlineUserId+
"';\n\t\t\t\t\n\t\t\t\tvar _pnAPIURL = document.location.protocol + '//js.a.playnomics.net/v1/api?a="+r.ServiceAnalytics._appId+"';\n\t\t\t\tvar _pnAPI = document.createElement('script');\t\t\t\t\n\t\t\t\t_pnAPI.type = 'text/javascript'; \n\t\t\t\t_pnAPI.async = false; \n\t\t\t\t_pnAPI.src = _pnAPIURL;\n\t\t\t\twindow.pnCallbackReference = _pnAPI;\t\t\t\t\n\t\t\t"),eval("window.pnCallbackReference").addEventListener("load",r.ServiceAnalytics.onAnalyticsLoad,!1),eval("document.body.appendChild(window.pnCallbackReference);"),
r.ServiceAnalytics.sendUserInfo(),r.ServiceAnalytics.sendMilestone("custom1"))};r.ServiceAnalytics._runQueuedCommands=function(){for(;0<r.ServiceAnalytics._queuedCommands.length;)r.ServiceAnalytics.sendPlaynomicsEvent(r.ServiceAnalytics._queuedCommands[0].method,r.ServiceAnalytics._queuedCommands[0].params),r.ServiceAnalytics._queuedCommands.shift()};r.ServiceAnalytics.start=function(){};r.ServiceAnalytics.sendUserInfo=function(){r.ServiceAnalytics.sendPlaynomicsEvent("pnUserInfo",["update",null,
null,"","","html5"])};r.ServiceAnalytics.sendMilestone=function(a){r.ServiceAnalytics.sendPlaynomicsEvent("pnMilestone",[q.string(Math.floor(6012+999999999*Math.random())),a])};r.ServiceAnalytics.sendPlaynomicsEvent=function(a,b){if(r.ServiceAnalytics.OPTION_ENABLE_TRACKING&&r.ServiceAnalytics._flagInitted)if(r.ServiceAnalytics._flagLoaded){f.WorkinCloud.instance.log("[ServiceAnalytics](sendPlaynomicsEvent) "+a);var d,c="";for(d=0;d<b.length;)c+="'"+b[d]+"'",d++,d<b.length&&(c+=",");eval(a+"("+c+
")")}else r.ServiceAnalytics._queuedCommands.push({method:a,params:b})};r.ServiceAnalytics._generateSessionID=function(){for(var a="",b=11;-1<b;)a+=Math.floor(10*Math.random()),b--;r.ServiceAnalytics._sessionId=a};r.ServiceAnalytics._generateOfflineIDs=function(){r.ServiceAnalytics._offlineUserId="";r.ServiceAnalytics._offlineTrackingId="";for(var a=15;-1<a;){if(0.66>Math.random())r.ServiceAnalytics._offlineUserId+=q.string(Math.floor(10*Math.random()));else switch(Math.floor(10*Math.random())){case 0:r.ServiceAnalytics._offlineUserId+=
"a";break;case 1:r.ServiceAnalytics._offlineUserId+="b";break;case 2:r.ServiceAnalytics._offlineUserId+="c";break;case 3:r.ServiceAnalytics._offlineUserId+="d";break;case 4:r.ServiceAnalytics._offlineUserId+="e";break;case 5:r.ServiceAnalytics._offlineUserId+="f";break;case 6:r.ServiceAnalytics._offlineUserId+="g";break;case 7:r.ServiceAnalytics._offlineUserId+="h";break;case 8:r.ServiceAnalytics._offlineUserId+="i";break;case 9:r.ServiceAnalytics._offlineUserId+="j";break;default:r.ServiceAnalytics._offlineUserId+=
"z"}a--}r.ServiceAnalytics._offlineTrackingId="";for(a=15;-1<a;)r.ServiceAnalytics._offlineTrackingId+=Math.floor(10*Math.random()),a--};r.ServiceAnalytics.prototype={__class__:r.ServiceAnalytics};f={JSEmbedProxy:function(){}};k["com.workinman.utils.JSEmbedProxy"]=f.JSEmbedProxy;f.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];f.JSEmbedProxy.__properties__={get_isPaused:"getIsPaused",get_canvasHeight:"getCanvasHeight",get_canvasWidth:"getCanvasWidth",get_canvasScale:"getCanvasScale",
get_isCrossdomain:"getIsCrossdomain",get_base:"getBase",get_exists:"getExists"};f.JSEmbedProxy.alertOn=function(a){f.JSEmbedProxy.callJSEmbedMethod("addAlert('"+a+"', '')")};f.JSEmbedProxy.alertOff=function(){f.JSEmbedProxy.callJSEmbedMethod("removeAlert('')")};f.JSEmbedProxy.getExists=function(){return f.JSEmbedProxy.callJSEmbedMethod("exists()")};f.JSEmbedProxy.getParameters=function(){return f.JSEmbedProxy.callJSEmbedMethod("params()")};f.JSEmbedProxy.getAttributes=function(){return f.JSEmbedProxy.callJSEmbedMethod("attr()")};
f.JSEmbedProxy.getBase=function(){return f.JSEmbedProxy.callJSEmbedMethod("baseUrl()")};f.JSEmbedProxy.getIsCrossdomain=function(){return f.JSEmbedProxy.callJSEmbedMethod("isBaseCrossdomain()")};f.JSEmbedProxy.getCanvasScale=function(){return q.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasScale()"))};f.JSEmbedProxy.getCanvasWidth=function(){return q.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"))};f.JSEmbedProxy.getCanvasHeight=function(){return q.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasHeight()"))};
f.JSEmbedProxy.getIsPaused=function(){return f.JSEmbedProxy.callJSEmbedMethod("isPaused()")};f.JSEmbedProxy.pause=function(){f.JSEmbedProxy.callJSEmbedMethod("pause()")};f.JSEmbedProxy.unpause=function(){f.JSEmbedProxy.callJSEmbedMethod("unpause()")};f.JSEmbedProxy.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);return null==b?"":b}catch(d){}return""};f.JSEmbedProxy.prototype={__class__:f.JSEmbedProxy};f.WMAssetManager=function(){this._LOADING_CHANCES=3;this._baseUrl="";this._assets=new G;
this._defs=new G;this._flump=new G;this._packs=new G;this._chunks=new G;this._manifests=new G;this._flagBaseIsCrossdomain=!1;this._loadingProgress=this._loadingTotal=this._packsLoaded=this._packsMax=this._loadingChances=0;this._loadingPackProgress=new G};k["com.workinman.utils.WMAssetManager"]=f.WMAssetManager;f.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];f.WMAssetManager.prototype={getFont:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFont) no asset named "+
a+" exists! Returning null."),null):new j.Font(this._assets.get(a)._getPack(),a)},getLibrary:function(a){return!1==this._flump.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getLibrary) no library named "+a+" exists! Is it defined in config.xml?"),null):this._flump.get(a)},getSound:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[AssetManager](getSound) no asset named "+a+" exists! Returning null."),null):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():
this._assets.get(a)._getPack().getSound(this._assets.get(a)._getPath(),!0)},getXML:function(a){if(!1==this._assets.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](getXML) no asset named "+a+" exists! Returning null."),null;a=u.parse(this.getFile(a));return new C.Fast(a.firstElement())},getFile:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFile) no asset named "+a+" exists! Returning empty string."),""):this._assets.get(a)._getConstructed()?
this._assets.get(a)._getData():this._assets.get(a)._getPack().getFile(this._assets.get(a)._getPath(),!0)},getTexture:function(a){a=a.split(".")[0];return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getTexture) no asset named "+a+" exists! Returning null."),null):!0==this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getTexture(this._assets.get(a)._getPath(),!0)},hasAsset:function(a){return this._assets.exists(a)},_parseSpritesheet:function(a){for(var b=
this.getXML(a+".xml"),a=this.getTexture(a),d="",c=new I.Rectangle(0,0,0,0),e,b=b.nodes.resolve("SubTexture").iterator();b.hasNext();)e=b.next(),d=e.att.resolve("name").toString(),c.x=q.parseFloat(e.att.resolve("x").toString()),c.y=q.parseFloat(e.att.resolve("y").toString()),c.width=q.parseFloat(e.att.resolve("width").toString()),c.height=q.parseFloat(e.att.resolve("height").toString()),e=D.createTexture(c.width|0,c.height|0),e.get_graphics().drawSubImage(a,0,0,c.x|0,c.y|0,c.width|0,c.height|0),this.addConstructedAsset(d,
e)},_onAllLoadComplete:function(){f.WorkinCloud.instance.log("[WMAssetManager](_onAllLoadComplete) all packs loaded!");f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(J.ConstantsCloud.EVENT_FILES_LOADED))},addConstructedAsset:function(a,b){new f._WMAssetManager.AssetDef(a,this._assets,b)},addPack:function(a){for(var b=A.iter(a.get_manifest()._entries);b.hasNext();){var d=b.next();new f._WMAssetManager.AssetDef(d.name,this._assets,a)}},isPackLoaded:function(a){return this._packs.exists(a)},
_loadManifest:function(a,b,d,c){null==c&&(c=!0);null==d&&(d="");var e=this,g=D._platform.loadAssetPack(a);this._loadingTotal+=g._total;this._loadingPackProgress.set(b,0);g.error.connect(function(a){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed with error: "+a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEvent(J.ConstantsCloud.EVENT_FILES_ERROR));e._loadingChances--;!0==c?0<=e._loadingChances?T.delay(function(){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Retrying. With "+
e._loadingChances+" more chances.");e.loadPack(b,d,!1)},500):f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading attempts timed out."):f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed, not attempting to retry.")});g.progressChanged.connect(function(){var a=g._progress-e._loadingPackProgress.get(b);e._loadingPackProgress.set(b,g._progress);e._loadingProgress+=a;a=Math.round(100*(e._loadingProgress/e._loadingTotal));f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventData(J.ConstantsCloud.EVENT_FILES_LOADING,
{value:a}))});g.get(function(a){e.addPack(a);e._packsLoaded++;for(var d=0,c=e._defs.get(b)._getFlump();d<c.length;){var f=c[d];++d;e._flump.set(f,new w.Library(a,f))}d=0;for(c=e._defs.get(b)._getTiles();d<c.length;)f=c[d],++d,e._parseSpritesheet(f);e._packs.set(b,a);e._packsLoaded>=e._packsMax&&e._onAllLoadComplete()})},loadPack:function(a,b,d){null==d&&(d=!0);null==b&&(b="");!1==this._defs.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadPack) Can't load pack "+a+" , define the pack in config.xml.");
f.WorkinCloud.instance.log("[WMAssetManager](loadPack) "+a);d&&(this._loadingChances=this._LOADING_CHANCES,this._packsMax++);d=y.Manifest.build(a);""!=this._baseUrl&&(this._flagBaseIsCrossdomain?d.set_externalBasePath(this._baseUrl):d.set_relativeBasePath(this._baseUrl));this._loadManifest(d,a,b)},addPackDef:function(a,b,d){null==b&&(b=[]);null==d&&(d=[]);this._defs.set(a,new f._WMAssetManager.PackDef(a,b,d))},_parseChunk:function(a,b){for(var d=[],c=[],e=b.nodes.resolve("chunk").iterator();e.hasNext();){var g=
e.next();d.push(g.getInnerData().toString())}for(e=b.nodes.resolve("pack").iterator();e.hasNext();)g=e.next(),c.push(g.getInnerData().toString());return new f._WMAssetManager.ChunkDef(a,c,d)},loadFolder:function(a){f.WorkinCloud.instance.log("[WMAssetManager](loadFolder) "+a);this.isPackLoaded(a)||(this.addPackDef(a),this.loadPack(a))},loadChunk:function(a){!1==this._chunks.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadChunk) No chunk named "+a+" defined.");for(var b=0,d=this._chunks.get(a)._getChunks();b<
d.length;){var c=d[b];++b;this.loadChunk(c)}this._packsLoaded>=this._packsMax&&(this._loadingProgress=this._loadingTotal=0,f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventData(J.ConstantsCloud.EVENT_FILES_LOADING,{value:0})));b=0;for(d=this._chunks.get(a)._getPacks();b<d.length;)c=d[b],++b,!1==this.isPackLoaded(c)&&this.loadPack(c)},isChunkLoaded:function(a){if(!1==this._chunks.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](isChunkLoaded) No chunk named "+a+" defined."),
!1;for(var b=0,a=this._chunks.get(a)._getPacks();b<a.length;){var d=a[b];++b;if(!1==this.isPackLoaded(d))return!1}return!0},addChunk:function(a,b){var d=this._parseChunk(a,b);this._chunks.set(a,d)},setCrossdomainBaseUrl:function(a){this._flagBaseIsCrossdomain=!0;this._setBaseUrl(a)},_setBaseUrl:function(a){this._baseUrl=a;f.WorkinCloud.instance.log("[WMAssetManager](setBaseUrl) Base Url set to '"+a+"'");return this._baseUrl},_getBaseUrl:function(){return this._baseUrl},__class__:f.WMAssetManager,
__properties__:{set_baseUrl:"_setBaseUrl",get_baseUrl:"_getBaseUrl"}};f._WMAssetManager={};f._WMAssetManager.AssetDef=function(a,b,d){this._path=a;a=a.split("/");this._id=a[a.length-1].split(".")[0];this._constructed=!1;this._data=this._pack=null;x.__instanceof(d,y.AssetPack)?this._pack=d:(this._constructed=!0,this._data=d);this._hash=b;this._hash.set(this._path,this);this._path!=this._path.split(".")[0]&&this._hash.set(this._path.split(".")[0],this);this._path!=this._id&&this._hash.set(this._id,
this)};k["com.workinman.utils._WMAssetManager.AssetDef"]=f._WMAssetManager.AssetDef;f._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];f._WMAssetManager.AssetDef.prototype={_getPack:function(){return this._pack},_getPath:function(){return this._path},_getData:function(){return this._data},_getConstructed:function(){return this._constructed},__class__:f._WMAssetManager.AssetDef,__properties__:{get_constructed:"_getConstructed",get_data:"_getData",get_path:"_getPath",
get_pack:"_getPack"}};f._WMAssetManager.PackDef=function(a,b,d){this._id=a;this._flump=b;this._tiles=d};k["com.workinman.utils._WMAssetManager.PackDef"]=f._WMAssetManager.PackDef;f._WMAssetManager.PackDef.__name__=["com","workinman","utils","_WMAssetManager","PackDef"];f._WMAssetManager.PackDef.prototype={_getTiles:function(){return this._tiles},_getFlump:function(){return this._flump},__class__:f._WMAssetManager.PackDef,__properties__:{get_flump:"_getFlump",get_tiles:"_getTiles"}};f._WMAssetManager.ChunkDef=
function(a,b,d){this._id=a;this._packs=b;this._chunks=d};k["com.workinman.utils._WMAssetManager.ChunkDef"]=f._WMAssetManager.ChunkDef;f._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];f._WMAssetManager.ChunkDef.prototype={_getChunks:function(){return this._chunks},_getPacks:function(){return this._packs},__class__:f._WMAssetManager.ChunkDef,__properties__:{get_packIds:"_getPacks",get_chunkIds:"_getChunks"}};f.WMInput=function(){this._multiTouchAvail=!1;this._keycodes=
new G;this._keydown=new G;this._touchList=new G;this._touchRemoval=[];this._keydown.set("input_click",!1);this._scale=1;this._offset=new i.WorkinPoint;this._pointer=new f.WMPointer("",0)};k["com.workinman.utils.WMInput"]=f.WMInput;f.WMInput.__name__=["com","workinman","utils","WMInput"];f.WMInput.prototype={_onPointerUp:function(a){this._keydown.set("input_click",!1);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.end(b,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(0,
"input_click",b,a))},_onPointerMove:function(a){var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.move(b,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(2,"input_click",b,a))},_onPointerDown:function(a){this._keydown.set("input_click",!0);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.begin(b,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(1,
"input_click",b,a))},_onTouchUp:function(a){var b=a.viewX/this._scale,d=a.viewY/this._scale,b=b+this._offset.x,d=d+this._offset.y;this._touchList.get(q.string(a.id)).end(b,d);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(0,"input_click",b,d))},_onTouchMove:function(a){var b=a.viewX/this._scale,d=a.viewY/this._scale,b=b+this._offset.x,d=d+this._offset.y;this._touchList.get(q.string(a.id)).move(b,d);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(2,
"input_click",b,d))},_onTouchDown:function(a){var b=0,d=!1;do for(var d=!0,c=this._touchList.iterator();c.hasNext();){var e=c.next();if(b==e._getIndex()){b++;d=!1;break}}while(!1==d);d=new f.WMPointer(q.string(a.id),b);this._touchList.set(d._getId(),d);c=a.viewX/this._scale;a=a.viewY/this._scale;c+=this._offset.x;a+=this._offset.y;d.begin(c,a);0<b&&f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(1,"input_click",c,a))},_onKeyUp:function(a){for(var b,d=this._keycodes.keys();d.hasNext();){var c=
d.next();b=this._keycodes.get(c);for(var e=0;e<b.length;){var g=b[e];++e;g==a.key&&(this._keydown.set(c,!1),f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(0,c,0,0)))}}},_onKeyDown:function(a){for(var b,d=this._keycodes.keys();d.hasNext();){var c=d.next();b=this._keycodes.get(c);for(var e=0;e<b.length;){var g=b[e];++e;g==a.key&&(this._keydown.set(c,!0),f.WorkinCloud.instance.getDispatcher().dispatchEvent(new l.WMEventInput(1,c,0,0)))}}},getInput:function(a){return this._keydown.get(a)},
registerInput:function(a,b){this._keycodes.set(a,b);this._keydown.set(a,!1)},prime:function(){this._multiTouchAvail=D._platform.getTouch().get_supported();D._platform.getKeyboard().down.connect(s(this,this._onKeyDown));D._platform.getKeyboard().up.connect(s(this,this._onKeyUp));this._multiTouchAvail&&(D._platform.getTouch().down.connect(s(this,this._onTouchDown)),D._platform.getTouch().move.connect(s(this,this._onTouchMove)),D._platform.getTouch().up.connect(s(this,this._onTouchUp)));D._platform.getPointer().down.connect(s(this,
this._onPointerDown));D._platform.getPointer().move.connect(s(this,this._onPointerMove));D._platform.getPointer().up.connect(s(this,this._onPointerUp))},_getMultiTouch:function(){return this._touchList},_getPointer:function(){return this._pointer},_setOffset:function(a){return this._offset=a},_getOffset:function(){return this._offset},_setScale:function(a){this._scale=a;0==this._scale&&(this._scale=0.01);return this._scale},_getScale:function(){return this._scale},update:function(a){this._pointer.update(a);
for(var b=this._touchList.iterator();b.hasNext();){var d=b.next();d.update(a);0==d._getPhase()&&this._touchRemoval.push(d._getId())}a=0;for(b=this._touchRemoval;a<b.length;)d=b[a],++a,this._touchList.get(d).dispose(),this._touchList.remove(d);for(;0<this._touchRemoval.length;)this._touchRemoval.pop()},__class__:f.WMInput,__properties__:{set_scale:"_setScale",get_scale:"_getScale"}};f.WMPointer=function(a,b){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0;this._resetDeltaLine=
!0;this._timer=f.WMPointer._DELTA_TIMEOUT;this._id=a;this._index=b;this._origin=new i.WorkinPoint(0,0);this._current=new i.WorkinPoint(0,0);this._last=new i.WorkinPoint(0,0);this._delta=new i.WorkinPoint(0,0);this._line=new i.WorkinLine(new i.WorkinPoint(0,0),new i.WorkinPoint(0,0));this._deltaLine=this._line.copy();this._camera=new i.WorkinCamera(0,0);this._phase=l.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=!1};k["com.workinman.utils.WMPointer"]=f.WMPointer;f.WMPointer.__name__=
["com","workinman","utils","WMPointer"];f.WMPointer.prototype={update:function(a){this._resetDeltaLine=!0;this._timer-=a;0>this._timer&&(this._timer=f.WMPointer._DELTA_TIMEOUT,this._deltaLine.originToPoint(this._current))},_updateInfo:function(a,b){this._last.toPoint(this._current);this._current.to(a,b);this._current.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._current.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._delta.toPoint(this._current);this._delta.subtractPoint(this._last)},
end:function(a,b){this._phase=l.WMEventInput.PHASE_UP;this._updateInfo(a,b);this._line.endToPoint(this._current);this._swipe=this.SWIPE_NONE;this._consumed=!1},move:function(a,b){this._updateInfo(a,b);if(!1!=f.WorkinCloud.instance.getInput().getInput("input_click")){this._phase=l.WMEventInput.PHASE_MOVE;if(!1==this._consumed){var d=this._origin.x-this._current.x,c=this._origin.y-this._current.y;this._swipe=Math.abs(d)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(c)<f.WMPointer._DELTA_ALLOWANCE?0<d?this.SWIPE_LEFT:
this.SWIPE_RIGHT:Math.abs(c)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(d)<f.WMPointer._DELTA_ALLOWANCE?0<c?this.SWIPE_UP:this.SWIPE_DOWN:this.SWIPE_NONE}else this._swipe=this.SWIPE_NONE;this._line.endToPoint(this._current)}},begin:function(a,b){this._origin.to(a,b);this._origin.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._origin.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._current.toPoint(this._origin);this._last.toPoint(this._origin);this._delta.to(0,0);
this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._consumed=!1;this._phase=l.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE},_getDeltaLine:function(){if(!1==this._resetDeltaLine)return this._deltaLine;this._deltaLine.endToPoint(this._current);this._resetDeltaLine=!1;return this._deltaLine},_setIndex:function(a){return this._index=a},_getIndex:function(){return this._index},_getId:function(){return this._id},_setConsumed:function(a){return this._consumed=
a},_getConsumed:function(){return this._consumed},_getSwipe:function(){return this._swipe},_getLine:function(){return this._line},_getDeltaPos:function(){return this._delta},_getLastPos:function(){return this._last},_getCurrentPos:function(){return this._current},_getOriginPos:function(){return this._origin},_getPhase:function(){return this._phase},dispose:function(){this._delta=this._last=this._current=this._origin=null;this._line.dispose();this._line=null;this._deltaLine.dispose();this._camera=
this._deltaLine=null},__class__:f.WMPointer,__properties__:{get_phase:"_getPhase",get_id:"_getId",set_index:"_setIndex",get_index:"_getIndex"}};f.WMLocalize=function(){};k["com.workinman.utils.WMLocalize"]=f.WMLocalize;f.WMLocalize.__name__=["com","workinman","utils","WMLocalize"];f.WMLocalize.prototype={getData:function(a,b){null==b&&(b="");""==b&&(b=J.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+f.WorkinCloud.instance.getString(J.ConstantsCloud.STRING_REGION_ID)+".xml");for(var d=f.WorkinCloud.instance.getAssets().getXML(b).nodes.resolve("string").iterator();d.hasNext();){var c=
d.next();if(c.att.resolve("id")==a)return new f.WMLocalizedData(c.att.resolve("id"),c.getInnerData(),c.att.resolve("fontName"),q.parseFloat(c.att.resolve("fontScale")),q.parseFloat(c.att.resolve("offsetX")),q.parseFloat(c.att.resolve("offsetX")))}f.WorkinCloud.instance.log("[WMLocalize] ERROR: No localization data for : "+a);return new f.WMLocalizedData(a,"","",1,0,0)},__class__:f.WMLocalize};f.WMLocalizedData=function(a,b,d,c,e,f){this._id=a;this._string=b;this._fontName=d;this._scale=c;this._offsetX=
e;this._offsetY=f};k["com.workinman.utils.WMLocalizedData"]=f.WMLocalizedData;f.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];f.WMLocalizedData.prototype={_getOffsetY:function(){return this._offsetY},_getOffsetX:function(){return this._offsetX},_getScale:function(){return this._scale},_getFontName:function(){return this._fontName},_getString:function(){return this._string},_getId:function(){return this._id},__class__:f.WMLocalizedData,__properties__:{get_string:"_getString"}};
f.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._flagSystemMute=this._flagMuted=!1;this._mixer=new H.Mixer;this._sounds=[]};k["com.workinman.utils.WMSound"]=f.WMSound;f.WMSound.__name__=["com","workinman","utils","WMSound"];f.WMSound.prototype={_getMusicPlaying:function(){return this._musicPlaying},update:function(a){J.ConstantsCloud.getIsAndroid()&&null!=this._musicPlaying&&0.95<=this._musicPlaying._getPlayback().get_position()/this._musicPlaying._getSound().get_duration()&&
K.setProperty(this._musicPlaying._getPlayback(),"position",0);for(var b=0;b<this._sounds.length;){if(this._sounds[b]._getFade()==f.WMSound.FADE_OUT){if(0<this._sounds[b]._getPlayback().volume._value){var d=this._sounds[b]._getPlayback().volume;d.set__(d._value-a*this._sounds[b]._getFadeSpeed());0>=this._sounds[b]._getPlayback().volume._value&&(this._sounds[b].setFade(f.WMSound.FADE_NONE),this._sounds[b]._getPlayback().volume.set__(0))}}else this._sounds[b]._getFade()==f.WMSound.FADE_IN&&this._sounds[b]._getPlayback().volume._value<
this._sounds[b].volume&&(d=this._sounds[b]._getPlayback().volume,d.set__(d._value+a*this._sounds[b]._getFadeSpeed()),this._sounds[b]._getPlayback().volume._value>=this._sounds[b].volume&&(this._sounds[b].setFade(f.WMSound.FADE_NONE),this._sounds[b]._getPlayback().volume.set__(this._sounds[b].volume)));b++}null!=this._getMusicPlaying()&&(this._getMusicPlaying()._getFade()==f.WMSound.FADE_OUT?0<this._getMusicPlaying()._getPlayback().volume._value&&(d=this._getMusicPlaying()._getPlayback().volume,d.set__(d._value-
a*this._getMusicPlaying()._getFadeSpeed()),0>=this._getMusicPlaying()._getPlayback().volume._value&&(this._getMusicPlaying().setFade(f.WMSound.FADE_NONE),this._getMusicPlaying()._getPlayback().volume.set__(0))):this._getMusicPlaying()._getFade()==f.WMSound.FADE_IN&&this._getMusicPlaying()._getPlayback().volume._value<this._getMusicPlaying().volume&&(d=this._getMusicPlaying()._getPlayback().volume,d.set__(d._value+a*this._getMusicPlaying()._getFadeSpeed()),this._getMusicPlaying()._getPlayback().volume._value>=
this._getMusicPlaying().volume&&(this._getMusicPlaying().setFade(f.WMSound.FADE_NONE),this._getMusicPlaying()._getPlayback().volume.set__(this._getMusicPlaying().volume))))},_muteMusic:function(a){""!=this._musicId&&(a?this._musicPlaying=null:(this._musicPlaying=a=new f._WMSound.SoundDef(this._musicId,this._mixer.newSound(f.WorkinCloud.instance.getAssets().getSound(this._musicId),1),!0),a.playSound(this._musicGain)))},playMusic:function(a,b){null==b&&(b=1);if(!(J.ConstantsCloud.getIsAndroid()&&null!=
this._musicPlaying||this._musicId==a))if(this._musicId=a,this._musicGain=b,!(this.getMute()||""==a)){null!=this._musicPlaying&&this._musicPlaying.dispose();var d=new f._WMSound.SoundDef(a,this._mixer.newSound(f.WorkinCloud.instance.getAssets().getSound(this._musicId),1),!0);this._musicPlaying=d;d.playSound(b)}},_muteAllToggle:function(a){if(a){for(this._mixer.stopAll();0<this._sounds.length;)this._sounds.splice(0,1);this._muteMusic(!0)}else a||this._muteMusic(!1)},playSound:function(a,b){null==b&&
(b=1);if(!J.ConstantsCloud.getIsAndroid()&&!this.getMute()){for(var d=0;d<this._sounds.length;){if(this._sounds[d].id==a){this._sounds[d].playSound(b);return}d++}d=new f._WMSound.SoundDef(a,this._mixer.newSound(f.WorkinCloud.instance.getAssets().getSound(a),4),!1);this._sounds.push(d);d.playSound(b)}},setMute:function(a){this._flagMuted=a;this._flagSystemMute||this._muteAllToggle(this._flagMuted)},getMute:function(){return this._flagSystemMute||this._flagMuted},__class__:f.WMSound,__properties__:{get_musicPlaying:"_getMusicPlaying"}};
f._WMSound={};f._WMSound.SoundDef=function(a,b,d){null==d&&(d=!1);this.id=a;this.isMusic=d;this.volume=1;this._flagPlayed=this._flagHasSound=!1;this._sound=b;this._fade=f.WMSound.FADE_NONE;this._fadeSpeed=1};k["com.workinman.utils._WMSound.SoundDef"]=f._WMSound.SoundDef;f._WMSound.SoundDef.__name__=["com","workinman","utils","_WMSound","SoundDef"];f._WMSound.SoundDef.prototype={playSound:function(a){null==a&&(a=1);this.volume=a;this._playback=J.ConstantsCloud.getIsAndroid()?this._sound.play(a):this.isMusic?
this._sound.loop(a):this._sound.play(a)},setFade:function(a,b){null==b&&(b=1);this._fade=a;this._fadeSpeed=b},_getFadeSpeed:function(){return this._fadeSpeed},_getFade:function(){return this._fade},_setPlayback:function(a){return this._playback=a},_getPlayback:function(){return this._playback},_getSound:function(){return this._sound},dispose:function(){this._playback.dispose();this._playback=null},__class__:f._WMSound.SoundDef,__properties__:{get_sound:"_getSound",set_playback:"_setPlayback",get_playback:"_getPlayback",
get_fade:"_getFade",get_fadeSpeed:"_getFadeSpeed"}};H={Mixer:function(){this._sounds=[]}};k["flambe.sound.Mixer"]=H.Mixer;H.Mixer.__name__=["flambe","sound","Mixer"];H.Mixer.__super__=L;H.Mixer.prototype=v(L.prototype,{onRemoved:function(){this.stopAll();this._sounds=[]},stopAll:function(){for(var a=0,b=this._sounds;a<b.length;){var d=b[a];++a;d.dispose()}},newSound:function(a,b){null==b&&(b=2147483647);var d=new H._Mixer.MixerSound(a,b);this._sounds.push(d);return d},get_name:function(){return"Mixer_2"},
__class__:H.Mixer});f.WorkinCloud=function(){this._values=new G;this._defaults=new G;this._localize=new f.WMLocalize;this._dispatcher=new l.WMEventDispatcher;this._input=new f.WMInput;this._assets=new f.WMAssetManager;this._sound=new f.WMSound};k["com.workinman.utils.WorkinCloud"]=f.WorkinCloud;f.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];f.WorkinCloud.prototype={_updateDisplays:function(a){this._dispatcher.dispatchEvent(new l.WMEventData(o.Display.EVENT_UPDATE_DISPLAY,{valueID:a}))},
sharedObjectSetData:function(a,b){var d=R.WMSharedObject.getLocal(a);d._setData(b);d.flush();d.dispose()},sharedObjectGetData:function(a){var a=R.WMSharedObject.getLocal(a),b=a._getData();a.dispose();return b},resetValue:function(a){this._values.set(a,this._defaults.get(a));this._updateDisplays(a)},modifyValue:function(a,b){null==b&&(b=1);this._values.set(a,this.getFloat(a)+b);this._updateDisplays(a);return this.getFloat(a)},setValue:function(a,b){this._values.set(a,b);!1==this._defaults.exists(a)&&
this.setDefault(a,b);this._updateDisplays(a)},getValue:function(a){return this._values.get(a)},setDefault:function(a,b){this._defaults.set(a,b);this.resetValue(a)},getString:function(a){return this._values.get(a)},setString:function(a,b){this.setValue(a,b)},getInt:function(a){return this._values.get(a)},modifyInt:function(a,b){return Math.floor(this.modifyValue(a,b))},setInt:function(a,b){this.setValue(a,b)},getFloat:function(a){return this._values.get(a)},modifyFloat:function(a,b){return this.modifyValue(a,
b)},setFloat:function(a,b){this.setValue(a,b)},getBool:function(a){return this._values.get(a)},setBool:function(a,b){this.setValue(a,b)},_getSound:function(){return this._sound},getAssets:function(){return this._assets},getInput:function(){return this._input},getDispatcher:function(){return this._dispatcher},_getLocalize:function(){return this._localize},log:function(){null},__class__:f.WorkinCloud,__properties__:{get_localize:"_getLocalize",get_dispatcher:"getDispatcher",get_input:"getInput",get_assets:"getAssets",
get_sound:"_getSound"}};f.WorkinUtils=function(){};k["com.workinman.utils.WorkinUtils"]=f.WorkinUtils;f.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];f.WorkinUtils.getRandom=function(a,b,d){null==d&&(d=!0);var c=Math.random();1==c&&(c=0.99);return d?a+Math.floor(c*(b+1-a)):a+c*(b-a)};O=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};k["flambe.Entity"]=O;O.__name__=["flambe","Entity"];O.__interfaces__=[m.Disposable];O.prototype={dispose:function(){for(null!=
this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var c=d.next;if(d==a){null==b?this.firstChild=c:b.next=c;d.parent=null;d.next=null;break}b=d;d=c}},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var d=null,c=this.firstChild;null!=
c;)d=c,c=c.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var c=d.next;if(d==a){null==b?this.firstComponent=c:b._internal_init(this,c);delete this._compMap[d.get_name()];d.onRemoved();d._internal_init(null,null);break}b=d;d=c}},add:function(a){var b=a.get_name(),d=this._compMap[b];null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=this.firstComponent;null!=d;)b=d,d=d.next;null!=
b?b.next=a:this.firstComponent=a;a._internal_init(this,null);a.onAdded();return this},__class__:O};m.PackageLog=function(){};k["flambe.util.PackageLog"]=m.PackageLog;m.PackageLog.__name__=["flambe","util","PackageLog"];g={Platform:function(){}};k["flambe.platform.Platform"]=g.Platform;g.Platform.__name__=["flambe","platform","Platform"];g.Platform.prototype={__class__:g.Platform};g.html={};g.html.HtmlPlatform=function(){};k["flambe.platform.html.HtmlPlatform"]=g.html.HtmlPlatform;g.html.HtmlPlatform.__name__=
["flambe","platform","html","HtmlPlatform"];g.html.HtmlPlatform.__interfaces__=[g.Platform];g.html.HtmlPlatform.prototype={getY:function(a,b){return this._stage.scaleFactor*(a.clientY-b.top)},getX:function(a,b){return this._stage.scaleFactor*(a.clientX-b.left)},getTempGraphics:function(){return this._tempGraphics},getTempCanvas:function(){return this._tempCanvas},getRenderer:function(){return this._renderer},getExternal:function(){null==this._external&&(this._external=new g.html.HtmlExternal);return this._external},
getWeb:function(){null==this._web&&(this._web=new g.html.HtmlWeb(this._container));return this._web},getKeyboard:function(){return this._keyboard},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer))},getTime:function(){return Date.now()/1E3},createLogHandler:function(){return null},
getLocale:function(){return B.window.navigator.language},getStorage:function(){if(null==this._storage){var a=null;try{a=B.window.localStorage}catch(b){}this._storage=null!=a?new g.html.HtmlStorage(a):new g.DummyStorage}return this._storage},getStage:function(){return this._stage},loadAssetPack:function(a){return(new g.html.HtmlAssetPackLoader(this,a)).promise},init:function(){var a=this,b=null;try{b=B.window.flambe.canvas}catch(d){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.setAttribute("moz-opaque",
"true");this._stage=new g.html.HtmlStage(b);this._pointer=new g.BasicPointer;this._mouse=new g.html.HtmlMouse(this._pointer,b);this._keyboard=new g.BasicKeyboard;this._tempCanvas=g.html.HtmlUtil.createCanvas(b);this._tempGraphics=new g.html.CanvasGraphics(this._tempCanvas);this._renderer=new g.html.CanvasRenderer(b);D.hasGPU.set__(!0);this.mainLoop=new g.MainLoop;this._container=b.parentNode;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction=
"none";var c=0,e=function(d){if(!(1E3>d.timeStamp-c)){var e=b.getBoundingClientRect(),f=a.getX(d,e),e=a.getY(d,e);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),a._mouse.submitDown(f,e,d.button),d.target.focus());break;case "mousemove":a._mouse.submitMove(f,e);break;case "mouseup":a._mouse.submitUp(f,e,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,e,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",
e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);if("ontouchstart"in window){var f=new g.BasicTouch(this._pointer);this._touch=f;e=function(b){var d=b.changedTouches,e=b.target.getBoundingClientRect();c=b.timeStamp;switch(b.type){case "touchstart":b.preventDefault();g.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&g.html.HtmlUtil.hideMobileBrowser();for(b=0;b<d.length;){var h=d[b];++b;
var i=a.getX(h,e),fa=a.getY(h,e);f.submitDown(h.identifier|0,i,fa)}break;case "touchmove":b.preventDefault();for(b=0;b<d.length;)h=d[b],++b,i=a.getX(h,e),fa=a.getY(h,e),f.submitMove(h.identifier|0,i,fa);break;case "touchend":case "touchcancel":for(b=0;b<d.length;)h=d[b],++b,i=a.getX(h,e),fa=a.getY(h,e),f.submitUp(h.identifier|0,i,fa)}};b.addEventListener("touchstart",e,!1);b.addEventListener("touchmove",e,!1);b.addEventListener("touchend",e,!1);b.addEventListener("touchcancel",e,!1)}else this._touch=
new g.DummyTouch;e=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};b.addEventListener("keydown",e,!1);b.addEventListener("keyup",e,!1);var h=B.window.onerror;B.window.onerror=function(a,b,d){D.uncaughtError.emit1(a);return null!=h?h(a,b,d):!1};var i=g.html.HtmlUtil.loadExtension("hidden",B.document);null!=i.value&&(e=function(){D.hidden.set__(K.field(B.document,i.field))},e(),B.document.addEventListener(i.prefix+
"visibilitychange",e,!1),D.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)}));this._lastUpdate=Date.now();this._skipFrame=!1;var j=g.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=j){var k=B.window.performance,l=null!=k&&g.html.HtmlUtil.polyfill("now",k);l?this._lastUpdate=k.now():null;var m=null,m=function(d){a.update(l?k.now():d);j(m,b)};j(m,b)}else B.window.setInterval(function(){a.update(Date.now())},1E3/60)},__class__:g.html.HtmlPlatform};m.Value=function(a,
b){this._value=a;null!=b&&(this._changed=new m.Signal2(b))};k["flambe.util.Value"]=m.Value;m.Value.__name__=["flambe","util","Value"];m.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new m.Signal2);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},__class__:m.Value,__properties__:{set__:"set__",get__:"get__",get_changed:"get_changed"}};m.SignalConnection=function(a,b){this._internal_next=
null;this._signal=a;this._internal_listener=b;this.stayInList=!0};k["flambe.util.SignalConnection"]=m.SignalConnection;m.SignalConnection.__name__=["flambe","util","SignalConnection"];m.SignalConnection.__interfaces__=[m.Disposable];m.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal._internal_disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:m.SignalConnection};m.SignalBase=function(a){this._head=null!=a?new m.SignalConnection(this,
a):null;this._deferredTasks=null};k["flambe.util.SignalBase"]=m.SignalBase;m.SignalBase.__name__=["flambe","util","SignalBase"];m.SignalBase.prototype={listRemove:function(a){for(var b=null,d=this._head;null!=d;){if(d==a){a=d._internal_next;null==b?this._head=a:b._internal_next=a;break}b=d;d=d._internal_next}},listAdd:function(a,b){if(b)a._internal_next=this._head,this._head=a;else{for(var d=null,c=this._head;null!=c;)d=c,c=c._internal_next;null!=d?d._internal_next=a:this._head=a}},didEmit:function(a){for(this._head=
a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=m.SignalBase.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new m._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var d=this.willEmit(),c=d;null!=c;)c._internal_listener(a,b),c.stayInList||c.dispose(),c=c._internal_next;this.didEmit(d)},emit1:function(a){for(var b=
this.willEmit(),d=b;null!=d;)d._internal_listener(a),d.stayInList||d.dispose(),d=d._internal_next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._internal_listener(),b.stayInList||b.dispose(),b=b._internal_next;this.didEmit(a)},_internal_disconnect:function(a){var b=this;this._head==m.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var d=this,c=new m.SignalConnection(this,a);this._head==m.SignalBase.DISPATCHING_SENTINEL?
this.defer(function(){d.listAdd(c,b)}):this.listAdd(c,b);return c},__class__:m.SignalBase};m.Signal2=function(a){m.SignalBase.call(this,a)};k["flambe.util.Signal2"]=m.Signal2;m.Signal2.__name__=["flambe","util","Signal2"];m.Signal2.__super__=m.SignalBase;m.Signal2.prototype=v(m.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:m.Signal2});m.Signal1=function(a){m.SignalBase.call(this,a)};k["flambe.util.Signal1"]=m.Signal1;m.Signal1.__name__=["flambe",
"util","Signal1"];m.Signal1.__super__=m.SignalBase;m.Signal1.prototype=v(m.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:m.Signal1});D=function(){};k["flambe.System"]=D;D.__name__=["flambe","System"];D.__properties__={get_keyboard:"get_keyboard",get_touch:"get_touch",get_pointer:"get_pointer",get_stage:"get_stage"};D.init=function(){D._calledInit||(D._platform.init(),D._calledInit=!0)};D.createTexture=function(a,b){return D._platform.getRenderer().createEmptyTexture(a,
b)};m.Logger=function(a){this._handler=a};k["flambe.util.Logger"]=m.Logger;m.Logger.__name__=["flambe","util","Logger"];m.Logger.prototype={__class__:m.Logger};Y=function(){};k["flambe.Log"]=Y;Y.__name__=["flambe","Log"];Y.__super__=m.PackageLog;Y.prototype=v(m.PackageLog.prototype,{__class__:Y});z=function(a){null==a&&(a=1);this._internal_realDt=0;this.scale=new F.AnimatedFloat(a)};k["flambe.SpeedAdjuster"]=z;z.__name__=["flambe","SpeedAdjuster"];z.__super__=L;z.prototype=v(L.prototype,{onUpdate:function(a){0<
this._internal_realDt&&(a=this._internal_realDt,this._internal_realDt=0);this.scale.update(a)},get_name:function(){return"SpeedAdjuster_5"},__class__:z});F={AnimatedFloat:function(a,b){m.Value.call(this,a,b)}};k["flambe.animation.AnimatedFloat"]=F.AnimatedFloat;F.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];F.AnimatedFloat.__super__=m.Value;F.AnimatedFloat.prototype=v(m.Value.prototype,{set_behavior:function(a){this._behavior=a;this.update(0);return a},update:function(a){null!=this._behavior&&
(m.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=null;return m.Value.prototype.set__.call(this,a)},__class__:F.AnimatedFloat});F.Behavior=function(){};k["flambe.animation.Behavior"]=F.Behavior;F.Behavior.__name__=["flambe","animation","Behavior"];F.Behavior.prototype={__class__:F.Behavior};F.Binding=function(){};k["flambe.animation.Binding"]=F.Binding;F.Binding.__name__=["flambe","animation","Binding"];
F.Binding.__interfaces__=[F.Behavior];F.Binding.prototype={isComplete:function(){return!1},update:function(){var a=this._target._value;return null!=this._fn?this._fn(a):a},__class__:F.Binding};y={};y.AssetType=k["flambe.asset.AssetType"]={__ename__:["flambe","asset","AssetType"],__constructs__:["Image","Audio","Data"]};y.AssetType.Image=["Image",0];y.AssetType.Image.toString=p;y.AssetType.Image.__enum__=y.AssetType;y.AssetType.Audio=["Audio",1];y.AssetType.Audio.toString=p;y.AssetType.Audio.__enum__=
y.AssetType;y.AssetType.Data=["Data",2];y.AssetType.Data.toString=p;y.AssetType.Data.__enum__=y.AssetType;y.AssetEntry=function(a,b,d,c){this.name=a;this.url=b;this.type=d;this.bytes=c};k["flambe.asset.AssetEntry"]=y.AssetEntry;y.AssetEntry.__name__=["flambe","asset","AssetEntry"];y.AssetEntry.prototype={getUrlExtension:function(){return m.Strings.getFileExtension(this.url.split("?")[0]).toLowerCase()},__class__:y.AssetEntry};y.AssetPack=function(){};k["flambe.asset.AssetPack"]=y.AssetPack;y.AssetPack.__name__=
["flambe","asset","AssetPack"];y.AssetPack.prototype={__class__:y.AssetPack,__properties__:{get_manifest:"get_manifest"}};x=void 0;B=void 0;ha=void 0;x=function(){};k["js.Boot"]=x;x.__name__=["js","Boot"];x.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",c=2,e=a.length;c<e;)var f=c++,
d=2!=f?d+(","+x.__string_rec(a[f],b)):d+x.__string_rec(a[f],b);return d+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+x.__string_rec(a[f],b);return d+"]"}try{e=a.toString}catch(g){return"???"}if(null!=e&&e!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;e=null;d="{\n";b+="\t";c=null!=a.hasOwnProperty;for(e in a)if(!c||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=d.length&&(d+=", \n"),d+=b+e+" : "+
x.__string_rec(a[e],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};x.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var c=0,e=d.length;c<e;){var f=c++,f=d[f];if(f==b||x.__interfLoop(f,b))return!0}return x.__interfLoop(a.__super__,b)};x.__instanceof=function(a,b){try{if(a instanceof b)return b==Array?null==a.__enum__:!0;if(x.__interfLoop(a.__class__,b))return!0}catch(d){if(null==
b)return!1}switch(b){case ka:return Math.ceil(a%2147483648)===a;case ia:return"number"==typeof a;case ja:return!0===a||!1===a;case String:return"string"==typeof a;case la:return!0;default:if(null==a)return!1;if(b==ma&&null!=a.__name__)return!0;null;if(b==na&&null!=a.__ename__)return!0;null;return a.__enum__==b}};x.__cast=function(a,b){if(x.__instanceof(a,b))return a;throw"Cannot cast "+q.string(a)+" to "+q.string(b);};m.Strings=function(){};k["flambe.util.Strings"]=m.Strings;m.Strings.__name__=["flambe",
"util","Strings"];m.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?A.substr(a,b+1,null):null};m.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?A.substr(a,0,b):a};m.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};m.Strings.withFields=function(a,b){var d=b.length;if(0<d){for(var a=a+(0<a.length?" [":"["),c=0;c<d;){0<c&&(a+=", ");var e=b[c],f=b[c+1];if(x.__instanceof(f,Error)){var g=f.stack;null!=g&&(f=g)}a+=e+"="+
q.string(f);c+=2}a+="]"}return a};B=function(){};k["js.Lib"]=B;B.__name__=["js","Lib"];y.Manifest=function(){this._entries=[]};k["flambe.asset.Manifest"]=y.Manifest;y.Manifest.__name__=["flambe","asset","Manifest"];y.Manifest.build=function(a,b){null==b&&(b=!0);var d=y.Manifest._buildManifest.get(a);if(null==d){if(b)throw m.Strings.withFields("Missing asset pack",["name",a]);return null}return d.clone()};y.Manifest.inferType=function(a){a=m.Strings.getFileExtension(a.split("?")[0]);if(null!=a)switch(a.toLowerCase()){case "png":case "jpg":case "gif":return y.AssetType.Image;
case "ogg":case "m4a":case "mp3":case "wav":return y.AssetType.Audio}return y.AssetType.Data};y.Manifest.createBuildManifests=function(){var a=new G;a.set("initial_load",[{name:"ui/splash/splash_sound_on_toggle.png",md5:"233f23ac6d024e822d3c2f807c564821",bytes:9132},{name:"ui/splash/splash_sound_off_toggle.png",md5:"0aedcc7da326651e6e6a5160e180850f",bytes:8108},{name:"ui/splash/splash_screen_logos.jpg",md5:"55d180eb223fa558712ac8d27f2cdd13",bytes:80975},{name:"ui/help_screen_container.png",md5:"368cc427345e8423f04a66fa7368b336",
bytes:43381},{name:"audio/timmy_swordattack.ogg",md5:"bf9aeb73238d29238016d4882f075f19",bytes:17770},{name:"audio/timmy_swordattack.mp3",md5:"54dce84dcc294652ad129fdafba18176",bytes:13373},{name:"audio/timmy_hit.ogg",md5:"07201c07320ab64d6ef3d05d3f58e53f",bytes:30327},{name:"audio/timmy_hit.mp3",md5:"2ac26210a744165f59e3576434751a69",bytes:25076},{name:"audio/timmy_heal.ogg",md5:"a4b12ea5cb49f0860b5b146efdb62e0d",bytes:57217},{name:"audio/timmy_heal.mp3",md5:"ce2f0be4d78f4f45a5155effc60f6ad0",bytes:53497},
{name:"audio/timmy_fire.ogg",md5:"6671bd7157a41e69fd9e9613b4c3125e",bytes:62198},{name:"audio/timmy_fire.mp3",md5:"fe67fa64f68a771ee3434d353034509a",bytes:57259},{name:"audio/timmy_block.ogg",md5:"c9c4e5489e10e10fbe61135975325ca9",bytes:9013},{name:"audio/timmy_block.mp3",md5:"b7355003ced317b38086141c088b2984",bytes:8358},{name:"audio/hypnotize.ogg",md5:"e2d038efc041964fa8565ceb31569c93",bytes:27187},{name:"audio/hypnotize.mp3",md5:"d59a85b3d302ace0d8b1848889950ca4",bytes:25076},{name:"audio/drop_swoop.ogg",
md5:"6b6aa79f962de6770602d49248f098f5",bytes:19744},{name:"audio/drop_swoop.mp3",md5:"7a714483eea7e97f100bd82988f6e09f",bytes:17971},{name:"audio/dragon_drop_final_theme.ogg",md5:"a9b7889d56edeb5243d77d66f77c45a2",bytes:668751},{name:"audio/dragon_drop_final_theme.mp3",md5:"a9c22777b2e277e28272787c072f432e",bytes:543346}]);a.set("gameplay_universal",[{name:"ui/win_level/win_wings.png",md5:"001e3e4bbad41adb9e15e1423bfac681",bytes:6278},{name:"ui/win_level/win_heal.png",md5:"5bfc0097def7e52dd9d5bec2ec6c4ccf",
bytes:1439},{name:"ui/win_level/win_fire.png",md5:"6e14f48b4db2551cdb61cfaaccebda46",bytes:6393},{name:"ui/win_level/win_daze.png",md5:"5b86539c6c6000c3ee8b07f484b99c8d",bytes:9656},{name:"ui/win_level/level_win_screen.png",md5:"a40a72c4afcf329df9268496862421a4",bytes:17336},{name:"ui/gameplay_hud/sound_on_button.png",md5:"6545d08bad1dc8918fb998c80a4a192c",bytes:14963},{name:"ui/gameplay_hud/sound_off_button.png",md5:"e9520532b3f4dcf80e8ff68eee19050e",bytes:11869},{name:"ui/gameplay_hud/quit_confirm_yes.png",
md5:"9cc140de487686ad8a392295fd86900f",bytes:2916},{name:"ui/gameplay_hud/quit_confirm_no.png",md5:"bbb6a591233fda2647058e5ec2f8b29d",bytes:2488},{name:"ui/gameplay_hud/quit_confirm_container.png",md5:"38c2bec1b1dd6722d2558e423390a4af",bytes:151091},{name:"ui/gameplay_hud/quit_button.png",md5:"4b25e1e81eb43bcbac33cacf2a33b908",bytes:13806},{name:"ui/gameplay_hud/play_button.png",md5:"9e2c7997c1327569e2b65e655ea94836",bytes:12379},{name:"ui/gameplay_hud/pause_menu.png",md5:"8f2c5f2203e42d3418c2139788108aaf",
bytes:43367},{name:"ui/gameplay_hud/pause_button.png",md5:"916dddbaa5a21b9d66ff1a9d46a178b9",bytes:11549},{name:"ui/gameplay_hud/level_win_screen.png",md5:"6a4ad0735e42bcf41cdb582a1e8d1711",bytes:22915},{name:"ui/gameplay_hud/huh_timmy_health_container.png",md5:"326377a9149d276b9f26a4c17d0a23bb",bytes:3271},{name:"ui/gameplay_hud/huh_dragon_health_container.png",md5:"6c22bb753565d76869cd662f1ca0a271",bytes:4409},{name:"ui/gameplay_hud/huh_baby_dragon_health_container.png",md5:"64aa95a0350a28ee0179dccade4eb50d",
bytes:4775},{name:"ui/gameplay_hud/hud_timmy_health_masking.png",md5:"c977baa0631873795a2af6b844ca25e3",bytes:3580},{name:"ui/gameplay_hud/hud_dragon_health_masking.png",md5:"9b1d69922f1c69dafe8590a71dca1876",bytes:4338},{name:"ui/gameplay_hud/hud_container.png",md5:"5f579aa52b5c4404a76d5339ffab36b5",bytes:3802},{name:"ui/gameplay_hud/hud_baby_dragon_health_masking.png",md5:"f3dc399a3cdd9d5c091e0786c75061d4",bytes:4738},{name:"ui/gameplay_hud/help_button.png",md5:"082276d7c7ba8f560f610134a28a258b",
bytes:12817},{name:"ui/game_over/game_over_screen_container.png",md5:"5c3c68db7575d254ac8af383a3f556bd",bytes:56349},{name:"ui/attack_menu/timmy_attack_menu_icon.png",md5:"8b5f54850d56b78c8a1efc1b12f11107",bytes:13790},{name:"ui/attack_menu/inactive/button_attack_wings_inactive.png",md5:"f2195baf370227a534e17517c6311f2b",bytes:8248},{name:"ui/attack_menu/inactive/button_attack_weapon_inactive.png",md5:"02dfb4d2c7ed4fc2d69a9ba26324f436",bytes:8826},{name:"ui/attack_menu/inactive/button_attack_shield_inactive.png",
md5:"fbd6ecb187e31303ca3773d72fa15c56",bytes:7226},{name:"ui/attack_menu/inactive/button_attack_mez_inactive.png",md5:"166562ccb19e87833b59a5ba3ff942d6",bytes:9409},{name:"ui/attack_menu/inactive/button_attack_heal_inactive.png",md5:"388c00f542a471c395becc5687f50291",bytes:7950},{name:"ui/attack_menu/inactive/button_attack_fire_inactive.png",md5:"6f31fea2496cf60242c1af5f41f3edd8",bytes:9082},{name:"ui/attack_menu/cooldown/button_attack_wings_cooldown.png",md5:"9d856101f4bbce42a6efe4e211c39152",bytes:13318},
{name:"ui/attack_menu/cooldown/button_attack_mez_cooldown.png",md5:"15aed733a3c8812f0088ec9465217077",bytes:13657},{name:"ui/attack_menu/cooldown/button_attack_heal_cooldown.png",md5:"ce16236a131e7a250caad497d4c628eb",bytes:12945},{name:"ui/attack_menu/cooldown/button_attack_fire_cooldown.png",md5:"9ddb78a853d1e2ddc005c485696cb0bb",bytes:14487},{name:"ui/attack_menu/active/button_attack_wings_active_over.png",md5:"8b7f1116309c0bf333eec1dd553b149b",bytes:13107},{name:"ui/attack_menu/active/button_attack_wings_active.png",
md5:"3ad2720cd83535940ce0f44a806c0926",bytes:10830},{name:"ui/attack_menu/active/button_attack_weapon_active_over.png",md5:"502358a71df127ca0a4b4d95b143d047",bytes:15199},{name:"ui/attack_menu/active/button_attack_weapon_active.png",md5:"c03f2fef7b534cb5492fded2458d33f1",bytes:12532},{name:"ui/attack_menu/active/button_attack_shield_active_over.png",md5:"6409e9963016c2b9cf74fb5bf23d72b6",bytes:11725},{name:"ui/attack_menu/active/button_attack_shield_active.png",md5:"c8dd2e457327b14498e4f5d5c979ca22",
bytes:9853},{name:"ui/attack_menu/active/button_attack_mez_active_over.png",md5:"2d7ab4b7afa27d58f1b1e75f10d31d3a",bytes:14299},{name:"ui/attack_menu/active/button_attack_mez_active.png",md5:"01d69653a51036415e1759bf4f1d9d90",bytes:12108},{name:"ui/attack_menu/active/button_attack_heal_active_over.png",md5:"15a5b7a55960aa69c95a8cae66e38ae3",bytes:13616},{name:"ui/attack_menu/active/button_attack_heal_active.png",md5:"6a7c792b890c1e49f2492e7f8087c9f0",bytes:11049},{name:"ui/attack_menu/active/button_attack_fire_active_over.png",
md5:"9a8a63a6cda816561b2286d15a5ae4f6",bytes:15220},{name:"ui/attack_menu/active/button_attack_fire_active.png",md5:"86430bf6d6e0489b7c2ba06449bb0837",bytes:12804},{name:"flump_exploder/library.json",md5:"88520b28ab84eee86108983488c9c764",bytes:1485},{name:"flump_exploder/atlas0.png",md5:"73e7cdb24f90a177c91c19bc23c24115",bytes:39671},{name:"elements/arrow_indicator.png",md5:"7a28fd7fb763931cb163d5fdb02de0b9",bytes:6105},{name:"backgroundImages/background.jpg",md5:"1528606d7c453f358ec44a5a724d0b11",
bytes:83067},{name:"audio/dragon_whimper.ogg",md5:"8a1648cdfa5c1c53fa4761e39532355a",bytes:79205},{name:"audio/dragon_whimper.mp3",md5:"d7fd7ced0ce0a85978a35ed36a99bcd4",bytes:129148},{name:"audio/dragon_swoopattack.ogg",md5:"974c95d8f91bcdc4b57ed6e9a17dd405",bytes:21827},{name:"audio/dragon_swoopattack.mp3",md5:"bb2d849cddc72a12666e4fdda5e60983",bytes:12119},{name:"audio/dragon_hurt.ogg",md5:"78649d2f858d35258cc543c3d1508fa5",bytes:14998},{name:"audio/dragon_hurt.mp3",md5:"1a969c766a1ae1c1de84aa42e6d3e4d0",
bytes:79411},{name:"audio/dragon_fire.ogg",md5:"8fb9a4a1f2404e0aa0705e991459f8a0",bytes:18876},{name:"audio/dragon_fire.mp3",md5:"d1e0cbbbfa4a1620b1f094ca0288778d",bytes:27584},{name:"audio/dragon_born.ogg",md5:"44332c666fc31e666b0ac87ccd05a22a",bytes:83954},{name:"audio/dragon_born.mp3",md5:"deba6cfb1d0c58071c1312ff47ab2fdd",bytes:81919},{name:"audio/baby_dragon_hurt.ogg",md5:"e911538f20109ec95fdedb382f00739b",bytes:14764},{name:"audio/baby_dragon_hurt.mp3",md5:"2c14e57d4aee84372e0c24fd915fd21a",
bytes:77321},{name:"audio/baby_dragon_chomp.ogg",md5:"5e9ef2dc7ab58c5cb31627d0fa03c2d0",bytes:16195},{name:"audio/baby_dragon_chomp.mp3",md5:"b50a690dc366bfb4eb290e81cc47abb4",bytes:9612},{name:"anim_timmy/library.json",md5:"0c7ca830ecaa6e0b1e2a26554ceb9d8f",bytes:498122},{name:"anim_timmy/atlas1.png",md5:"2f7ac9e93032925f104fef94bcf0e024",bytes:11896},{name:"anim_timmy/atlas0.png",md5:"2fc32db025168099f3083cb612dbc4a5",bytes:85069},{name:"anim_ranger/library.json",md5:"004abf3538f9aecad4b2c0988377acb3",
bytes:220363},{name:"anim_ranger/atlas1.png",md5:"6a7bce998d44c71a967a799b77c560f9",bytes:5272},{name:"anim_ranger/atlas0.png",md5:"6371730512a59e324f64cc5f300d1504",bytes:159163},{name:"anim_flames/library.json",md5:"a5ec8c93ea9fbedad7597cb023886285",bytes:3966},{name:"anim_flames/atlas0.png",md5:"649ffc540abe43d70c0a3c0cd6a3b165",bytes:65715},{name:"anim_baby_dragon/library.json",md5:"6206c1d51a032da939b194a7d48b5419",bytes:35480},{name:"anim_baby_dragon/atlas0.png",md5:"9d8a09d9e638efade3a4779ac128cfa8",
bytes:43487}]);a.set("fonts_la",[{name:"final_font.png",md5:"375a2ce060311df383366d7850760c34",bytes:273163},{name:"final_font.fnt",md5:"232e4cfae5f23f2e691078c4fec74be7",bytes:20270}]);a.set("fonts_kr",[{name:"final_font.png",md5:"375a2ce060311df383366d7850760c34",bytes:273163},{name:"final_font.fnt",md5:"232e4cfae5f23f2e691078c4fec74be7",bytes:20270}]);a.set("fonts_jp",[{name:"final_font.png",md5:"375a2ce060311df383366d7850760c34",bytes:273163},{name:"final_font.fnt",md5:"232e4cfae5f23f2e691078c4fec74be7",
bytes:20270}]);a.set("fonts_en",[{name:"heal_font.png",md5:"de90402a463ddd44b4bc7b49e667763f",bytes:137331},{name:"heal_font.fnt",md5:"5026ee3d2648098f77556878f3bb697d",bytes:15884},{name:"final_font.png",md5:"076f51a444d34b76de73f271956a6615",bytes:160705},{name:"final_font.fnt",md5:"cdf196abf7da23c3096cf19b4f4dae10",bytes:12024},{name:"damage_font.png",md5:"4fe544a842282e28af725bdd8eef8ae5",bytes:156080},{name:"damage_font.fnt",md5:"8e475b19a90f2a98093a7712d7316f87",bytes:15886}]);a.set("fonts_cn",
[{name:"final_font.png",md5:"375a2ce060311df383366d7850760c34",bytes:273163},{name:"final_font.fnt",md5:"232e4cfae5f23f2e691078c4fec74be7",bytes:20270}]);a.set("bootstrap",[{name:"ui/loading_spinner.png",md5:"4d3d00e1e4ec16e9b3cbb531f6c59dcd",bytes:12504},{name:"ui/loading_screen.jpg",md5:"e5dbf17993235f1ebcee3023180c8295",bytes:80412},{name:"config/translation_la.xml",md5:"16079644fc201a17834d903f57ec7120",bytes:6203},{name:"config/translation_kr.xml",md5:"16079644fc201a17834d903f57ec7120",bytes:6203},
{name:"config/translation_jp.xml",md5:"16079644fc201a17834d903f57ec7120",bytes:6203},{name:"config/translation_en.xml",md5:"16079644fc201a17834d903f57ec7120",bytes:6203},{name:"config/translation_cn.xml",md5:"16079644fc201a17834d903f57ec7120",bytes:6203},{name:"config/config.xml",md5:"e60f61a90a650e05394b8227045d4ab6",bytes:1291},{name:"audio/silent.ogg",md5:"3526550092a0e091f382852de5ef2315",bytes:5514},{name:"audio/silent.mp3",md5:"ba9e6829ba32e427142251a85cbd4fbb",bytes:2114}]);for(var b=new G,
d=a.keys();d.hasNext();){var c=d.next(),e=new y.Manifest;e.set_relativeBasePath("assets");for(var f=0,g=a.get(c);f<g.length;){var h=g[f];++f;var i=h.name,j=c+"/"+i+"?v="+q.string(h.md5),k=y.Manifest.inferType(i);if(k==y.AssetType.Image||k==y.AssetType.Audio)i=m.Strings.removeFileExtension(i);e.add(i,j,h.bytes,k)}b.set(c,e)}return b};y.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},
set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(a){var b=null!=this.get_externalBasePath()&&y.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),d=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.type==y.AssetType.Data&&(d=b);return null!=d?m.Strings.joinPath(d,a.url):a.url},clone:function(){var a=new y.Manifest;
a.set_relativeBasePath(this.get_relativeBasePath());a.set_externalBasePath(this.get_externalBasePath());a._entries=this._entries.slice();return a},iterator:function(){return A.iter(this._entries)},add:function(a,b,d,c){null==d&&(d=0);null==c&&(c=y.Manifest.inferType(b));a=new y.AssetEntry(a,b,c,d);this._entries.push(a);return a},__class__:y.Manifest,__properties__:{set_relativeBasePath:"set_relativeBasePath",get_relativeBasePath:"get_relativeBasePath",set_externalBasePath:"set_externalBasePath",get_externalBasePath:"get_externalBasePath"}};
j={};j.BlendMode=k["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","CopyExperimental"]};j.BlendMode.Normal=["Normal",0];j.BlendMode.Normal.toString=p;j.BlendMode.Normal.__enum__=j.BlendMode;j.BlendMode.Add=["Add",1];j.BlendMode.Add.toString=p;j.BlendMode.Add.__enum__=j.BlendMode;j.BlendMode.CopyExperimental=["CopyExperimental",2];j.BlendMode.CopyExperimental.toString=p;j.BlendMode.CopyExperimental.__enum__=j.BlendMode;I={Point:function(a,b){null==
b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};k["flambe.math.Point"]=I.Point;I.Point.__name__=["flambe","math","Point"];I.Point.prototype={__class__:I.Point};j.Sprite=function(){this.blendMode=this.scissor=null;var a=this;this._flags=11;this._localMatrix=new I.Matrix;var b=function(){a._flags|=12};this.x=new F.AnimatedFloat(0,b);this.y=new F.AnimatedFloat(0,b);this.rotation=new F.AnimatedFloat(0,b);this.scaleX=new F.AnimatedFloat(1,b);this.scaleY=new F.AnimatedFloat(1,b);this.anchorX=new F.AnimatedFloat(0,
b);this.anchorY=new F.AnimatedFloat(0,b);this.alpha=new F.AnimatedFloat(1)};k["flambe.display.Sprite"]=j.Sprite;j.Sprite.__name__=["flambe","display","Sprite"];j.Sprite.hitTest=function(a,b,d){var c=a._compMap.Sprite_1;if(null!=c){if(3!=(c._flags&3))return null;c.getLocalMatrix().inverseTransform(b,d,j.Sprite._scratchPoint)&&(b=j.Sprite._scratchPoint.x,d=j.Sprite._scratchPoint.y);var e=c.scissor;if(null!=e&&!e.contains(b,d))return null}a=j.Sprite.hitTestBackwards(a.firstChild,b,d);return null!=a?
a:null!=c&&c.containsLocal(b,d)?c:null};j.Sprite.getBounds=function(a,b){null==b&&(b=new I.Rectangle);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);j.Sprite.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};j.Sprite.render=function(a,b){var d=a._compMap.Sprite_1;if(null!=d){var c=d.alpha._value;if(0==(d._flags&1)||0>=c)return;b.save();1>c&&b.multiplyAlpha(c);null!=d.blendMode&&b.setBlendMode(d.blendMode);c=d.getLocalMatrix();b.transform(c.m00,
c.m10,c.m01,c.m11,c.m02,c.m12);c=d.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);d.draw(b)}c=a._compMap.Director_0;if(null!=c)for(var c=c.occludedScenes,e=0;e<c.length;){var f=c[e];++e;j.Sprite.render(f,b)}for(c=a.firstChild;null!=c;)e=c.next,j.Sprite.render(c,b),c=e;null!=d&&b.restore()};j.Sprite.hitTestBackwards=function(a,b,d){if(null!=a){var c=j.Sprite.hitTestBackwards(a.next,b,d);return null!=c?c:j.Sprite.hitTest(a,b,d)}return null};j.Sprite.getBoundsImpl=function(a,b,d){var c=a._compMap.Sprite_1;
if(null!=c){var b=null!=b?I.Matrix.multiply(b,c.getLocalMatrix()):c.getLocalMatrix(),e=c.getNaturalWidth(),c=c.getNaturalHeight();0<e&&0<c&&(j.Sprite.extendRect(b,0,0,d),j.Sprite.extendRect(b,e,0,d),j.Sprite.extendRect(b,e,c,d),j.Sprite.extendRect(b,0,c,d))}e=a._compMap.Director_0;if(null!=e)for(var e=e.occludedScenes,c=0,f=e.length;c<f;)j.Sprite.getBoundsImpl(e[c],b,d),++c;for(a=a.firstChild;null!=a;)e=a.next,j.Sprite.getBoundsImpl(a,b,d),a=e};j.Sprite.extendRect=function(a,b,d,c){a=a.transform(b,
d,j.Sprite._scratchPoint);b=a.x;d=a.y;b<c.x&&(c.x=b);d<c.y&&(c.y=d);b>c.width&&(c.width=b);d>c.height&&(c.height=d)};j.Sprite.__super__=L;j.Sprite.prototype=v(L.prototype,{set_pointerEnabled:function(a){this._flags=m.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=m.BitSets.set(this._flags,1,a);return a},get_pointerUp:function(){null==this._internal_pointerUp&&(this._internal_pointerUp=new m.Signal1);return this._internal_pointerUp},get_pointerMove:function(){null==this._internal_pointerMove&&
(this._internal_pointerMove=new m.Signal1);return this._internal_pointerMove},get_pointerDown:function(){null==this._internal_pointerDown&&(this._internal_pointerDown=new m.Signal1);return this._internal_pointerDown},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,
this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_1"},__class__:j.Sprite,__properties__:v(L.prototype.__properties__,{set_visible:"set_visible",get_visible:"get_visible",
get_pointerDown:"get_pointerDown",get_pointerUp:"get_pointerUp"})});j.FillSprite=function(a,b,d){j.Sprite.call(this);this.color=a;this.width=new F.AnimatedFloat(b);this.height=new F.AnimatedFloat(d)};k["flambe.display.FillSprite"]=j.FillSprite;j.FillSprite.__name__=["flambe","display","FillSprite"];j.FillSprite.__super__=j.Sprite;j.FillSprite.prototype=v(j.Sprite.prototype,{onUpdate:function(a){j.Sprite.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},
getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:j.FillSprite});j.Font=function(a,b){this.name=b;this._glyphs=new V;for(var d=new j._Font.ConfigParser(a.getFile(b+".fnt")),c=new V,e=b.lastIndexOf("/"),e=0<=e?A.substr(b,0,e+1):"",f=d.keywords();f.hasNext();)switch(f.next()){case "info":for(var g=d.pairs();g.hasNext();){var h=g.next();switch(h.key){case "size":this.size=h.getInt()}}break;case "page":for(var g=
0,i=null,k=d.pairs();k.hasNext();)switch(h=k.next(),h.key){case "id":g=h.getInt();break;case "file":i=h.getString()}c.set(g,a.getTexture(e+m.Strings.removeFileExtension(i)));break;case "char":g=null;for(i=d.pairs();i.hasNext();)switch(h=i.next(),h.key){case "id":g=new j.Glyph(h.getInt());break;case "x":g.x=h.getInt();break;case "y":g.y=h.getInt();break;case "width":g.width=h.getInt();break;case "height":g.height=h.getInt();break;case "page":g.page=c.get(h.getInt());break;case "xoffset":g.xOffset=
h.getInt();break;case "yoffset":g.yOffset=h.getInt();break;case "xadvance":g.xAdvance=h.getInt()}this._glyphs.set(g.charCode,g);break;case "kerning":g=null;i=-1;for(k=d.pairs();k.hasNext();)switch(h=k.next(),h.key){case "first":g=this._glyphs.get(h.getInt());break;case "second":i=h.getInt();break;case "amount":g._internal_setKerning(i,h.getInt())}}};k["flambe.display.Font"]=j.Font;j.Font.__name__=["flambe","display","Font"];j.Font.prototype={getGlyphs:function(a){for(var b=[],d=0,c=a.length;d<c;){var e=
d++,e=this._glyphs.get(a.charCodeAt(e));null!=e?b.push(e):null}return b},__class__:j.Font};j.Glyph=function(a){this.charCode=a};k["flambe.display.Glyph"]=j.Glyph;j.Glyph.__name__=["flambe","display","Glyph"];j.Glyph.prototype={_internal_setKerning:function(a,b){null==this._kernings&&(this._kernings=new V);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,d){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,d+this.yOffset,this.x,
this.y,this.width,this.height)},__class__:j.Glyph};j._Font={};j._Font.ConfigParser=function(a){this._configText=a;this._keywordPattern=new W("([a-z]+)(.*)","");this._pairPattern=new W('([a-z]+)=("[^"]*"|[^\\s]+)',"")};k["flambe.display._Font.ConfigParser"]=j._Font.ConfigParser;j._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];j._Font.ConfigParser.advance=function(a,b){var d=b.matchedPos();return A.substr(a,d.pos+d.len,a.length)};j._Font.ConfigParser.prototype={pairs:function(){var a=
this,b=this._pairText;return{next:function(){b=j._Font.ConfigParser.advance(b,a._pairPattern);return new j._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=j._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},__class__:j._Font.ConfigParser};
j._Font.ConfigPair=function(a,b){this.key=a;this._value=b};k["flambe.display._Font.ConfigPair"]=j._Font.ConfigPair;j._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];j._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:A.substr(this._value,1,this._value.length-2)},getInt:function(){return q.parseInt(this._value)},__class__:j._Font.ConfigPair};j.Graphics=function(){};k["flambe.display.Graphics"]=j.Graphics;j.Graphics.__name__=["flambe","display",
"Graphics"];j.Graphics.prototype={__class__:j.Graphics};j.ImageSprite=function(a){j.Sprite.call(this);this.texture=a};k["flambe.display.ImageSprite"]=j.ImageSprite;j.ImageSprite.__name__=["flambe","display","ImageSprite"];j.ImageSprite.__super__=j.Sprite;j.ImageSprite.prototype=v(j.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:j.ImageSprite});j.MaskSprite=
function(){};k["flambe.display.MaskSprite"]=j.MaskSprite;j.MaskSprite.__name__=["flambe","display","MaskSprite"];j.MaskSprite.__super__=j.Sprite;j.MaskSprite.prototype=v(j.Sprite.prototype,{onUpdate:function(a){j.Sprite.prototype.onUpdate.call(this,a);this.sprite1.onUpdate(a);this.sprite2.onUpdate(a)},draw:function(a){a.mask(this.sprite1,this.sprite2)},__class__:j.MaskSprite});j.Orientation=k["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};
j.Orientation.Portrait=["Portrait",0];j.Orientation.Portrait.toString=p;j.Orientation.Portrait.__enum__=j.Orientation;j.Orientation.Landscape=["Landscape",1];j.Orientation.Landscape.toString=p;j.Orientation.Landscape.__enum__=j.Orientation;j.SHAPE_METHODS=k["flambe.display.SHAPE_METHODS"]={__ename__:["flambe","display","SHAPE_METHODS"],__constructs__:"MoveTo,LineTo,BeginPath,Stroke,Fill,QuadCurve,BezCurve,ToDataURL,ClosePath,Clip,Save,Restore,DrawRect,Arc".split(",")};j.SHAPE_METHODS.MoveTo=["MoveTo",
0];j.SHAPE_METHODS.MoveTo.toString=p;j.SHAPE_METHODS.MoveTo.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.LineTo=["LineTo",1];j.SHAPE_METHODS.LineTo.toString=p;j.SHAPE_METHODS.LineTo.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.BeginPath=["BeginPath",2];j.SHAPE_METHODS.BeginPath.toString=p;j.SHAPE_METHODS.BeginPath.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Stroke=["Stroke",3];j.SHAPE_METHODS.Stroke.toString=p;j.SHAPE_METHODS.Stroke.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Fill=["Fill",4];j.SHAPE_METHODS.Fill.toString=
p;j.SHAPE_METHODS.Fill.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.QuadCurve=["QuadCurve",5];j.SHAPE_METHODS.QuadCurve.toString=p;j.SHAPE_METHODS.QuadCurve.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.BezCurve=["BezCurve",6];j.SHAPE_METHODS.BezCurve.toString=p;j.SHAPE_METHODS.BezCurve.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.ToDataURL=["ToDataURL",7];j.SHAPE_METHODS.ToDataURL.toString=p;j.SHAPE_METHODS.ToDataURL.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.ClosePath=["ClosePath",8];j.SHAPE_METHODS.ClosePath.toString=
p;j.SHAPE_METHODS.ClosePath.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Clip=["Clip",9];j.SHAPE_METHODS.Clip.toString=p;j.SHAPE_METHODS.Clip.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Save=["Save",10];j.SHAPE_METHODS.Save.toString=p;j.SHAPE_METHODS.Save.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Restore=["Restore",11];j.SHAPE_METHODS.Restore.toString=p;j.SHAPE_METHODS.Restore.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.DrawRect=["DrawRect",12];j.SHAPE_METHODS.DrawRect.toString=p;j.SHAPE_METHODS.DrawRect.__enum__=
j.SHAPE_METHODS;j.SHAPE_METHODS.Arc=["Arc",13];j.SHAPE_METHODS.Arc.toString=p;j.SHAPE_METHODS.Arc.__enum__=j.SHAPE_METHODS;j.ShapeSprite=function(){this.endWithStroke=this.endWithFill=this.isShape=this.isLine=!1;this.color=0;j.Sprite.call(this);this.points=[]};k["flambe.display.ShapeSprite"]=j.ShapeSprite;j.ShapeSprite.__name__=["flambe","display","ShapeSprite"];j.ShapeSprite.__super__=j.Sprite;j.ShapeSprite.prototype=v(j.Sprite.prototype,{getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},
draw:function(a){this.isShape&&a.fill(this.color);this.isLine&&a.stroke(this.color);for(var b=0;b<this.points.length;){switch(this.points[b][0][1]){case 0:a.moveTo(this.points[b][1],this.points[b][2]);break;case 1:a.lineTo(this.points[b][1],this.points[b][2]);break;case 2:a.beginPath();break;case 3:a.stroke(this.points[b][b]);break;case 4:a.fill(this.points[b][1]);break;case 5:a.quadraticCurveTo(this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4]);break;case 6:a.bezierCurveTo(this.points[b][1],
this.points[b][2],this.points[b][3],this.points[b][4],this.points[b][5],this.points[b][6]);break;case 8:a.closePath();break;case 9:a.clip(this.points[b][1]);break;case 10:a.save();break;case 11:a.restore();break;case 12:a.fillRect(this.color,this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4]);break;case 13:a.arc(this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4],this.points[b][5])}b++}this.endWithStroke&&a.stroke(this.color);this.endWithFill&&a.fill(this.color);
null==this.graphics&&(this.graphics=a)},clear:function(){this.points=[]},closePath:function(){this.points.push([j.SHAPE_METHODS.ClosePath])},lineTo:function(a,b){this.points.push([j.SHAPE_METHODS.LineTo,a,b])},moveTo:function(a,b){this.points.push([j.SHAPE_METHODS.MoveTo,a,b])},beginPath:function(){this.points.push([j.SHAPE_METHODS.BeginPath])},__class__:j.ShapeSprite});j.Stage=function(){};k["flambe.display.Stage"]=j.Stage;j.Stage.__name__=["flambe","display","Stage"];j.Stage.prototype={__class__:j.Stage,
__properties__:{get_width:"get_width",get_height:"get_height",get_fullscreenSupported:"get_fullscreenSupported"}};j.TextSprite=function(a,b){null==b&&(b="");this._width=this._height=0;this._glyphs=this._offsets=this._font=this._text=null;j.Sprite.call(this);this._font=a;this._text=b;this._flags|=32};k["flambe.display.TextSprite"]=j.TextSprite;j.TextSprite.__name__=["flambe","display","TextSprite"];j.TextSprite.__super__=j.Sprite;j.TextSprite.prototype=v(j.Sprite.prototype,{updateGlyphs:function(){if(0!=
(this._flags&32)){this._flags&=-33;this._glyphs=this._font.getGlyphs(this._text);this._offsets=[0];for(var a=this._height=this._width=0,b=this._glyphs.length;a<b;){var d=this._glyphs[a];++a;a==b?this._width+=d.width:(this._width+=d.xAdvance+d.getKerning(this._glyphs[a].charCode),this._offsets.push(this._width));this._height=I.FMath.max(this._height,d.height+d.yOffset)}}},set_font:function(a){this._font=a;this._flags|=32;return a},set_text:function(a){this._text=a;this._flags|=32;return a},getNaturalHeight:function(){this.updateGlyphs();
return this._height},getNaturalWidth:function(){this.updateGlyphs();return this._width},draw:function(a){this.updateGlyphs();for(var b=0,d=this._glyphs.length;b<d;)this._glyphs[b].draw(a,this._offsets[b],0),++b},__class__:j.TextSprite,__properties__:v(j.Sprite.prototype.__properties__,{set_text:"set_text",get_text:"get_text",set_font:"set_font",get_font:"get_font"})});j.Texture=function(){};k["flambe.display.Texture"]=j.Texture;j.Texture.__name__=["flambe","display","Texture"];j.Texture.prototype=
{__class__:j.Texture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}};z={External:function(){}};k["flambe.external.External"]=z.External;z.External.__name__=["flambe","external","External"];z.External.prototype={__class__:z.External,__properties__:{get_supported:"get_supported"}};e={};e.Key=k["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
e.Key.A=["A",0];e.Key.A.toString=p;e.Key.A.__enum__=e.Key;e.Key.B=["B",1];e.Key.B.toString=p;e.Key.B.__enum__=e.Key;e.Key.C=["C",2];e.Key.C.toString=p;e.Key.C.__enum__=e.Key;e.Key.D=["D",3];e.Key.D.toString=p;e.Key.D.__enum__=e.Key;e.Key.E=["E",4];e.Key.E.toString=p;e.Key.E.__enum__=e.Key;e.Key.F=["F",5];e.Key.F.toString=p;e.Key.F.__enum__=e.Key;e.Key.G=["G",6];e.Key.G.toString=p;e.Key.G.__enum__=e.Key;e.Key.H=["H",7];e.Key.H.toString=p;e.Key.H.__enum__=e.Key;e.Key.I=["I",8];e.Key.I.toString=p;e.Key.I.__enum__=
e.Key;e.Key.J=["J",9];e.Key.J.toString=p;e.Key.J.__enum__=e.Key;e.Key.K=["K",10];e.Key.K.toString=p;e.Key.K.__enum__=e.Key;e.Key.L=["L",11];e.Key.L.toString=p;e.Key.L.__enum__=e.Key;e.Key.M=["M",12];e.Key.M.toString=p;e.Key.M.__enum__=e.Key;e.Key.N=["N",13];e.Key.N.toString=p;e.Key.N.__enum__=e.Key;e.Key.O=["O",14];e.Key.O.toString=p;e.Key.O.__enum__=e.Key;e.Key.P=["P",15];e.Key.P.toString=p;e.Key.P.__enum__=e.Key;e.Key.Q=["Q",16];e.Key.Q.toString=p;e.Key.Q.__enum__=e.Key;e.Key.R=["R",17];e.Key.R.toString=
p;e.Key.R.__enum__=e.Key;e.Key.S=["S",18];e.Key.S.toString=p;e.Key.S.__enum__=e.Key;e.Key.T=["T",19];e.Key.T.toString=p;e.Key.T.__enum__=e.Key;e.Key.U=["U",20];e.Key.U.toString=p;e.Key.U.__enum__=e.Key;e.Key.V=["V",21];e.Key.V.toString=p;e.Key.V.__enum__=e.Key;e.Key.W=["W",22];e.Key.W.toString=p;e.Key.W.__enum__=e.Key;e.Key.X=["X",23];e.Key.X.toString=p;e.Key.X.__enum__=e.Key;e.Key.Y=["Y",24];e.Key.Y.toString=p;e.Key.Y.__enum__=e.Key;e.Key.Z=["Z",25];e.Key.Z.toString=p;e.Key.Z.__enum__=e.Key;e.Key.Number0=
["Number0",26];e.Key.Number0.toString=p;e.Key.Number0.__enum__=e.Key;e.Key.Number1=["Number1",27];e.Key.Number1.toString=p;e.Key.Number1.__enum__=e.Key;e.Key.Number2=["Number2",28];e.Key.Number2.toString=p;e.Key.Number2.__enum__=e.Key;e.Key.Number3=["Number3",29];e.Key.Number3.toString=p;e.Key.Number3.__enum__=e.Key;e.Key.Number4=["Number4",30];e.Key.Number4.toString=p;e.Key.Number4.__enum__=e.Key;e.Key.Number5=["Number5",31];e.Key.Number5.toString=p;e.Key.Number5.__enum__=e.Key;e.Key.Number6=["Number6",
32];e.Key.Number6.toString=p;e.Key.Number6.__enum__=e.Key;e.Key.Number7=["Number7",33];e.Key.Number7.toString=p;e.Key.Number7.__enum__=e.Key;e.Key.Number8=["Number8",34];e.Key.Number8.toString=p;e.Key.Number8.__enum__=e.Key;e.Key.Number9=["Number9",35];e.Key.Number9.toString=p;e.Key.Number9.__enum__=e.Key;e.Key.Numpad0=["Numpad0",36];e.Key.Numpad0.toString=p;e.Key.Numpad0.__enum__=e.Key;e.Key.Numpad1=["Numpad1",37];e.Key.Numpad1.toString=p;e.Key.Numpad1.__enum__=e.Key;e.Key.Numpad2=["Numpad2",38];
e.Key.Numpad2.toString=p;e.Key.Numpad2.__enum__=e.Key;e.Key.Numpad3=["Numpad3",39];e.Key.Numpad3.toString=p;e.Key.Numpad3.__enum__=e.Key;e.Key.Numpad4=["Numpad4",40];e.Key.Numpad4.toString=p;e.Key.Numpad4.__enum__=e.Key;e.Key.Numpad5=["Numpad5",41];e.Key.Numpad5.toString=p;e.Key.Numpad5.__enum__=e.Key;e.Key.Numpad6=["Numpad6",42];e.Key.Numpad6.toString=p;e.Key.Numpad6.__enum__=e.Key;e.Key.Numpad7=["Numpad7",43];e.Key.Numpad7.toString=p;e.Key.Numpad7.__enum__=e.Key;e.Key.Numpad8=["Numpad8",44];e.Key.Numpad8.toString=
p;e.Key.Numpad8.__enum__=e.Key;e.Key.Numpad9=["Numpad9",45];e.Key.Numpad9.toString=p;e.Key.Numpad9.__enum__=e.Key;e.Key.NumpadAdd=["NumpadAdd",46];e.Key.NumpadAdd.toString=p;e.Key.NumpadAdd.__enum__=e.Key;e.Key.NumpadDecimal=["NumpadDecimal",47];e.Key.NumpadDecimal.toString=p;e.Key.NumpadDecimal.__enum__=e.Key;e.Key.NumpadDivide=["NumpadDivide",48];e.Key.NumpadDivide.toString=p;e.Key.NumpadDivide.__enum__=e.Key;e.Key.NumpadEnter=["NumpadEnter",49];e.Key.NumpadEnter.toString=p;e.Key.NumpadEnter.__enum__=
e.Key;e.Key.NumpadMultiply=["NumpadMultiply",50];e.Key.NumpadMultiply.toString=p;e.Key.NumpadMultiply.__enum__=e.Key;e.Key.NumpadSubtract=["NumpadSubtract",51];e.Key.NumpadSubtract.toString=p;e.Key.NumpadSubtract.__enum__=e.Key;e.Key.F1=["F1",52];e.Key.F1.toString=p;e.Key.F1.__enum__=e.Key;e.Key.F2=["F2",53];e.Key.F2.toString=p;e.Key.F2.__enum__=e.Key;e.Key.F3=["F3",54];e.Key.F3.toString=p;e.Key.F3.__enum__=e.Key;e.Key.F4=["F4",55];e.Key.F4.toString=p;e.Key.F4.__enum__=e.Key;e.Key.F5=["F5",56];e.Key.F5.toString=
p;e.Key.F5.__enum__=e.Key;e.Key.F6=["F6",57];e.Key.F6.toString=p;e.Key.F6.__enum__=e.Key;e.Key.F7=["F7",58];e.Key.F7.toString=p;e.Key.F7.__enum__=e.Key;e.Key.F8=["F8",59];e.Key.F8.toString=p;e.Key.F8.__enum__=e.Key;e.Key.F9=["F9",60];e.Key.F9.toString=p;e.Key.F9.__enum__=e.Key;e.Key.F10=["F10",61];e.Key.F10.toString=p;e.Key.F10.__enum__=e.Key;e.Key.F11=["F11",62];e.Key.F11.toString=p;e.Key.F11.__enum__=e.Key;e.Key.F12=["F12",63];e.Key.F12.toString=p;e.Key.F12.__enum__=e.Key;e.Key.F13=["F13",64];e.Key.F13.toString=
p;e.Key.F13.__enum__=e.Key;e.Key.F14=["F14",65];e.Key.F14.toString=p;e.Key.F14.__enum__=e.Key;e.Key.F15=["F15",66];e.Key.F15.toString=p;e.Key.F15.__enum__=e.Key;e.Key.Left=["Left",67];e.Key.Left.toString=p;e.Key.Left.__enum__=e.Key;e.Key.Up=["Up",68];e.Key.Up.toString=p;e.Key.Up.__enum__=e.Key;e.Key.Right=["Right",69];e.Key.Right.toString=p;e.Key.Right.__enum__=e.Key;e.Key.Down=["Down",70];e.Key.Down.toString=p;e.Key.Down.__enum__=e.Key;e.Key.Alt=["Alt",71];e.Key.Alt.toString=p;e.Key.Alt.__enum__=
e.Key;e.Key.Backquote=["Backquote",72];e.Key.Backquote.toString=p;e.Key.Backquote.__enum__=e.Key;e.Key.Backslash=["Backslash",73];e.Key.Backslash.toString=p;e.Key.Backslash.__enum__=e.Key;e.Key.Backspace=["Backspace",74];e.Key.Backspace.toString=p;e.Key.Backspace.__enum__=e.Key;e.Key.CapsLock=["CapsLock",75];e.Key.CapsLock.toString=p;e.Key.CapsLock.__enum__=e.Key;e.Key.Comma=["Comma",76];e.Key.Comma.toString=p;e.Key.Comma.__enum__=e.Key;e.Key.Command=["Command",77];e.Key.Command.toString=p;e.Key.Command.__enum__=
e.Key;e.Key.Control=["Control",78];e.Key.Control.toString=p;e.Key.Control.__enum__=e.Key;e.Key.Delete=["Delete",79];e.Key.Delete.toString=p;e.Key.Delete.__enum__=e.Key;e.Key.End=["End",80];e.Key.End.toString=p;e.Key.End.__enum__=e.Key;e.Key.Enter=["Enter",81];e.Key.Enter.toString=p;e.Key.Enter.__enum__=e.Key;e.Key.Equals=["Equals",82];e.Key.Equals.toString=p;e.Key.Equals.__enum__=e.Key;e.Key.Escape=["Escape",83];e.Key.Escape.toString=p;e.Key.Escape.__enum__=e.Key;e.Key.Home=["Home",84];e.Key.Home.toString=
p;e.Key.Home.__enum__=e.Key;e.Key.Insert=["Insert",85];e.Key.Insert.toString=p;e.Key.Insert.__enum__=e.Key;e.Key.LeftBracket=["LeftBracket",86];e.Key.LeftBracket.toString=p;e.Key.LeftBracket.__enum__=e.Key;e.Key.Minus=["Minus",87];e.Key.Minus.toString=p;e.Key.Minus.__enum__=e.Key;e.Key.PageDown=["PageDown",88];e.Key.PageDown.toString=p;e.Key.PageDown.__enum__=e.Key;e.Key.PageUp=["PageUp",89];e.Key.PageUp.toString=p;e.Key.PageUp.__enum__=e.Key;e.Key.Period=["Period",90];e.Key.Period.toString=p;e.Key.Period.__enum__=
e.Key;e.Key.Quote=["Quote",91];e.Key.Quote.toString=p;e.Key.Quote.__enum__=e.Key;e.Key.RightBracket=["RightBracket",92];e.Key.RightBracket.toString=p;e.Key.RightBracket.__enum__=e.Key;e.Key.Semicolon=["Semicolon",93];e.Key.Semicolon.toString=p;e.Key.Semicolon.__enum__=e.Key;e.Key.Shift=["Shift",94];e.Key.Shift.toString=p;e.Key.Shift.__enum__=e.Key;e.Key.Slash=["Slash",95];e.Key.Slash.toString=p;e.Key.Slash.__enum__=e.Key;e.Key.Space=["Space",96];e.Key.Space.toString=p;e.Key.Space.__enum__=e.Key;e.Key.Tab=
["Tab",97];e.Key.Tab.toString=p;e.Key.Tab.__enum__=e.Key;e.Key.Menu=["Menu",98];e.Key.Menu.toString=p;e.Key.Menu.__enum__=e.Key;e.Key.Search=["Search",99];e.Key.Search.toString=p;e.Key.Search.__enum__=e.Key;e.Key.Unknown=function(a){a=["Unknown",100,a];a.__enum__=e.Key;a.toString=p;return a};e.Keyboard=function(){};k["flambe.input.Keyboard"]=e.Keyboard;e.Keyboard.__name__=["flambe","input","Keyboard"];e.Keyboard.prototype={__class__:e.Keyboard,__properties__:{get_supported:"get_supported"}};e.KeyboardEvent=
function(){this._internal_init(0,null)};k["flambe.input.KeyboardEvent"]=e.KeyboardEvent;e.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];e.KeyboardEvent.prototype={_internal_init:function(a,b){this.id=a;this.key=b},__class__:e.KeyboardEvent};e.Mouse=function(){};k["flambe.input.Mouse"]=e.Mouse;e.Mouse.__name__=["flambe","input","Mouse"];e.Mouse.prototype={__class__:e.Mouse,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y",set_cursor:"set_cursor",get_cursor:"get_cursor"}};
e.MouseButton=k["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};e.MouseButton.Left=["Left",0];e.MouseButton.Left.toString=p;e.MouseButton.Left.__enum__=e.MouseButton;e.MouseButton.Middle=["Middle",1];e.MouseButton.Middle.toString=p;e.MouseButton.Middle.__enum__=e.MouseButton;e.MouseButton.Right=["Right",2];e.MouseButton.Right.toString=p;e.MouseButton.Right.__enum__=e.MouseButton;e.MouseButton.Unknown=function(a){a=["Unknown",
3,a];a.__enum__=e.MouseButton;a.toString=p;return a};e.MouseCursor=k["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};e.MouseCursor.Default=["Default",0];e.MouseCursor.Default.toString=p;e.MouseCursor.Default.__enum__=e.MouseCursor;e.MouseCursor.Button=["Button",1];e.MouseCursor.Button.toString=p;e.MouseCursor.Button.__enum__=e.MouseCursor;e.MouseCursor.None=["None",2];e.MouseCursor.None.toString=p;e.MouseCursor.None.__enum__=e.MouseCursor;
e.MouseEvent=function(){this._internal_init(0,0,0,null)};k["flambe.input.MouseEvent"]=e.MouseEvent;e.MouseEvent.__name__=["flambe","input","MouseEvent"];e.MouseEvent.prototype={_internal_init:function(a,b,d,c){this.id=a;this.viewX=b;this.viewY=d;this.button=c},__class__:e.MouseEvent};e.Pointer=function(){};k["flambe.input.Pointer"]=e.Pointer;e.Pointer.__name__=["flambe","input","Pointer"];e.Pointer.prototype={__class__:e.Pointer,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y"}};
e.EventSource=k["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};e.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=e.EventSource;a.toString=p;return a};e.EventSource.Touch=function(a){a=["Touch",1,a];a.__enum__=e.EventSource;a.toString=p;return a};e.PointerEvent=function(){this._internal_init(0,0,0,null,null)};k["flambe.input.PointerEvent"]=e.PointerEvent;e.PointerEvent.__name__=["flambe","input","PointerEvent"];e.PointerEvent.prototype=
{_internal_init:function(a,b,d,c,e){this.id=a;this.viewX=b;this.viewY=d;this.hit=c;this.source=e;this._internal_stopped=!1},__class__:e.PointerEvent};e.Touch=function(){};k["flambe.input.Touch"]=e.Touch;e.Touch.__name__=["flambe","input","Touch"];e.Touch.prototype={__class__:e.Touch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}};e.TouchPoint=function(a){this.id=a;this._internal_source=e.EventSource.Touch(this)};k["flambe.input.TouchPoint"]=e.TouchPoint;
e.TouchPoint.__name__=["flambe","input","TouchPoint"];e.TouchPoint.prototype={_internal_init:function(a,b){this.viewX=a;this.viewY=b},__class__:e.TouchPoint};I.FMath=function(){};k["flambe.math.FMath"]=I.FMath;I.FMath.__name__=["flambe","math","FMath"];I.FMath.max=function(a,b){return a>b?a:b};I.FMath.clamp=function(a,b,d){return a<b?b:a>d?d:a};I.Matrix=function(){this.identity()};k["flambe.math.Matrix"]=I.Matrix;I.Matrix.__name__=["flambe","math","Matrix"];I.Matrix.multiply=function(a,b,d){null==
d&&(d=new I.Matrix);var c=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;d.m00=c;d.m01=e;d.m02=f;c=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;d.m10=c;d.m11=e;d.m12=f;return d};I.Matrix.prototype={inverseTransform:function(a,b,d){var c=this.determinant();if(0==c)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/c;d.y=(b*this.m00-a*this.m10)/c;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},
transform:function(a,b,d){null==d&&(d=new I.Point);d.x=a*this.m00+b*this.m01+this.m02;d.y=a*this.m10+b*this.m11+this.m12;return d},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,d,c,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*d,f*d,-f*c,e*c,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,d,c,e,f){this.m00=a;this.m01=d;this.m02=e;this.m10=b;this.m11=c;this.m12=f},__class__:I.Matrix};I.Rectangle=function(a,b,d,c){null==
c&&(c=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,c)};k["flambe.math.Rectangle"]=I.Rectangle;I.Rectangle.__name__=["flambe","math","Rectangle"];I.Rectangle.prototype={contains:function(a,b){a-=this.x;b-=this.y;return 0<=a&&0<=b&&a<=this.width&&b<=this.height},set:function(a,b,d,c){this.x=a;this.y=b;this.width=d;this.height=c},__class__:I.Rectangle};g.BasicAssetPackLoader=function(a,b){this._platform=a;this.promise=new m.Promise;this._bytesLoaded=new G;this._pack=new g._BasicAssetPackLoader.BasicAssetPack(b);
var d=ba.array(b);if(0==d.length)this.handleSuccess();else{for(var c=0,e=new G,f=0;f<d.length;){var h=d[f];++f;var i=e.get(h.name);null==i&&(i=[],e.set(h.name,i));i.push(h)}this._assetsRemaining=ba.count(e);for(d=e.iterator();d.hasNext();)if(i=d.next(),i=1<i.length?this.pickBestEntry(i):i[0],e=this.createPlaceholder(i),null!=e)this.handleLoad(i,e);else{c+=i.bytes;e=b.getFullURL(i);try{this.loadEntry(e,i)}catch(j){this.handleError(i,"Unexpected error: "+q.string(j))}}this.promise.set_total(c)}};k["flambe.platform.BasicAssetPackLoader"]=
g.BasicAssetPackLoader;g.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];g.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){this.promise.error.emit1(m.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var d=0,c=this._bytesLoaded.iterator();c.hasNext();)var e=
c.next(),d=d+e;this.promise.set_progress(d)},handleLoad:function(a,b){var d=a.name;switch(a.type[1]){case 0:this._pack.textures.set(d,b);break;case 1:this._pack.sounds.set(d,b);break;case 2:this._pack.files.set(d,b)}this._assetsRemaining-=1;0>=this._assetsRemaining&&this.handleSuccess()},getAudioFormats:function(){return[]},loadEntry:function(){},createPlaceholder:function(a){switch(a.type[1]){case 1:if(!ba.has(this.getAudioFormats(),a.getUrlExtension()))return g.DummySound.getInstance()}return null},
pickBestEntry:function(a){switch(a[0].type[1]){case 1:for(var b=this.getAudioFormats(),d=0;d<b.length;){var c=b[d];++d;for(var e=0;e<a.length;){var f=a[e];++e;if(f.getUrlExtension()==c)return f}}}return a[0]},__class__:g.BasicAssetPackLoader};g._BasicAssetPackLoader={};g._BasicAssetPackLoader.BasicAssetPack=function(a){this._manifest=a;this.textures=new G;this.sounds=new G;this.files=new G};k["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=g._BasicAssetPackLoader.BasicAssetPack;g._BasicAssetPackLoader.BasicAssetPack.__name__=
["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];g._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[y.AssetPack];g._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},getFile:function(a,b){null==b&&(b=!0);var d=this.files.get(a);if(null==d&&b)throw m.Strings.withFields("Missing file",["name",a]);return d},getSound:function(a,b){null==b&&(b=!0);var d=this.sounds.get(a);if(null==d&&b)throw m.Strings.withFields("Missing sound",["name",a]);
return d},getTexture:function(a,b){null==b&&(b=!0);var d=this.textures.get(a);if(null==d&&b)throw m.Strings.withFields("Missing texture",["name",a]);return d},__class__:g._BasicAssetPackLoader.BasicAssetPack,__properties__:{get_manifest:"get_manifest"}};g.BasicKeyboard=function(){this.down=new m.Signal1;this.up=new m.Signal1;this.backButton=new m.Signal0;this._keyStates=new V};k["flambe.platform.BasicKeyboard"]=g.BasicKeyboard;g.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];g.BasicKeyboard.__interfaces__=
[e.Keyboard];g.BasicKeyboard.prototype={submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),g.BasicKeyboard._sharedEvent._internal_init(g.BasicKeyboard._sharedEvent.id+1,g.KeyCodes.toKey(a)),this.up.emit1(g.BasicKeyboard._sharedEvent))},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),g.BasicKeyboard._sharedEvent._internal_init(g.BasicKeyboard._sharedEvent.id+1,g.KeyCodes.toKey(a)),
this.down.emit1(g.BasicKeyboard._sharedEvent));return!0},isDown:function(a){return this._keyStates.exists(g.KeyCodes.toKeyCode(a))},get_supported:function(){return!0},__class__:g.BasicKeyboard,__properties__:{get_supported:"get_supported"}};g.BasicMouse=function(a){this._pointer=a;this._source=e.EventSource.Mouse(g.BasicMouse._sharedEvent);this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1;this.scroll=new m.Signal1;this._y=this._x=0;this._cursor=e.MouseCursor.Default;this._buttonStates=
new V};k["flambe.platform.BasicMouse"]=g.BasicMouse;g.BasicMouse.__name__=["flambe","platform","BasicMouse"];g.BasicMouse.__interfaces__=[e.Mouse];g.BasicMouse.prototype={prepare:function(a,b,d){this._x=a;this._y=b;g.BasicMouse._sharedEvent._internal_init(g.BasicMouse._sharedEvent.id+1,a,b,d)},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(d);return!0},submitUp:function(a,b,d){this._buttonStates.exists(d)&&(this._buttonStates.remove(d),this.prepare(a,
b,g.MouseCodes.toButton(d)),this._pointer.submitUp(a,b,this._source),this.up.emit1(g.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit1(g.BasicMouse._sharedEvent)},submitDown:function(a,b,d){this._buttonStates.exists(d)||(this._buttonStates.set(d,!0),this.prepare(a,b,g.MouseCodes.toButton(d)),this._pointer.submitDown(a,b,this._source),this.down.emit1(g.BasicMouse._sharedEvent))},isDown:function(a){return this._buttonStates.exists(g.MouseCodes.toButtonCode(a))},
set_cursor:function(a){return this._cursor=a},get_cursor:function(){return this._cursor},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:g.BasicMouse,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y",set_cursor:"set_cursor",get_cursor:"get_cursor"}};g.BasicPointer=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1;this._x=a;this._y=
b;this._isDown=d};k["flambe.platform.BasicPointer"]=g.BasicPointer;g.BasicPointer.__name__=["flambe","platform","BasicPointer"];g.BasicPointer.__interfaces__=[e.Pointer];g.BasicPointer.prototype={prepare:function(a,b,d,c){this._x=a;this._y=b;g.BasicPointer._sharedEvent._internal_init(g.BasicPointer._sharedEvent.id+1,a,b,d,c)},submitUp:function(a,b,d){if(this._isDown){this._isDown=!1;var c=[],e=j.Sprite.hitTest(D.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_1;null!=h&&c.push(h);f=
f.parent}while(null!=f)}this.prepare(a,b,e,d);for(a=0;a<c.length;)if(h=c[a],++a,h=h._internal_pointerUp,null!=h&&(h.emit1(g.BasicPointer._sharedEvent),g.BasicPointer._sharedEvent._internal_stopped))return;this.up.emit1(g.BasicPointer._sharedEvent)}},submitMove:function(a,b,d){var c=[],e=j.Sprite.hitTest(D.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_1;null!=h&&c.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,d);for(a=0;a<c.length;)if(h=c[a],++a,h=h._internal_pointerMove,null!=
h&&(h.emit1(g.BasicPointer._sharedEvent),g.BasicPointer._sharedEvent._internal_stopped))return;this.move.emit1(g.BasicPointer._sharedEvent)},submitDown:function(a,b,d){if(!this._isDown){this._isDown=!0;var c=[],e=j.Sprite.hitTest(D.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_1;null!=h&&c.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,d);for(a=0;a<c.length;)if(h=c[a],++a,h=h._internal_pointerDown,null!=h&&(h.emit1(g.BasicPointer._sharedEvent),g.BasicPointer._sharedEvent._internal_stopped))return;
this.down.emit1(g.BasicPointer._sharedEvent)}},isDown:function(){return this._isDown},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:g.BasicPointer,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y"}};g.BasicTouch=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new V;this._points=[];this.down=new m.Signal1;this.move=new m.Signal1;this.up=new m.Signal1};k["flambe.platform.BasicTouch"]=
g.BasicTouch;g.BasicTouch.__name__=["flambe","platform","BasicTouch"];g.BasicTouch.__interfaces__=[e.Touch];g.BasicTouch.prototype={submitUp:function(a,b,d){var c=this._pointMap.get(a);null!=c&&(c._internal_init(b,d),this._pointMap.remove(a),A.remove(this._points,c),this._pointerTouch==c&&(this._pointerTouch=null,this._pointer.submitUp(b,d,c._internal_source)),this.up.emit1(c))},submitMove:function(a,b,d){a=this._pointMap.get(a);null!=a&&(a._internal_init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,
d,a._internal_source),this.move.emit1(a))},submitDown:function(a,b,d){if(!this._pointMap.exists(a)){var c=new e.TouchPoint(a);c._internal_init(b,d);this._pointMap.set(a,c);this._points.push(c);null==this._pointerTouch&&(this._pointerTouch=c,this._pointer.submitDown(b,d,c._internal_source));this.down.emit1(c)}},get_points:function(){return this._points.slice()},get_maxPoints:function(){return this._maxPoints},get_supported:function(){return!0},__class__:g.BasicTouch,__properties__:{get_supported:"get_supported",
get_maxPoints:"get_maxPoints",get_points:"get_points"}};H.Sound=function(){};k["flambe.sound.Sound"]=H.Sound;H.Sound.__name__=["flambe","sound","Sound"];H.Sound.prototype={__class__:H.Sound,__properties__:{get_duration:"get_duration"}};g.DummySound=function(){this._playback=new g.DummyPlayback(this)};k["flambe.platform.DummySound"]=g.DummySound;g.DummySound.__name__=["flambe","platform","DummySound"];g.DummySound.__interfaces__=[H.Sound];g.DummySound.getInstance=function(){null==g.DummySound._instance&&
(g.DummySound._instance=new g.DummySound);return g.DummySound._instance};g.DummySound.prototype={get_duration:function(){return 0},loop:function(){return this._playback},play:function(){return this._playback},__class__:g.DummySound,__properties__:{get_duration:"get_duration"}};H.Playback=function(){};k["flambe.sound.Playback"]=H.Playback;H.Playback.__name__=["flambe","sound","Playback"];H.Playback.__interfaces__=[m.Disposable];H.Playback.prototype={__class__:H.Playback,__properties__:{set_paused:"set_paused",
get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}};g.DummyPlayback=function(a){this._sound=a;this.volume=new F.AnimatedFloat(0)};k["flambe.platform.DummyPlayback"]=g.DummyPlayback;g.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];g.DummyPlayback.__interfaces__=[H.Playback];g.DummyPlayback.prototype={dispose:function(){},get_position:function(){return 0},get_ended:function(){return!0},set_paused:function(){return!0},get_paused:function(){return!0},
get_sound:function(){return this._sound},__class__:g.DummyPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}};aa={Storage:function(){}};k["flambe.storage.Storage"]=aa.Storage;aa.Storage.__name__=["flambe","storage","Storage"];aa.Storage.prototype={__class__:aa.Storage,__properties__:{get_supported:"get_supported"}};g.DummyStorage=function(){this.clear()};k["flambe.platform.DummyStorage"]=g.DummyStorage;
g.DummyStorage.__name__=["flambe","platform","DummyStorage"];g.DummyStorage.__interfaces__=[aa.Storage];g.DummyStorage.prototype={clear:function(){this._hash=new G},remove:function(a){this._hash.remove(a)},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},set:function(a,b){this._hash.set(a,b);return!0},get_supported:function(){return!1},__class__:g.DummyStorage,__properties__:{get_supported:"get_supported"}};g.DummyTouch=function(){this.down=new m.Signal1;this.move=new m.Signal1;
this.up=new m.Signal1};k["flambe.platform.DummyTouch"]=g.DummyTouch;g.DummyTouch.__name__=["flambe","platform","DummyTouch"];g.DummyTouch.__interfaces__=[e.Touch];g.DummyTouch.prototype={get_points:function(){return[]},get_maxPoints:function(){return 0},get_supported:function(){return!1},__class__:g.DummyTouch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}};g.EventGroup=function(){this._entries=[]};k["flambe.platform.EventGroup"]=g.EventGroup;
g.EventGroup.__name__=["flambe","platform","EventGroup"];g.EventGroup.__interfaces__=[m.Disposable];g.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var d=b[a];++a;d.dispatcher.removeEventListener(d.type,d.listener,!1)}this._entries=[]},addDisposingListener:function(a,b,d){var c=this;this.addListener(a,b,function(a){c.dispose();d(a)})},addListener:function(a,b,d){a.addEventListener(b,d,!1);this._entries.push(new g._EventGroup.Entry(a,b,d))},__class__:g.EventGroup};
g._EventGroup={};g._EventGroup.Entry=function(a,b,d){this.dispatcher=a;this.type=b;this.listener=d};k["flambe.platform._EventGroup.Entry"]=g._EventGroup.Entry;g._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];g._EventGroup.Entry.prototype={__class__:g._EventGroup.Entry};g.KeyCodes=function(){};k["flambe.platform.KeyCodes"]=g.KeyCodes;g.KeyCodes.__name__=["flambe","platform","KeyCodes"];g.KeyCodes.toKey=function(a){switch(a){case 65:return e.Key.A;case 66:return e.Key.B;case 67:return e.Key.C;
case 68:return e.Key.D;case 69:return e.Key.E;case 70:return e.Key.F;case 71:return e.Key.G;case 72:return e.Key.H;case 73:return e.Key.I;case 74:return e.Key.J;case 75:return e.Key.K;case 76:return e.Key.L;case 77:return e.Key.M;case 78:return e.Key.N;case 79:return e.Key.O;case 80:return e.Key.P;case 81:return e.Key.Q;case 82:return e.Key.R;case 83:return e.Key.S;case 84:return e.Key.T;case 85:return e.Key.U;case 86:return e.Key.V;case 87:return e.Key.W;case 88:return e.Key.X;case 89:return e.Key.Y;
case 90:return e.Key.Z;case 48:return e.Key.Number0;case 49:return e.Key.Number1;case 50:return e.Key.Number2;case 51:return e.Key.Number3;case 52:return e.Key.Number4;case 53:return e.Key.Number5;case 54:return e.Key.Number6;case 55:return e.Key.Number7;case 56:return e.Key.Number8;case 57:return e.Key.Number9;case 96:return e.Key.Numpad0;case 97:return e.Key.Numpad1;case 98:return e.Key.Numpad2;case 99:return e.Key.Numpad3;case 100:return e.Key.Numpad4;case 101:return e.Key.Numpad5;case 102:return e.Key.Numpad6;
case 103:return e.Key.Numpad7;case 104:return e.Key.Numpad8;case 105:return e.Key.Numpad9;case 107:return e.Key.NumpadAdd;case 110:return e.Key.NumpadDecimal;case 111:return e.Key.NumpadDivide;case 108:return e.Key.NumpadEnter;case 106:return e.Key.NumpadMultiply;case 109:return e.Key.NumpadSubtract;case 112:return e.Key.F1;case 113:return e.Key.F2;case 114:return e.Key.F3;case 115:return e.Key.F4;case 116:return e.Key.F5;case 117:return e.Key.F6;case 118:return e.Key.F7;case 119:return e.Key.F8;
case 120:return e.Key.F9;case 121:return e.Key.F10;case 122:return e.Key.F11;case 123:return e.Key.F12;case 37:return e.Key.Left;case 38:return e.Key.Up;case 39:return e.Key.Right;case 40:return e.Key.Down;case 18:return e.Key.Alt;case 192:return e.Key.Backquote;case 220:return e.Key.Backslash;case 8:return e.Key.Backspace;case 20:return e.Key.CapsLock;case 188:return e.Key.Comma;case 15:return e.Key.Command;case 17:return e.Key.Control;case 46:return e.Key.Delete;case 35:return e.Key.End;case 13:return e.Key.Enter;
case 187:return e.Key.Equals;case 27:return e.Key.Escape;case 36:return e.Key.Home;case 45:return e.Key.Insert;case 219:return e.Key.LeftBracket;case 189:return e.Key.Minus;case 34:return e.Key.PageDown;case 33:return e.Key.PageUp;case 190:return e.Key.Period;case 222:return e.Key.Quote;case 221:return e.Key.RightBracket;case 186:return e.Key.Semicolon;case 16:return e.Key.Shift;case 191:return e.Key.Slash;case 32:return e.Key.Space;case 9:return e.Key.Tab;case 16777234:return e.Key.Menu;case 16777247:return e.Key.Search}return e.Key.Unknown(a)};
g.KeyCodes.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;
case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;
case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;
case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};g.MainLoop=function(){this._tickables=[]};k["flambe.platform.MainLoop"]=g.MainLoop;g.MainLoop.__name__=["flambe","platform",
"MainLoop"];g.MainLoop.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_5;if(null!=d&&(d._internal_realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}for(var c=a.firstComponent;null!=c;)d=c.next,c.onUpdate(b),c=d;for(c=a.firstChild;null!=c;)d=c.next,g.MainLoop.updateEntity(c,b),c=d};g.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.willRender();null!=b&&(j.Sprite.render(D.root,b),a.didRender())},update:function(a){if(!(0>=a)){1<a&&(a=1);
for(var b=0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}g.MainLoop.updateEntity(D.root,a)}},__class__:g.MainLoop};g.ManifestBuilder=function(){};k["flambe.platform.ManifestBuilder"]=g.ManifestBuilder;g.ManifestBuilder.__name__=["flambe","platform","ManifestBuilder"];g.MouseCodes=function(){};k["flambe.platform.MouseCodes"]=g.MouseCodes;g.MouseCodes.__name__=["flambe","platform","MouseCodes"];g.MouseCodes.toButton=function(a){switch(a){case 0:return e.MouseButton.Left;
case 1:return e.MouseButton.Middle;case 2:return e.MouseButton.Right}return e.MouseButton.Unknown(a)};g.MouseCodes.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};g.Renderer=function(){};k["flambe.platform.Renderer"]=g.Renderer;g.Renderer.__name__=["flambe","platform","Renderer"];g.Renderer.prototype={__class__:g.Renderer};g.Tickable=function(){};k["flambe.platform.Tickable"]=g.Tickable;g.Tickable.__name__=["flambe","platform","Tickable"];
g.Tickable.prototype={__class__:g.Tickable};g.html.CanvasGraphics=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};k["flambe.platform.html.CanvasGraphics"]=g.html.CanvasGraphics;g.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];g.html.CanvasGraphics.__interfaces__=[j.Graphics];g.html.CanvasGraphics.prototype={erase:function(){this._canvasCtx.clearRect(0,0,960,560)},mask:function(a,b){var d=g.html.HtmlPlatform.instance.getTempCanvas(),c=g.html.HtmlPlatform.instance.getTempGraphics();
c.erase();c.setAlpha(a.alpha._value);a.draw(c);c.setGlobalComposite("destination-atop");c.setAlpha(b.alpha._value);b.draw(c);c.setGlobalComposite("source-over");this.setGlobalComposite("source-over");this._canvasCtx.drawImage(d,0,0)},arc:function(a,b,d,c,e){this._canvasCtx.arc(a,b,d,c,e)},clip:function(){this._canvasCtx.clip()},isPointInPath:function(a,b){return this._canvasCtx.isPointInPath(a,b)},bezierCurveTo:function(a,b,d,c,e,f){this._canvasCtx.bezierCurveTo(a,b,d,c,e,f)},quadraticCurveTo:function(a,
b,d,c){this._canvasCtx.quadraticCurveTo(a,b,d,c)},fill:function(a){this._canvasCtx.fillStyle="#"+("00000"+a.toString(16)).slice(-6);this._canvasCtx.fill()},stroke:function(a){this._canvasCtx.strokeStyle="#"+("00000"+a.toString(16)).slice(-6);this._canvasCtx.stroke()},closePath:function(){this._canvasCtx.closePath()},beginPath:function(){this._canvasCtx.beginPath()},lineTo:function(a,b){this._canvasCtx.lineTo(a,b)},moveTo:function(a,b){this._canvasCtx.moveTo(a,b)},willRender:function(){this._firstDraw=
!0},setGlobalComposite:function(a){this._canvasCtx.globalCompositeOperation=a},applyScissor:function(a,b,d,c){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,d|0,c|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="source-over"}this._canvasCtx.globalCompositeOperation=b},setAlpha:function(a){this._canvasCtx.globalAlpha=a},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,d,c,
e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,d,c,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle="#"+("00000"+a.toString(16)).slice(-6),this._canvasCtx.fillRect(b|0,d|0,c|0,e|0))},drawPattern:function(a,b,d,c,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,d,c,e),this._canvasCtx.globalCompositeOperation="source-over"):(null==a.pattern&&(a.pattern=
this._canvasCtx.createPattern(a.image,"repeat")),this._canvasCtx.fillStyle=a.pattern,this._canvasCtx.fillRect(b|0,d|0,c|0,e|0))},drawSubImage:function(a,b,d,c,e,f,g){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,d,c,e,f,g),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,c|0,e|0,f|0,g|0,b|0,d|0,f|0,g|0)},drawImage:function(a,b,d){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation=
"copy",this.drawImage(a,b,d),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,d|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,d,c,e,f){this._canvasCtx.transform(a,b,d,c,e|0,f|0)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},scale:function(a,b){this._canvasCtx.scale(a,b)},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},save:function(){this._canvasCtx.save()},clear:function(){this._canvasCtx.fillStyle=
"#ffffff";this._canvasCtx.fillRect(0,0,this._canvasCtx.canvas.width,this._canvasCtx.canvas.height)},__class__:g.html.CanvasGraphics};g.html.CanvasRenderer=function(a){this._drawCtx=new g.html.CanvasGraphics(a);this._drawCtx.clear()};k["flambe.platform.html.CanvasRenderer"]=g.html.CanvasRenderer;g.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];g.html.CanvasRenderer.__interfaces__=[g.Renderer];g.html.CanvasRenderer.prototype={didRender:function(){},willRender:function(){this._drawCtx.willRender();
return this._drawCtx},createEmptyTexture:function(a,b){var d=B.document.createElement("canvas");d.width=a;d.height=b;return new g.html.CanvasTexture(d)},createTexture:function(a){return new g.html.CanvasTexture(g.html.CanvasRenderer.CANVAS_TEXTURES?g.html.HtmlUtil.createCanvas(a):a)},__class__:g.html.CanvasRenderer};g.html.CanvasTexture=function(a){this._graphics=null;this.image=a};k["flambe.platform.html.CanvasTexture"]=g.html.CanvasTexture;g.html.CanvasTexture.__name__=["flambe","platform","html",
"CanvasTexture"];g.html.CanvasTexture.__interfaces__=[j.Texture];g.html.CanvasTexture.prototype={getContext2d:function(){x.__instanceof(this.image,HTMLCanvasElement)||(this.image=g.html.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new g.html._CanvasTexture.InternalGraphics(this));return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},
writePixels:function(a,b,d,c,e){var f=this.getContext2d(),g=f.createImageData(c,e),h=g.data;if(null!=h.set)h.set(a.b);else{c=4*c*e;for(e=0;e<c;){var i=e++;h[i]=a.b[i]}}f.putImageData(g,b,d);this.pattern=null},readPixels:function(a,b,d,c){return U.Bytes.ofData(this.getContext2d().getImageData(a,b,d,c).data)},__class__:g.html.CanvasTexture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}};g.html._CanvasTexture={};g.html._CanvasTexture.InternalGraphics=function(a){g.html.CanvasGraphics.call(this,
a.image);this._renderTarget=a};k["flambe.platform.html._CanvasTexture.InternalGraphics"]=g.html._CanvasTexture.InternalGraphics;g.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];g.html._CanvasTexture.InternalGraphics.__super__=g.html.CanvasGraphics;g.html._CanvasTexture.InternalGraphics.prototype=v(g.html.CanvasGraphics.prototype,{fillRect:function(a,b,d,c,e){g.html.CanvasGraphics.prototype.fillRect.call(this,a,b,d,c,e);this._renderTarget.pattern=
null},drawPattern:function(a,b,d,c,e){g.html.CanvasGraphics.prototype.drawPattern.call(this,a,b,d,c,e);this._renderTarget.pattern=null},drawSubImage:function(a,b,d,c,e,f,h){g.html.CanvasGraphics.prototype.drawSubImage.call(this,a,b,d,c,e,f,h);this._renderTarget.pattern=null},drawImage:function(a,b,d){g.html.CanvasGraphics.prototype.drawImage.call(this,a,b,d);this._renderTarget.pattern=null},__class__:g.html._CanvasTexture.InternalGraphics});g.html.HtmlAssetPackLoader=function(a,b){g.BasicAssetPackLoader.call(this,
a,b)};k["flambe.platform.html.HtmlAssetPackLoader"]=g.html.HtmlAssetPackLoader;g.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];g.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=B.document.createElement("audio");if(null==a||null==a.canPlayType)return[];var b=new W("\\b(iPhone|iPod|iPad|Android)\\b","");if(!g.html.WebAudioSound.get_supported()&&b.match(B.window.navigator.userAgent))return[];for(var b=[{extension:"m4a",type:"audio/mp4; codecs=mp4a"},
{extension:"mp3",type:"audio/mpeg"},{extension:"ogg",type:"audio/ogg; codecs=vorbis"},{extension:"wav",type:"audio/wav"}],d=[],c=0;c<b.length;){var e=b[c];++c;""!=a.canPlayType(e.type)&&d.push(e.extension)}return d};g.html.HtmlAssetPackLoader.__super__=g.BasicAssetPackLoader;g.html.HtmlAssetPackLoader.prototype=v(g.BasicAssetPackLoader.prototype,{handleLoad:function(a,b){this.handleProgress(a,a.bytes);g.BasicAssetPackLoader.prototype.handleLoad.call(this,a,b)},getAudioFormats:function(){null==g.html.HtmlAssetPackLoader._audioFormats&&
(g.html.HtmlAssetPackLoader._audioFormats=g.html.HtmlAssetPackLoader.detectAudioFormats());return g.html.HtmlAssetPackLoader._audioFormats},loadEntry:function(a,b){var d=this;switch(b.type[1]){case 0:var c=new Image;c.onload=function(){var a=d._platform.getRenderer().createTexture(c);null!=a?d.handleLoad(b,a):d.handleTextureError(b)};c.onerror=function(){d.handleError(b,"Failed to load image")};c.src=a;break;case 1:if(g.html.WebAudioSound.get_supported()){var e=new XMLHttpRequest;e.open("GET",a,!0);
e.responseType="arraybuffer";e.onload=function(){g.html.WebAudioSound.ctx.decodeAudioData(e.response,function(a){d.handleLoad(b,new g.html.WebAudioSound(a))},function(){d.handleLoad(b,g.DummySound.getInstance())})};e.onerror=function(){d.handleError(b,"Failed to load audio")};e.send()}else{var f=B.document.createElement("audio");f.preload="auto";var h=++g.html.HtmlAssetPackLoader._mediaRefCount;null==g.html.HtmlAssetPackLoader._mediaElements&&(g.html.HtmlAssetPackLoader._mediaElements=new V);g.html.HtmlAssetPackLoader._mediaElements.set(h,
f);var i=new g.EventGroup;i.addDisposingListener(f,"canplaythrough",function(){g.html.HtmlAssetPackLoader._mediaElements.remove(h);d.handleLoad(b,new g.html.HtmlSound(f))});i.addDisposingListener(f,"error",function(){g.html.HtmlAssetPackLoader._mediaElements.remove(h);d.handleError(b,"Failed to load audio: "+q.string(f.error.code))});f.src=a;f.load()}break;case 2:i=new da(a),i.onData=function(a){d.handleLoad(b,a)},i.onError=function(a){d.handleError(b,"Failed to load data: "+a)},i.request(!1)}},__class__:g.html.HtmlAssetPackLoader});
g.html.HtmlExternal=function(){};k["flambe.platform.html.HtmlExternal"]=g.html.HtmlExternal;g.html.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];g.html.HtmlExternal.__interfaces__=[z.External];g.html.HtmlExternal.prototype={bind:function(a,b){B.window[a]=b},call:function(a,b){null==b&&(b=[]);return K.field(B.window,a).apply(null,b)},get_supported:function(){return!0},__class__:g.html.HtmlExternal,__properties__:{get_supported:"get_supported"}};g.html.HtmlMouse=function(a,b){g.BasicMouse.call(this,
a);this._canvas=b};k["flambe.platform.html.HtmlMouse"]=g.html.HtmlMouse;g.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];g.html.HtmlMouse.__super__=g.BasicMouse;g.html.HtmlMouse.prototype=v(g.BasicMouse.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return g.BasicMouse.prototype.set_cursor.call(this,a)},__class__:g.html.HtmlMouse});g.html.HtmlSound=function(a){this.audioElement=a};k["flambe.platform.html.HtmlSound"]=
g.html.HtmlSound;g.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];g.html.HtmlSound.__interfaces__=[H.Sound];g.html.HtmlSound.prototype={get_duration:function(){return this.audioElement.duration},loop:function(a){null==a&&(a=1);return new g.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new g.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:g.html.HtmlSound,__properties__:{get_duration:"get_duration"}};g.html._HtmlSound={};g.html._HtmlSound.HtmlPlayback=
function(a,b,d){var c=this;this._sound=a;this._tickableAdded=!1;this.volume=new F.AnimatedFloat(b,function(a){c._clonedElement.volume=a});this._clonedElement=B.document.createElement("audio");this._clonedElement.volume=b;this._clonedElement.loop=d;this._clonedElement.src=a.audioElement.src;this.playAudio()};k["flambe.platform.html._HtmlSound.HtmlPlayback"]=g.html._HtmlSound.HtmlPlayback;g.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];g.html._HtmlSound.HtmlPlayback.__interfaces__=
[g.Tickable,H.Playback];g.html._HtmlSound.HtmlPlayback.prototype={playAudio:function(){this._clonedElement.play();this._tickableAdded||(g.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0)},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,!0):!1},get_position:function(){return this._clonedElement.currentTime},get_ended:function(){return this._clonedElement.ended},
set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_paused:function(){return this._clonedElement.paused},get_sound:function(){return this._sound},__class__:g.html._HtmlSound.HtmlPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}};g.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new m.Signal0;this.scaleFactor=g.html.HtmlStage.computeScaleFactor(a);
1!=this.scaleFactor&&(g.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),g.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));g.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){g.html.HtmlUtil.callLater(s(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",s(this,this.onWindowResize),!1);this.onWindowResize();this.orientation=new m.Value(null);null!=
window.orientation&&(window.addEventListener("orientationchange",s(this,this.onOrientationChange),!1),this.onOrientationChange());this.fullscreen=new m.Value(!1);g.html.HtmlUtil.addVendorListener(B.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};k["flambe.platform.html.HtmlStage"]=g.html.HtmlStage;g.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];g.html.HtmlStage.__interfaces__=[j.Stage];g.html.HtmlStage.computeScaleFactor=function(){return 1};
g.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==g.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],B.document).value)},onOrientationChange:function(){this.orientation.set__(g.html.HtmlUtil.orientation(window.orientation))},hideMobileBrowser:function(){var a=this,b=B.document.documentElement.style;b.height=B.window.innerHeight+100+"px";b.width=B.window.innerWidth+"px";b.overflow="visible";g.html.HtmlUtil.callLater(function(){g.html.HtmlUtil.hideMobileBrowser();
g.html.HtmlUtil.callLater(function(){b.height=B.window.innerHeight+"px";a.onWindowResize()},100)})},resizeCanvas:function(a,b){var d=this.scaleFactor*a,c=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==c)return!1;this._canvas.width=d;this._canvas.height=c;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentNode.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=B.document.documentElement,
b=g.html.HtmlUtil.loadFirstExtension(["requestFullscreen","requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=g.html.HtmlUtil.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],B.document).value,null!=a&&a.apply(B.document,[])},requestResize:function(a,b){if(this.resizeCanvas(a,b)){var d=this._canvas.parentNode;d.style.width=a+"px";d.style.height=b+"px"}},unlockOrientation:function(){},lockOrientation:function(){},get_fullscreenSupported:function(){return!0==g.html.HtmlUtil.loadFirstExtension(["fullscreenEnabled",
"fullScreenEnabled"],B.document).value},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:g.html.HtmlStage,__properties__:{get_width:"get_width",get_height:"get_height",get_fullscreenSupported:"get_fullscreenSupported"}};g.html.HtmlStorage=function(a){this._storage=a};k["flambe.platform.html.HtmlStorage"]=g.html.HtmlStorage;g.html.HtmlStorage.__name__=["flambe","platform","html","HtmlStorage"];g.html.HtmlStorage.__interfaces__=[aa.Storage];
g.html.HtmlStorage.prototype={clear:function(){try{this._storage.clear()}catch(a){null}},remove:function(a){try{this._storage.removeItem("flambe:"+a)}catch(b){null}},get:function(a,b){var d=null;try{d=this._storage.getItem("flambe:"+a)}catch(c){null}if(null!=d)try{return P.run(d)}catch(e){null}return b},set:function(a,b){var d;try{var c=new S;c.useCache=!0;c.useEnumIndex=!1;c.serialize(b);d=c.toString()}catch(e){return!1}try{this._storage.setItem("flambe:"+a,d)}catch(f){return!1}return!0},get_supported:function(){return!0},
__class__:g.html.HtmlStorage,__properties__:{get_supported:"get_supported"}};g.html.HtmlUtil=function(){};k["flambe.platform.html.HtmlUtil"]=g.html.HtmlUtil;g.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];g.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);B.window.setTimeout(a,b)};g.html.HtmlUtil.hideMobileBrowser=function(){B.window.scrollTo(1,0)};g.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=B.window);var d=K.field(b,a);if(null!=d)return{prefix:null,field:a,value:d};
for(var d=a.charAt(0).toUpperCase()+A.substr(a,1,null),c=0,e=g.html.HtmlUtil.VENDOR_PREFIXES;c<e.length;){var f=e[c];++c;var h=f+d,i=K.field(b,h);if(null!=i)return{prefix:f,field:h,value:i}}return{prefix:null,field:null,value:null}};g.html.HtmlUtil.loadFirstExtension=function(a,b){for(var d=0;d<a.length;){var c=a[d];++d;c=g.html.HtmlUtil.loadExtension(c,b);if(null!=c.field)return c}return{prefix:null,field:null,value:null}};g.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=B.window);var d=g.html.HtmlUtil.loadExtension(a,
b).value;if(null==d)return!1;b[a]=d;return!0};g.html.HtmlUtil.setVendorStyle=function(a,b,d){for(var a=a.style,c=0,e=g.html.HtmlUtil.VENDOR_PREFIXES;c<e.length;){var f=e[c];++c;a.setProperty("-"+f+"-"+b,d)}a.setProperty(b,d)};g.html.HtmlUtil.addVendorListener=function(a,b,d,c){for(var e=0,f=g.html.HtmlUtil.VENDOR_PREFIXES;e<f.length;){var h=f[e];++e;a.addEventListener(h+b,d,c)}a.addEventListener(b,d,c)};g.html.HtmlUtil.orientation=function(a){switch(a){case -90:case 90:return j.Orientation.Landscape;
default:return j.Orientation.Portrait}};g.html.HtmlUtil.createCanvas=function(a){var b=B.document.createElement("canvas");b.width=a.width;b.height=a.height;var d=b.getContext("2d");d.save();d.globalCompositeOperation="copy";d.drawImage(a,0,0);d.restore();return b};z={Web:function(){}};k["flambe.web.Web"]=z.Web;z.Web.__name__=["flambe","web","Web"];z.Web.prototype={__class__:z.Web,__properties__:{get_supported:"get_supported"}};g.html.HtmlWeb=function(a){this._container=a};k["flambe.platform.html.HtmlWeb"]=
g.html.HtmlWeb;g.html.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];g.html.HtmlWeb.__interfaces__=[z.Web];g.html.HtmlWeb.prototype={openBrowser:function(a){B.window.open(a,"_blank")},createView:function(a,b,d,c){var e=B.document.createElement("iframe");e.style.position="absolute";e.style.border="0";e.scrolling="no";this._container.appendChild(e);a=new g.html.HtmlWebView(e,a,b,d,c);g.html.HtmlPlatform.instance.mainLoop.addTickable(a);return a},get_supported:function(){return!0},__class__:g.html.HtmlWeb,
__properties__:{get_supported:"get_supported"}};z.WebView=function(){};k["flambe.web.WebView"]=z.WebView;z.WebView.__name__=["flambe","web","WebView"];z.WebView.__interfaces__=[m.Disposable];z.WebView.prototype={__class__:z.WebView};g.html.HtmlWebView=function(a,b,d,c,e){var f=this;this.iframe=a;a=function(){f.updateBounds()};this.x=new F.AnimatedFloat(b,a);this.y=new F.AnimatedFloat(d,a);this.width=new F.AnimatedFloat(c,a);this.height=new F.AnimatedFloat(e,a);this.updateBounds();this.url=new m.Value(null,
function(a){f.loadUrl(a)});this.error=new m.Signal1};k["flambe.platform.html.HtmlWebView"]=g.html.HtmlWebView;g.html.HtmlWebView.__name__=["flambe","platform","html","HtmlWebView"];g.html.HtmlWebView.__interfaces__=[g.Tickable,z.WebView];g.html.HtmlWebView.prototype={loadUrl:function(a){null!=this.iframe&&(this.iframe.src=a)},updateBounds:function(){null!=this.iframe&&(this.iframe.style.left=this.x._value+"px",this.iframe.style.top=this.y._value+"px",this.iframe.width=this.width._value,this.iframe.height=
this.height._value)},update:function(a){this.x.update(a);this.y.update(a);this.width.update(a);this.height.update(a);return null==this.iframe},dispose:function(){null!=this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)},__class__:g.html.HtmlWebView};g.html.WebAudioSound=function(a){this.buffer=a};k["flambe.platform.html.WebAudioSound"]=g.html.WebAudioSound;g.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];g.html.WebAudioSound.__interfaces__=[H.Sound];
g.html.WebAudioSound.__properties__={get_supported:"get_supported"};g.html.WebAudioSound.get_supported=function(){if(g.html.WebAudioSound._detectSupport){g.html.WebAudioSound._detectSupport=!1;var a=g.html.HtmlUtil.loadExtension("AudioContext").value;g.html.WebAudioSound.ctx=null!=a?new a:null}return null!=g.html.WebAudioSound.ctx};g.html.WebAudioSound.prototype={get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new g.html._WebAudioSound.WebAudioPlayback(this,
a,!0)},play:function(a){null==a&&(a=1);return new g.html._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:g.html.WebAudioSound,__properties__:{get_duration:"get_duration"}};g.html._WebAudioSound={};g.html._WebAudioSound.WebAudioPlayback=function(a,b,d){var c=this;this._sound=a;this._head=g.html.WebAudioSound.ctx.destination;this._sourceNode=g.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=d;null!=this._sourceNode.noteOn?this._sourceNode.noteOn(0):
this._sourceNode.start(0);this.playAudio();this.volume=new F.AnimatedFloat(b,function(a){c.setVolume(a)});1!=b&&this.setVolume(b)};k["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=g.html._WebAudioSound.WebAudioPlayback;g.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];g.html._WebAudioSound.WebAudioPlayback.__interfaces__=[g.Tickable,H.Playback];g.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){this._sourceNode.connect(this._head);
this._startedAt=g.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(this._tickableAdded=!0,g.html.HtmlPlatform.instance.mainLoop.addTickable(this))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=null!=g.html.WebAudioSound.ctx.createGainNode?g.html.WebAudioSound.ctx.createGainNode():g.html.WebAudioSound.ctx.createGain(),this.insertNode(this._gainNode));
this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return 3==this._sourceNode.playbackState||0<=this._pausedAt?(this._tickableAdded=!1,!0):!1},get_position:function(){return 3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(g.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return 3==this._sourceNode.playbackState},set_paused:function(a){a!=0<=
this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_paused:function(){return 0<=this._pausedAt},get_sound:function(){return this._sound},__class__:g.html._WebAudioSound.WebAudioPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}};z={Director:function(){this._width=this._height=-1;this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=
new O}};k["flambe.scene.Director"]=z.Director;z.Director.__name__=["flambe","scene","Director"];z.Director.__super__=L;z.Director.prototype=v(L.prototype,{get_height:function(){return 0>this._height?D._platform.getStage().get_height():this._height},get_width:function(){return 0>this._width?D._platform.getStage().get_width():this._width},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=
this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_4;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_4;null!=a&&a.shown.emit0()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();
for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},get_name:function(){return"Director_0"},__class__:z.Director});z._Director={};z._Director.Transitor=function(){};k["flambe.scene._Director.Transitor"]=z._Director.Transitor;z._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];z._Director.Transitor.prototype={complete:function(){this._transition.complete();
this._onComplete()},update:function(a){return this._transition.update(a)},__class__:z._Director.Transitor};z.Scene=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new m.Signal0;this.hidden=new m.Signal0};k["flambe.scene.Scene"]=z.Scene;z.Scene.__name__=["flambe","scene","Scene"];z.Scene.__super__=L;z.Scene.prototype=v(L.prototype,{get_name:function(){return"Scene_4"},__class__:z.Scene});z.Transition=function(){};k["flambe.scene.Transition"]=z.Transition;z.Transition.__name__=["flambe","scene",
"Transition"];z.Transition.prototype={complete:function(){},update:function(){return!0},__class__:z.Transition};H._Mixer={};H._Mixer.MixerSound=function(a,b){this._source=a;this._channels=b;this._playbacks=[]};k["flambe.sound._Mixer.MixerSound"]=H._Mixer.MixerSound;H._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];H._Mixer.MixerSound.__interfaces__=[m.Disposable,H.Sound];H._Mixer.MixerSound.prototype={dispose:function(){for(var a=0,b=this._playbacks;a<b.length;){var d=b[a];++a;
d.dispose()}this._playbacks=[]},get_duration:function(){return this._source.get_duration()},findOpenChannel:function(){for(var a=0,b=this._channels;a<b;){var d=a++,c=this._playbacks[d];if(null==c||c.get_ended())return d}return-1},playOrLoop:function(a,b){var d=this.findOpenChannel();if(0>d)return new g.DummyPlayback(this);var c=b?this._source.loop(a):this._source.play(a);return this._playbacks[d]=c},loop:function(a){null==a&&(a=1);return this.playOrLoop(a,!0)},play:function(a){null==a&&(a=1);return this.playOrLoop(a,
!1)},__class__:H._Mixer.MixerSound,__properties__:{get_duration:"get_duration"}};w={BitmapSprite:function(a){j.Sprite.call(this);this.symbol=a;this.anchorX.set__(a.anchorX);this.anchorY.set__(a.anchorY)}};k["flambe.swf.BitmapSprite"]=w.BitmapSprite;w.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];w.BitmapSprite.__super__=j.Sprite;w.BitmapSprite.prototype=v(j.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,
0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:w.BitmapSprite});w.Symbol=function(){};k["flambe.swf.Symbol"]=w.Symbol;w.Symbol.__name__=["flambe","swf","Symbol"];w.Symbol.prototype={__class__:w.Symbol,__properties__:{get_name:"get_name"}};w.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var d=a.rect;this.x=d[0];this.y=d[1];this.width=d[2];this.height=d[3];d=a.origin;null!=d?(this.anchorX=d[0],this.anchorY=d[1]):(d=a.offset,null!=d?(this.anchorX=-d[0],
this.anchorY=-d[1]):this.anchorY=this.anchorX=0)};k["flambe.swf.BitmapSymbol"]=w.BitmapSymbol;w.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];w.BitmapSymbol.__interfaces__=[w.Symbol];w.BitmapSymbol.prototype={get_name:function(){return this._name},createSprite:function(){return new w.BitmapSprite(this)},__class__:w.BitmapSymbol,__properties__:{get_name:"get_name"}};w.Library=function(a,b){this._symbols=new G;var d=X.parse(a.getFile(b+"/library.json"));this.frameRate=d.frameRate;for(var c=
[],e=0,f=d.movies;e<f.length;){var g=f[e];++e;g=new w.MovieSymbol(this,g);c.push(g);this._symbols.set(g.get_name(),g)}null!=d.textureGroups?(e=d.textureGroups,(1!=e[0].scaleFactor||1<e.length)&&null,g=e[0].atlases):g=d.atlases;for(e=0;e<g.length;){d=g[e];++e;for(var h=a.getTexture(b+"/"+m.Strings.removeFileExtension(d.file)),f=0,d=d.textures;f<d.length;){var i=d[f];++f;i=new w.BitmapSymbol(i,h);this._symbols.set(i.get_name(),i)}}for(e=0;e<c.length;){g=c[e];++e;f=0;for(d=g.layers;f<d.length;){g=d[f];
++f;h=0;for(i=g.keyframes;h<i.length;){var j=i[h];++h;var k=this._symbols.get(j.symbolName);null!=k&&(null==g.lastSymbol?g.lastSymbol=k:g.lastSymbol!=k&&(g.multipleSymbols=!0),j.symbol=k)}}}};k["flambe.swf.Library"]=w.Library;w.Library.__name__=["flambe","swf","Library"];w.Library.prototype={__class__:w.Library};w.MovieSprite=function(a){this._looped=null;j.Sprite.call(this);this.symbol=a;this.speed=new F.AnimatedFloat(1);this._animators=[];for(var b=0,a=a.layers;b<a.length;){var d=a[b];++b;this._animators.push(new w._MovieSprite.LayerAnimator(d))}this._position=
this._frame=0;this["goto"](1)};k["flambe.swf.MovieSprite"]=w.MovieSprite;w.MovieSprite.__name__=["flambe","swf","MovieSprite"];w.MovieSprite.__super__=j.Sprite;w.MovieSprite.prototype=v(j.Sprite.prototype,{get_looped:function(){null==this._looped&&(this._looped=new m.Signal0);return this._looped},set_paused:function(a){this._flags=m.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=I.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<
this._frame)for(var b=0,d=this._animators;b<d.length;){var c=d[b];++b;c.changedKeyframe=!0;c.keyframeIdx=0}b=0;for(d=this._animators;b<d.length;)c=d[b],++b,c.composeFrame(a);this._frame=a}},onUpdate:function(a){j.Sprite.prototype.onUpdate.call(this,a);this.speed.update(a);var b=!1;0==(this._flags&16)&&(this._position+=this.speed._value*a,this._position>this.symbol.duration&&(this._position%=this.symbol.duration,b=!0));this["goto"](this._position*this.symbol.frameRate);b&&null!=this._looped&&this._looped.emit0()},
onRemoved:function(){j.Sprite.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var d=b[a];++a;this.owner.removeChild(d.content)}},onAdded:function(){j.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var d=b[a];++a;this.owner.addChild(d.content)}},__class__:w.MovieSprite,__properties__:v(j.Sprite.prototype.__properties__,{set_position:"set_position",get_position:"get_position",set_paused:"set_paused",get_paused:"get_paused"})});w._MovieSprite=
{};w._MovieSprite.LayerAnimator=function(a){this._sprites=null;this.changedKeyframe=!1;this.keyframeIdx=0;this.layer=a;this.content=new O;var b;if(a.multipleSymbols){this._sprites=[];b=0;for(a=a.keyframes;b<a.length;){var d=a[b];++b;this._sprites.push(d.symbol.createSprite())}b=this._sprites[0]}else b=null!=a.lastSymbol?a.lastSymbol.createSprite():new j.Sprite;this.content.add(b)};k["flambe.swf._MovieSprite.LayerAnimator"]=w._MovieSprite.LayerAnimator;w._MovieSprite.LayerAnimator.__name__=["flambe",
"swf","_MovieSprite","LayerAnimator"];w._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){for(var b=this.layer.keyframes,d=b.length-1;this.keyframeIdx<d&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.changedKeyframe=!0;var c;this.changedKeyframe&&null!=this._sprites?(this.changedKeyframe=!1,c=this._sprites[this.keyframeIdx],this.content.add(c)):c=this.content._compMap.Sprite_1;var e=b[this.keyframeIdx],f=e.visible;c.set_visible(f);if(f){var f=e.x,g=e.y,h=e.scaleX,i=e.scaleY,
j=e.skewX,k=e.skewY,l=e.alpha;if(this.keyframeIdx<d){a=(a-e.index)/e.duration;d=e.ease;if(0!=d){var m;0>d?(m=1-a,m=1-m*m,d=-d):m=a*a;a=d*m+(1-d)*a}b=b[this.keyframeIdx+1];f+=(b.x-f)*a;g+=(b.y-g)*a;h+=(b.scaleX-h)*a;i+=(b.scaleY-i)*a;j+=(b.skewX-j)*a;k+=(b.skewY-k)*a;l+=(b.alpha-l)*a}b=c.getLocalMatrix();a=Math.sin(j);j=Math.cos(j);d=Math.sin(k);k=Math.cos(k);b.set(k*h,d*h,-a*i,j*i,f,g);b.translate(-(e.pivotX+c.anchorX._value),-(e.pivotY+c.anchorY._value));c.alpha.set__(l)}},__class__:w._MovieSprite.LayerAnimator};
w.MovieSymbol=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=[];for(var d=0,c=b.layers;d<c.length;){var e=c[d];++d;e=new w.MovieLayer(e);this.frames=Math.max(e.get_frames(),this.frames);this.layers.push(e)}this.duration=this.frames/this.frameRate};k["flambe.swf.MovieSymbol"]=w.MovieSymbol;w.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];w.MovieSymbol.__interfaces__=[w.Symbol];w.MovieSymbol.prototype={createSprite:function(){return new w.MovieSprite(this)},
get_name:function(){return this._name},__class__:w.MovieSymbol,__properties__:{get_name:"get_name"}};w.MovieLayer=function(a){this.name=a.name;this.multipleSymbols=!1;this.keyframes=[];for(var b=null,d=0,a=a.keyframes;d<a.length;){var c=a[d];++d;b=new w.MovieKeyframe(c,b);this.keyframes.push(b)}};k["flambe.swf.MovieLayer"]=w.MovieLayer;w.MovieLayer.__name__=["flambe","swf","MovieLayer"];w.MovieLayer.prototype={get_frames:function(){var a=this.keyframes[this.keyframes.length-1];return a.index+(a.duration|
0)},__class__:w.MovieLayer,__properties__:{get_frames:"get_frames"}};w.MovieKeyframe=function(a,b){this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;this.y=this.x=0;this.scaleY=this.scaleX=1;this.pivotY=this.pivotX=this.skewY=this.skewX=0;this.alpha=1;this.visible=!0;this.ease=0;if(null!=this.symbolName){var d=a.loc;null!=d&&(this.x=d[0],this.y=d[1]);d=a.scale;null!=d&&(this.scaleX=d[0],this.scaleY=d[1]);d=a.skew;null!=d&&(this.skewX=d[0],this.skewY=
d[1]);d=a.pivot;null!=d&&(this.pivotX=d[0],this.pivotY=d[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.ease&&(this.ease=a.ease)}};k["flambe.swf.MovieKeyframe"]=w.MovieKeyframe;w.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];w.MovieKeyframe.prototype={__class__:w.MovieKeyframe};m.Assert=function(){};k["flambe.util.Assert"]=m.Assert;m.Assert.__name__=["flambe","util","Assert"];m.BitSets=function(){};k["flambe.util.BitSets"]=m.BitSets;m.BitSets.__name__=
["flambe","util","BitSets"];m.BitSets.set=function(a,b,d){return d?a|b:a&~b};m.LogHandler=function(){};k["flambe.util.LogHandler"]=m.LogHandler;m.LogHandler.__name__=["flambe","util","LogHandler"];m.LogHandler.prototype={__class__:m.LogHandler};m.Promise=function(){this.success=new m.Signal1;this.error=new m.Signal1;this.progressChanged=new m.Signal0;this.hasResult=!1;this._total=this._progress=0};k["flambe.util.Promise"]=m.Promise;m.Promise.__name__=["flambe","util","Promise"];m.Promise.prototype=
{set_total:function(a){this._total=a;this.progressChanged.emit0();return a},set_progress:function(a){this._progress=a;this.progressChanged.emit0();return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit1(a);return a},get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},__class__:m.Promise,
__properties__:{set_result:"set_result",get_result:"get_result",set_progress:"set_progress",get_progress:"get_progress",set_total:"set_total",get_total:"get_total"}};m.Signal0=function(a){m.SignalBase.call(this,a)};k["flambe.util.Signal0"]=m.Signal0;m.Signal0.__name__=["flambe","util","Signal0"];m.Signal0.__super__=m.SignalBase;m.Signal0.prototype=v(m.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:m.Signal0});m._SignalBase={};m._SignalBase.Task=
function(a){this.next=null;this.fn=a};k["flambe.util._SignalBase.Task"]=m._SignalBase.Task;m._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];m._SignalBase.Task.prototype={__class__:m._SignalBase.Task};C=void 0;T=void 0;P=void 0;S=void 0;U=void 0;da=void 0;X=void 0;da=function(a){this.url=a;this.headers=new G;this.params=new G;this.async=!0};k["haxe.Http"]=da;da.__name__=["haxe","Http"];da.prototype={onStatus:function(){},onError:function(){},onData:function(){},request:function(a){var b=
this,d=new ha,c=function(){if(4==d.readyState){var a;try{a=d.status}catch(c){a=null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.onData(d.responseText);else switch(a){case null:case void 0:b.onError("Failed to connect or resolve host");break;case 12029:b.onError("Failed to connect to host");break;case 12007:b.onError("Unknown host");break;default:b.onError("Http Error #"+d.status)}}};this.async&&(d.onreadystatechange=c);var e=this.postData;if(null!=e)a=!0;else for(var f=
this.params.keys();f.hasNext();)var g=f.next(),e=null==e?"":e+"&",e=e+(Q.urlEncode(g)+"="+Q.urlEncode(this.params.get(g)));try{if(a)d.open("POST",this.url,this.async);else if(null!=e){var h=1>=this.url.split("?").length;d.open("GET",this.url+(h?"?":"&")+e,this.async);e=null}else d.open("GET",this.url,this.async)}catch(i){this.onError(i.toString());return}null==this.headers.get("Content-Type")&&a&&null==this.postData&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=this.headers.keys();a.hasNext();)f=
a.next(),d.setRequestHeader(f,this.headers.get(f));d.send(e);this.async||c()},__class__:da};X=function(){};k["haxe.Json"]=X;X.__name__=["haxe","Json"];X.parse=function(a){return(new X).doParse(a)};X.prototype={parseString:function(){for(var a=this.pos,b=new Z;;){var d=this.str.charCodeAt(this.pos++);if(34==d)break;if(92==d){b.b+=A.substr(this.str,a,this.pos-a-1);d=this.str.charCodeAt(this.pos++);switch(d){case 114:b.b+=String.fromCharCode(13);break;case 110:b.b+=String.fromCharCode(10);break;case 116:b.b+=
String.fromCharCode(9);break;case 98:b.b+=String.fromCharCode(8);break;case 102:b.b+=String.fromCharCode(12);break;case 47:case 92:case 34:b.b+=String.fromCharCode(d);break;case 117:a=q.parseInt("0x"+A.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(d)+" at position "+(this.pos-1);}a=this.pos}else if(d!=d)throw"Unclosed string";}b.b+=A.substr(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;)switch(this.str.charCodeAt(this.pos++)){case 32:case 13:case 10:case 9:break;
case 123:for(var a={},b=null,d=null;;){var c=this.str.charCodeAt(this.pos++);switch(c){case 32:case 13:case 10:case 9:break;case 125:return(null!=b||!1==d)&&this.invalidChar(),a;case 58:null==b&&this.invalidChar();a[b]=this.parseRec();b=null;d=!0;break;case 44:d?d=!1:this.invalidChar();break;case 34:d&&this.invalidChar();b=this.parseString();break;default:this.invalidChar()}}break;case 91:a=[];for(d=null;;)switch(c=this.str.charCodeAt(this.pos++),c){case 32:case 13:case 10:case 9:break;case 93:return!1==
d&&this.invalidChar(),a;case 44:d?d=!1:this.invalidChar();break;default:d&&this.invalidChar(),this.pos--,a.push(this.parseRec()),d=!0}break;case 116:d=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=d,this.invalidChar();return!0;case 102:d=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=d,this.invalidChar();
return!1;case 110:d=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=d,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.reg_float.match(A.substr(this.str,this.pos,null)))throw"Invalid float at position "+this.pos;d=this.reg_float.matched(0);this.pos+=d.length;d=q.parseFloat(d);c=d|0;return c==
d?c:d;default:this.invalidChar()}},invalidChar:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.reg_float=new W("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=a;this.pos=0;return this.parseRec()},__class__:X};S=function(){this.buf=new Z;this.cache=[];this.useCache=S.USE_CACHE;this.useEnumIndex=S.USE_ENUM_INDEX;this.shash=new G;this.scount=0};k["haxe.Serializer"]=S;S.__name__=["haxe","Serializer"];S.run=function(a){var b=
new S;b.serialize(a);return b.toString()};S.prototype={serialize:function(a){var b=N["typeof"](a);switch(b[1]){case 0:this.buf.b+=q.string("n");break;case 1:if(0==a){this.buf.b+=q.string("z");break}this.buf.b+=q.string("i");this.buf.b+=q.string(a);break;case 2:Math.isNaN(a)?this.buf.b+=q.string("k"):Math.isFinite(a)?(this.buf.b+=q.string("d"),this.buf.b+=q.string(a)):this.buf.b+=q.string(0>a?"m":"p");break;case 3:this.buf.b+=q.string(a?"t":"f");break;case 6:b=b[2];if(b==String){this.serializeString(a);
break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:var d=0;this.buf.b+=q.string("a");for(var c=a.length,e=0;e<c;)b=e++,null==a[b]?d++:(0<d&&(1==d?this.buf.b+=q.string("n"):(this.buf.b+=q.string("u"),this.buf.b+=q.string(d)),d=0),this.serialize(a[b]));0<d&&(1==d?this.buf.b+=q.string("n"):(this.buf.b+=q.string("u"),this.buf.b+=q.string(d)));this.buf.b+=q.string("h");break;case ea:this.buf.b+=q.string("l");for(a=a.iterator();a.hasNext();)b=a.next(),this.serialize(b);this.buf.b+=
q.string("h");break;case Date:this.buf.b+=q.string("v");this.buf.b+=q.string(A.dateStr(a));break;case G:this.buf.b+=q.string("b");for(d=a.keys();d.hasNext();)b=d.next(),this.serializeString(b),this.serialize(a.get(b));this.buf.b+=q.string("h");break;case V:this.buf.b+=q.string("q");for(d=a.keys();d.hasNext();)b=d.next(),this.buf.b+=q.string(":"),this.buf.b+=q.string(b),this.serialize(a.get(b));this.buf.b+=q.string("h");break;case U.Bytes:b=0;d=a.length-2;c=new Z;for(e=S.BASE64;b<d;){var f=a.b[b++],
g=a.b[b++],h=a.b[b++];c.b+=q.string(e.charAt(f>>2));c.b+=q.string(e.charAt((f<<4|g>>4)&63));c.b+=q.string(e.charAt((g<<2|h>>6)&63));c.b+=q.string(e.charAt(h&63))}b==d?(f=a.b[b++],g=a.b[b++],c.b+=q.string(e.charAt(f>>2)),c.b+=q.string(e.charAt((f<<4|g>>4)&63)),c.b+=q.string(e.charAt(g<<2&63))):b==d+1&&(f=a.b[b++],c.b+=q.string(e.charAt(f>>2)),c.b+=q.string(e.charAt(f<<4&63)));b=c.b;this.buf.b+=q.string("s");this.buf.b+=q.string(b.length);this.buf.b+=q.string(":");this.buf.b+=q.string(b);break;default:this.cache.pop(),
null!=a.hxSerialize?(this.buf.b+=q.string("C"),this.serializeString(N.getClassName(b)),this.cache.push(a),a.hxSerialize(this),this.buf.b+=q.string("g")):(this.buf.b+=q.string("c"),this.serializeString(N.getClassName(b)),this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+=q.string("o");this.serializeFields(a);break;case 7:b=b[2];if(this.useCache&&this.serializeRef(a))break;this.cache.pop();this.buf.b+=q.string(this.useEnumIndex?"j":"w");
this.serializeString(N.getEnumName(b));this.useEnumIndex?(this.buf.b+=q.string(":"),this.buf.b+=q.string(a[1])):this.serializeString(a[0]);this.buf.b+=q.string(":");c=a.length;this.buf.b+=q.string(c-2);for(e=2;e<c;)b=e++,this.serialize(a[b]);this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+q.string(a);}},serializeFields:function(a){for(var b=0,c=K.fields(a);b<c.length;){var e=c[b];++b;this.serializeString(e);this.serialize(K.field(a,e))}this.buf.b+=
q.string("g")},serializeRef:function(a){for(var b=typeof a,c=0,e=this.cache.length;c<e;){var f=c++,g=this.cache[f];if(typeof g==b&&g==a)return this.buf.b+=q.string("r"),this.buf.b+=q.string(f),!0}this.cache.push(a);return!1},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+=q.string("R"),this.buf.b+=q.string(b)):(this.shash.set(a,this.scount++),this.buf.b+=q.string("y"),a=Q.urlEncode(a),this.buf.b+=q.string(a.length),this.buf.b+=q.string(":"),this.buf.b+=q.string(a))},toString:function(){return this.buf.b},
__class__:S};T=function(a){var b=this;this.id=window.setInterval(function(){b.run()},a)};k["haxe.Timer"]=T;T.__name__=["haxe","Timer"];T.delay=function(a,b){var c=new T(b);c.run=function(){c.stop();a()};return c};T.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:T};P=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=P.DEFAULT_RESOLVER;null==a&&(a=N,P.DEFAULT_RESOLVER=a);this.setResolver(a)};k["haxe.Unserializer"]=
P;P.__name__=["haxe","Unserializer"];P.initCodes=function(){for(var a=[],b=0,c=P.BASE64.length;b<c;){var e=b++;a[P.BASE64.charCodeAt(e)]=e}return a};P.run=function(a){return(new P(a)).unserialize()};P.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return q.parseFloat(A.substr(this.buf,
a,this.pos-a));case 121:b=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid string length";a=A.substr(this.buf,this.pos,b);this.pos+=b;a=Q.urlDecode(a);this.scache.push(a);return a;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):
a.push(this.unserialize())}return a;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 114:b=this.readDigits();if(0>b||b>=this.cache.length)throw"Invalid reference";return this.cache[b];case 82:b=this.readDigits();if(0>b||b>=this.scache.length)throw"Invalid string reference";return this.scache[b];case 120:throw this.unserialize();case 99:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);this.unserializeObject(b);
return b;case 119:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;b=this.unserializeEnum(a,this.unserialize());this.cache.push(b);return b;case 106:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;this.pos++;var c=this.readDigits(),e=N.getEnumConstructs(a)[c];if(null==e)throw"Unknown enum index "+b+"@"+c;b=this.unserializeEnum(a,e);this.cache.push(b);return b;case 108:b=new ea;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());
this.pos++;return b;case 98:c=new G;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 113:c=new V;this.cache.push(c);for(b=this.buf.charCodeAt(this.pos++);58==b;)a=this.readDigits(),c.set(a,this.unserialize()),b=this.buf.charCodeAt(this.pos++);if(104!=b)throw"Invalid IntHash format";return c;case 118:return b=A.strDate(A.substr(this.buf,this.pos,19)),this.cache.push(b),this.pos+=19,b;case 115:b=this.readDigits();c=
this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid bytes length";e=P.CODES;null==e&&(e=P.initCodes(),P.CODES=e);for(var a=this.pos,f=b&3,g=a+(b-f),h=U.Bytes.alloc(3*(b>>2)+(2<=f?f-1:0)),i=0;a<g;){var j=e[c.charCodeAt(a++)],k=e[c.charCodeAt(a++)];h.b[i++]=(j<<2|k>>4)&255;j=e[c.charCodeAt(a++)];h.b[i++]=(k<<4|j>>2)&255;k=e[c.charCodeAt(a++)];h.b[i++]=(j<<6|k)&255}2<=f&&(j=e[c.charCodeAt(a++)],k=e[c.charCodeAt(a++)],h.b[i++]=(j<<2|k>>4)&255,3==f&&(j=e[c.charCodeAt(a++)],
h.b[i++]=(k<<4|j>>2)&255));this.pos+=b;this.cache.push(h);return h;case 67:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw"Invalid custom data";return b}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw"Invalid enum format";var c=this.readDigits();
if(0==c)return N.createEnum(a,b);for(var e=[];0<c--;)e.push(this.unserialize());return N.createEnum(a,b,e)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if(!x.__instanceof(b,String))throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(45==e){if(this.pos!=c)break;b=!0}else{if(48>
e||57<e)break;a=10*a+(e-48)}this.pos++}b&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:P};U={Bytes:function(a,b){this.length=a;this.b=b}};k["haxe.io.Bytes"]=U.Bytes;U.Bytes.__name__=["haxe","io","Bytes"];U.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new U.Bytes(a,b)};U.Bytes.ofData=function(a){return new U.Bytes(a.length,a)};U.Bytes.prototype={__class__:U.Bytes};C={_Fast:{}};
C._Fast.NodeAccess=function(a){this.__x=a};k["haxe.xml._Fast.NodeAccess"]=C._Fast.NodeAccess;C._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];C._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==u.Document?"Document":this.__x.getNodeName())+" is missing element "+a;return new C.Fast(b)},__class__:C._Fast.NodeAccess};C._Fast.AttribAccess=function(a){this.__x=a};k["haxe.xml._Fast.AttribAccess"]=C._Fast.AttribAccess;
C._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];C._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==u.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.getNodeName()+" is missing attribute "+a;return b},__class__:C._Fast.AttribAccess};C._Fast.HasAttribAccess=function(a){this.__x=a};k["haxe.xml._Fast.HasAttribAccess"]=C._Fast.HasAttribAccess;C._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];
C._Fast.HasAttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==u.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:C._Fast.HasAttribAccess};C._Fast.HasNodeAccess=function(a){this.__x=a};k["haxe.xml._Fast.HasNodeAccess"]=C._Fast.HasNodeAccess;C._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast","HasNodeAccess"];C._Fast.HasNodeAccess.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:C._Fast.HasNodeAccess};C._Fast.NodeListAccess=
function(a){this.__x=a};k["haxe.xml._Fast.NodeListAccess"]=C._Fast.NodeListAccess;C._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];C._Fast.NodeListAccess.prototype={resolve:function(a){for(var b=new ea,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new C.Fast(c))}return b},__class__:C._Fast.NodeListAccess};C.Fast=function(a){if(a.nodeType!=u.Document&&a.nodeType!=u.Element)throw"Invalid nodeType "+q.string(a.nodeType);this.x=a;this.node=new C._Fast.NodeAccess(a);
this.nodes=new C._Fast.NodeListAccess(a);this.att=new C._Fast.AttribAccess(a);this.has=new C._Fast.HasAttribAccess(a);this.hasNode=new C._Fast.HasNodeAccess(a)};k["haxe.xml.Fast"]=C.Fast;C.Fast.__name__=["haxe","xml","Fast"];C.Fast.prototype={getElements:function(){var a=this.x.elements();return{hasNext:s(a,a.hasNext),next:function(){var b=a.next();return null==b?null:new C.Fast(b)}}},getInnerHTML:function(){for(var a=new Z,b=this.x.iterator();b.hasNext();){var c=b.next();a.b+=q.string(c.toString())}return a.b},
getInnerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.getName()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==u.PCData&&c.nodeType==u.CData&&""==Q.trim(b.getNodeValue())&&(b=a.next(),null==b||b.nodeType==u.PCData&&""==Q.trim(b.getNodeValue())&&null==a.next()))return c.getNodeValue();throw this.getName()+" does not only have data";}if(b.nodeType!=u.PCData&&b.nodeType!=u.CData)throw this.getName()+" does not have data";return b.getNodeValue()},getName:function(){return this.x.nodeType==
u.Document?"Document":this.x.getNodeName()},__class__:C.Fast,__properties__:{get_name:"getName",get_innerData:"getInnerData"}};C.Parser=function(){};k["haxe.xml.Parser"]=C.Parser;C.Parser.__name__=["haxe","xml","Parser"];C.Parser.parse=function(a){var b=u.createDocument();C.Parser.doParse(a,0,b);return b};C.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var e=null,f=1,g=1,h=null,i=0,j=0,k=0,l=a.charCodeAt(b);l==l;){switch(f){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:f=g;continue}break;
case 1:switch(l){case 60:f=0;g=2;break;default:i=b;f=13;continue}break;case 13:60==l&&(f=u.createPCData(A.substr(a,i,b-i)),c.addChild(f),j++,f=0,g=2);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=u.createCData(A.substr(a,i,b-i)),c.addChild(f),j++,b+=2,f=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=A.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;f=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=A.substr(a,
b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;f=15}i=b+1;break;case 63:f=14;i=b;break;case 47:if(null==c)throw"Expected node name";i=b+1;f=0;g=10;break;default:f=3;i=b;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==i)throw"Expected node name";e=u.createElement(A.substr(a,i,b-i));c.addChild(e);f=0;g=4;continue}break;case 4:switch(l){case 47:f=11;j++;break;
case 62:f=9;j++;break;default:f=5;i=b;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw"Expected attribute name";h=A.substr(a,i,b-i);if(e.exists(h))throw"Duplicate attribute";f=0;g=6;continue}break;case 6:switch(l){case 61:f=0;g=7;break;default:throw"Expected =";}break;case 7:switch(l){case 34:case 39:f=8;i=b;break;default:throw'Expected "';}break;case 8:l==a.charCodeAt(i)&&(g=A.substr(a,i+1,b-i-1),e.set(h,g),f=0,g=4);break;case 9:i=b=
C.Parser.doParse(a,b,e);f=1;break;case 11:switch(l){case 62:f=1;break;default:throw"Expected >";}break;case 12:switch(l){case 62:return 0==j&&c.addChild(u.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw"Expected node name";if(A.substr(a,i,b-i)!=c.getNodeName())throw"Expected </"+c.getNodeName()+">";f=0;g=12;continue}break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(u.createComment(A.substr(a,
i,b-i))),b+=2,f=1);break;case 16:91==l?k++:93==l?k--:62==l&&0==k&&(c.addChild(u.createDocType(A.substr(a,i,b-i))),f=1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,f=A.substr(a,i+1,b-i-2),c.addChild(u.createProlog(f)),f=1)}l=a.charCodeAt(++b)}1==f&&(i=b,f=13);if(13==f)return(b!=i||0==j)&&c.addChild(u.createPCData(A.substr(a,i,b-i))),b;throw"Unexpected end";};Array.prototype.indexOf?A.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0}:null;Math.__name__=["Math"];
Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;k.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=k.String=String;String.__name__=["String"];Array.prototype.__class__=k.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=k.Date=Date;Date.__name__=["Date"];var ka=k.Int={__name__:["Int"]},la=k.Dynamic={__name__:["Dynamic"]},ia=k.Float=Number;ia.__name__=
["Float"];var ja=k.Bool=Boolean;ja.__ename__=["Bool"];var ma=k.Class={__name__:["Class"]},na={};u.Element="element";u.PCData="pcdata";u.CData="cdata";u.Comment="comment";u.DocType="doctype";u.Prolog="prolog";u.Document="document";"undefined"!=typeof document&&(B.document=document);"undefined"!=typeof window&&(B.window=window,B.window.onerror=function(a,b,c){var e=B.onerror;return null==e?!1:e(a,[b+":"+c])});"undefined"!=typeof JSON&&(X=JSON);if(window.XMLHttpRequest)L=XMLHttpRequest;else{if(!window.ActiveXObject)throw"Unable to create XMLHttpRequest object.";
L=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){throw"Unable to create XMLHttpRequest object.";}}}}ha=L;c.ConstantsApp.STAGE_WIDTH=960;c.ConstantsApp.STAGE_HEIGHT=560;c.ConstantsApp.STAGE_CENTER_X=480;c.ConstantsApp.STAGE_CENTER_Y=280;c.ConstantsApp.CURRENT_LEVEL="current_level";c.ConstantsApp.LAYER_BG="layer_bg";c.ConstantsApp.LAYER_PLAYER="layer_player";c.ConstantsApp.LAYER_FG="layer_fg";c.ConstantsApp.LAYER_UI="layer_ui";
c.ConstantsApp.EVENT_PAUSE="eventPause";c.ConstantsApp.EVENT_UNPAUSE="eventUnpause";c.ConstantsApp.EVENT_END_TURN="EVENT_END_TURN";c.ConstantsApp.EVENT_END_PLAYER_TURN="EVENT_END_PLAYER_TURN";c.ConstantsApp.EVENT_END_BABY_DRAGON_TURN="EVENT_END_BABY_DRAGON_TURN";c.ConstantsApp.EVENT_MUTE_TOGGLE="EVENT_MUTE_TOGGLE";c.ConstantsApp.EVENT_SPAWN_BABY_DRAGON="EVENT_SPAWN_BABY_DRAGON";c.ConstantsApp.EVENT_MEZ_BABY_DRAGON="EVENT_MEZ_BABY_DRAGON";c.ConstantsApp.EVENT_SPAWN_USER_INDICATOR="EVENT_SPAWN_USER_INDICATOR";
c.ConstantsApp.EVENT_SPAWN_COMBAT_TEXT="EVENT_SPAWN_COMBAT_TEXT";c.ConstantsApp.EVENT_SPAWN_FIRE="EVENT_SPAWN_FIRE";c.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";c.ConstantsApp.BOOL_GAME_WIN="bool_game_win";c.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";c.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";c.ConstantsApp.BOOL_GAMEOVER="bool_gameover";c.ConstantsApp.BOOL_PAUSED="bool_paused";c.ConstantsApp.BOOL_MUTED="bool_muted";c.ConstantsApp.BOOL_INPUT_LOCK="bool_inputlock";c.ConstantsApp.BOOL_ORIENTATION_ALERT=
"bool_orientation_alert";c.ConstantsApp.BOOL_FIRE_ENABLED="bool_fire_enabled";c.ConstantsApp.BOOL_WINGS_ENABLED="bool_wings_enabled";c.ConstantsApp.BOOL_HEAL_ENABLED="bool_heal_enabled";c.ConstantsApp.BOOL_MEZ_ENABLED="bool_mez_enabled";c.ConstantsApp.BOOL_FIRE_ON_COOLDOWN="BOOL_FIRE_ON_COOLDOWN";c.ConstantsApp.BOOL_WINGS_ON_COOLDOWN="BOOL_WINGS_ON_COOLDOWN";c.ConstantsApp.BOOL_HEAL_ON_COOLDOWN="BOOL_HEAL_ON_COOLDOWN";c.ConstantsApp.BOOL_MEZ_ON_COOLDOWN="BOOL_MEZ_ON_COOLDOWN";c.ConstantsApp.BOOL_TOUCH_DEVICE=
"BOOL_TOUCH_DEVICE";c.ConstantsApp.FLOAT_HEALTH="float_health";c.ConstantsApp.FLOAT_DRAGON_HEALTH="float_dragon_health";c.ConstantsApp.FLOAT_BABY_DRAGON_HEALTH="float_baby_dragon_health";c.ConstantsApp.FLOAT_SCORE="float_score";c.ConstantsApp.FLOAT_DAMAGE_AMOUNT="float_damage_amount";c.ConstantsApp.FLOAT_MAX_HEALTH="float_max_health";c.ConstantsApp.FLOAT_DRAGON_MAX_HEALTH="float_dragon_max_health";c.ConstantsApp.FLOAT_BABY_DRAGON_MAX_HEALTH="float_baby_dragon_max_health";c.ConstantsApp.FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH=
"FLOAT_PREVIOUS_PLAYER_RATIO_HEALTH";c.ConstantsApp.FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH="FLOAT_PREVIOUS_DRAGON_RATIO_HEALTH";c.ConstantsApp.FLOAT_PREVIOUS_BABY_DRAGON_RATIO_HEALTH="FLOAT_PREVIOUS_BABY_DRAGON_RATIO_HEALTH";c.ConstantsApp.INT_HEALTH="int_health";c.ConstantsApp.INT_LIVES="int_lives";c.ConstantsApp.INT_ATTACK_TYPE="int_attack_type";c.ConstantsApp.INT_HEAL_COOLDOWN="int_heal_cooldown";c.ConstantsApp.INT_FIRE_COOLDOWN="int_fire_cooldown";c.ConstantsApp.INT_WINGS_COOLDOWN="int_wings_cooldown";
c.ConstantsApp.INT_MEZ_COOLDOWN="int_mez_cooldown";c.ConstantsApp.INT_BABY_DRAGON_MEZ_COUNTER="INT_BABY_DRAGON_MEZ_COUNTER";c.ConstantsApp.INT_COMBAT_TEXT_TYPE="INT_COMBAT_TEXT_TYPE";c.ConstantsApp.INT_NUMBER_BABY_DRAGONS="int_number_baby_dragons";c.ConstantsApp.INPUT_CLICK="input_click";c.ConstantsApp.INPUT_SPACE="input_space";c.ConstantsApp.INPUT_Z="input_z";c.ConstantsApp.INPUT_X="input_x";c.ConstantsApp.INPUT_C="input_c";c.ConstantsApp.INPUT_P="input_p";c.ConstantsApp.INPUT_UP="input_up";c.ConstantsApp.INPUT_DOWN=
"input_down";c.ConstantsApp.INPUT_LEFT="input_left";c.ConstantsApp.INPUT_RIGHT="input_right";c.ConstantsApp.CONFIG_XML_PATH="config/config.xml";c.ConstantsApp.scaleFactor=1;c.ConstantsScreen.SCREEN_LOADING="loadpanel";c.ConstantsScreen.SCREEN_LOADING_OVERLAY="loadoverlay";c.ConstantsScreen.SCREEN_SPLASH="splash";c.ConstantsScreen.SCREEN_HELP="help";c.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";c.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";c.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";
c.ConstantsScreen.SCREEN_END_GAME="endgame";c.ConstantsScreen.SCREEN_CUTSCENE_BORDERS="cutsceneborders";c.ConstantsScreen.SCREEN_ATTACK_MENU="screenattackmenu";c.ConstantsScreen.SCREEN_LEVEL_WIN="screenlevelwin";c.ConstantsScreen.TRANSITION_FADE=0;c.ConstantsScreen.TRANSITION_SCROLL=1;c.ConstantsScreen.TRANSITION_SCROLL_DOWN=2;c.ConstantsScreen.TRANSITION_SCROLL_UP=3;c.ConstantsScreen.TRANSITION_STAGED=4;c.ConstantsScreen.TRANSITION_SCREENSHOT=5;c.ConstantsScreen.CHANGE_OPEN_BEGIN=0;c.ConstantsScreen.CHANGE_OPEN_COMPLETE=
1;c.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;c.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;c.ConstantsScreen.OUTPUT_OPENED=0;c.ConstantsScreen.OUTPUT_CLOSED=1;c.ConstantsScreen.CONDITION_CLOSED_ALL=0;c.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=1;c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;c.ConstantsScreen.CONDITION_IMMEDIATE=4;c.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";c.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE=
"FLOW_GAMEPLAY_MENU_CLOSE";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP_CLOSE="FLOW_GAMEPLAY_MENU_HELP_CLOSE";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";c.ConstantsScreen.FLOW_END_LEVEL_NEXT="FLOW_END_LEVEL_NEXT";c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";
c.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN="FLOW_BRANCH_LEVEL_WIN";c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_OPEN="FLOW_GAMEPLAY_ATTACK_MENU_OPEN";c.ConstantsScreen.FLOW_GAMEPLAY_ATTACK_MENU_CLOSE="FLOW_GAMEPLAY_ATTACK_MENU_CLOSE";h.buttons.ButtonBase.UP="workinBtnUp";h.buttons.ButtonBase.DOWN="workinBtnDown";
h.buttons.ButtonBase.CLICK="workinBtnClick";h.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";o.Display.EVENT_UPDATE_DISPLAY="event_update_display";h.screens.data.ScreenStateData.ACTION_STOP=0;h.screens.data.ScreenStateData.ACTION_OPENED=1;h.screens.data.ScreenStateData.ACTION_EVENT=2;h.screens.data.ScreenStateData.ACTION_NEW_STATE=3;h.screens.data.ScreenStateData.ACTION_CLOSED=4;h.screens.data.ScreenStateData.ACTION_FLOW=5;J.ConstantsCloud.STRING_REGION_ID="cloudregionid";J.ConstantsCloud.LOCALIZATION_XML_PATH=
"config/";J.ConstantsCloud.EVENT_FILES_LOADED="EVENT_WORKINCLOUD_FILES_LOADED";J.ConstantsCloud.EVENT_FILES_LOADING="EVENT_FILES_LOADING";J.ConstantsCloud.EVENT_FILES_ERROR="EVENT_FILES_ERROR";l.WMEventFlow.EVENT_FLOW="Nflow";l.WMEventInput.EVENT_INPUT="eventinput";l.WMEventInput.PHASE_DOWN=1;l.WMEventInput.PHASE_UP=0;l.WMEventInput.PHASE_MOVE=2;l.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";l.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";l.WMEventUpdate.EVENT_UPDATE="eventupdate";i.tween.PennerManager.EASE_LINEAR=
"linear";i.tween.PennerManager.EASE="ease";i.tween.PennerManager.EASE_QUAD="quad";i.tween.PennerManager.EASE_IN="easeIn";i.tween.PennerManager.EASE_QUAD_IN="quadIn";i.tween.PennerManager.EASE_OUT="easeOut";i.tween.PennerManager.EASE_QUAD_OUT="quadOut";i.tween.PennerManager.EASE_EXPO="expo";i.tween.PennerManager.EASE_EXPO_IN="expoIn";i.tween.PennerManager.EASE_EXPO_OUT="expoOut";i.tween.PennerManager.EASE_ELASTIC="elastic";i.tween.PennerManager.EASE_ELASTIC_IN="elasticIn";i.tween.PennerManager.EASE_ELASTIC_OUT=
"elasticOut";i.tween.PennerManager.EASE_BUMP="bump";i.tween.PennerManager.EASE_BUMP_IN="bumpIn";i.tween.PennerManager.EASE_BUMP_OUT="bumpOut";i.tween.PennerManager.EASE_BOUNCE="bounce";i.tween.PennerManager.EASE_BOUNCE_IN="bounceIn";i.tween.PennerManager.EASE_BOUNCE_OUT="bounceOut";i.tween.PennerManager.EASE_CUBIC="cubic";i.tween.PennerManager.EASE_CUBIC_IN="cubicIn";i.tween.PennerManager.EASE_CUBIC_OUT="cubicOut";i.tween.PennerManager.EASE_SPACE="space";i.tween.PennerManager.EASE_SPACE_IN="spaceIn";
i.tween.PennerManager.EASE_SPACE_OUT="spaceOut";i.tween.PennerManager.EASE_BLAST="blast";i.tween.PennerManager.EASE_BLAST_IN="blastIn";i.tween.PennerManager.EASE_BLAST_OUT="blastOut";i.tween.PennerManager.EASE_WAVE="wave";i.tween.PennerManager.EASE_WAVE_IN="waveIn";i.tween.PennerManager.EASE_WAVE_OUT="waveOut";i.tween.PennerManager.EASE_CIRCLE="circle";i.tween.PennerManager.EASE_CIRCLE_IN="circleIn";i.tween.PennerManager.EASE_CIRCLE_OUT="circleOut";r.ServiceAnalytics._offlineUserId="";r.ServiceAnalytics._offlineTrackingId=
"";r.ServiceAnalytics._appId="";r.ServiceAnalytics._sessionId="";r.ServiceAnalytics._flagInitted=!1;r.ServiceAnalytics._flagStarted=!1;r.ServiceAnalytics._flagLoaded=!1;r.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID="nkcimocuresid";r.ServiceAnalytics.OPTION_ENABLE_TRACKING=!0;f.WMPointer._DELTA_ALLOWANCE=30;f.WMPointer._DELTA_TIMEOUT=0.2;f.WMSound.FADE_NONE=0;f.WMSound.FADE_IN=1;f.WMSound.FADE_OUT=-1;f.WorkinCloud.instance=new f.WorkinCloud;g.html.HtmlPlatform.instance=new g.html.HtmlPlatform;m.SignalBase.DISPATCHING_SENTINEL=
new m.SignalConnection(null,null);D.root=new O;D.uncaughtError=new m.Signal1;D.hidden=new m.Value(!1);D.hasGPU=new m.Value(!1);D._platform=g.html.HtmlPlatform.instance;D._calledInit=!1;Y.logger=new m.Logger(D._platform.createLogHandler("flambe"));y.Manifest._buildManifest=y.Manifest.createBuildManifests();Y=y.Manifest;L=(new W("\\b(Android)\\b","")).match(B.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;Y._supportsCrossOrigin=L;j.Sprite._scratchPoint=new I.Point;g.BasicKeyboard._sharedEvent=
new e.KeyboardEvent;g.BasicMouse._sharedEvent=new e.MouseEvent;g.BasicPointer._sharedEvent=new e.PointerEvent;g.html.CanvasRenderer.CANVAS_TEXTURES=(new W("(iPhone|iPod|iPad)","")).match(B.window.navigator.userAgent);g.html.HtmlAssetPackLoader._mediaRefCount=0;g.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];g.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=B.window.top==B.window&&(new W("Mobile(/.*)? Safari","")).match(B.window.navigator.userAgent);g.html.WebAudioSound._detectSupport=!0;
S.USE_CACHE=!1;S.USE_ENUM_INDEX=!1;S.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";P.DEFAULT_RESOLVER=N;P.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";M.main()})();
